/*
  filename: integralui.listitem.js
  version : 2.2.0
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function e(){this.constructor=b}d(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),__decorate=this&&this.__decorate||function(d,b,a,e){var f=arguments.length,c=3>f?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,g;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(d,b,a,e);else for(var h=d.length-1;0<=h;h--)if(g=d[h])c=(3>f?g(c):3<f?g(b,a,c):g(b,a))||c;return 3<f&&c&&Object.defineProperty(b,a,c),c},__metadata=this&&this.__metadata||function(d,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(d,b)};Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),IntegralUIListItem=function(d){function b(a,b,f){var c=d.call(this,a,b)||this;c.elemRef=a;c.commonService=b;c.baseService=f;c.clickPos={x:0,y:0};c.isClicked=!1;c.isHovered=!1;c.parentCtrl=null;c.spacing=0;c.itemClick=new core_1.EventEmitter;c.itemDblClick=new core_1.EventEmitter;c.itemRightClick=new core_1.EventEmitter;c.allowSelection=!0;
return c}__extends(b,d);b.prototype.ngOnInit=function(){this.parentCtrl=this.baseService.getComponent();this.generalClassName="iui-listitem";this.contentClassName=this.generalClassName+"-content";this.initStyle()};b.prototype.onClick=function(a){this.isEnabled&&1==a.which&&(a={event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemClick.emit(a):this.itemClick.emit(a))};b.prototype.onDblClick=function(a){this.isEnabled&&1==a.which&&(a={cancel:!1,event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemDblClick.emit(a):
this.itemDblClick.emit(a))};b.prototype.onRightClick=function(a){this.isEnabled&&(a={event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemRightClick.emit(a):this.itemRightClick.emit(a))};b.prototype.itemDragStart=function(a){if(this.isEnabled&&this.parentCtrl){var b=this.parentCtrl.getItemFromComponent(this);this.parentCtrl.processDragStart(a,b)}};b.prototype.itemDragOver=function(a,b){if(this.isEnabled&&this.parentCtrl){var e=this.parentCtrl.getItemFromComponent(this),c=this.getPageRect(),
d=this.getContentSize();c={x:c.left,y:c.top,width:c.right-c.left,height:d.height};d="none";this.parentCtrl.isDropPosHorizontal&&(d=this.parentCtrl.isDropPosHorizontal()?"horizontal":"vertical");this.parentCtrl.processDragOver(a,e,c,b,d)}a.stopPropagation()};b.prototype.itemDragDrop=function(a){if(this.isEnabled&&this.parentCtrl){var b=this.parentCtrl.getItemFromComponent(this);this.parentCtrl.processDragDrop(a,b)}a.stopPropagation()};b.prototype.onMouseEnter=function(a){this.isEnabled&&(this.state|=
integralui_core_1.IntegralUIObjectState.hovered,this.mouseEnter.emit(a),this.data&&this.parentCtrl&&this.parentCtrl.invokeEvent("ITEM_HOVER",this.data),this.isHovered=!0);a.stopPropagation()};b.prototype.onMouseDown=function(a){var b=this;if(b.isEnabled){if(b.parentCtrl){var d=b.parentCtrl.getItemFromComponent(b);b.allowSelection=b.parentCtrl.invokeMethod("SELECT_ITEM",{event:a,item:d});b.isClicked=!0;b.clickPos=b.commonService.getClientPos(a,b.elemRef.nativeElement.firstElementChild);var c=setTimeout(function(){b.isClicked=
!1;clearTimeout(c)},500)}b.mouseDown.emit(a)}a.stopPropagation()};b.prototype.onMouseUp=function(a){this.isEnabled&&(this.parentCtrl&&this.allowSelection&&this.parentCtrl.invokeMethod("UPDATE_SELECTION",{event:a,item:this.parentCtrl.getItemFromComponent(this)}),this.mouseUp.emit(a));a.stopPropagation()};b.prototype.onMouseLeave=function(a){this.isEnabled&&(this.state&=~integralui_core_1.IntegralUIObjectState.hovered,this.mouseLeave.emit(a));this.isHovered=!1;a.stopPropagation()};b.prototype.selectItem=
function(){this.state|=integralui_core_1.IntegralUIObjectState.selected};b.prototype.onTouchStart=function(a){this.isEnabled&&this.parentCtrl&&(this.allowSelection=this.parentCtrl.invokeMethod("SELECT_ITEM",{event:a,item:this.parentCtrl.getItemFromComponent(this)}));a.stopPropagation()};b.prototype.getControlStyle=function(){var a={};this.data&&this.parentCtrl&&(a=this.parentCtrl.getDataFields(),a=this.data[a.style]||{});a.position=this.positionType;a.top=this.itemPos.top+"px";a.left=this.itemPos.left+
"px";0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};__decorate([core_1.ViewChild("content",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"contentElem",void 0);__decorate([core_1.ViewChild("dragElem",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"dragElem",void 0);__decorate([core_1.Input(),__metadata("design:type",Number)],
b.prototype,"spacing",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"itemClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"itemDblClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"itemRightClick",void 0);return b=__decorate([core_1.Component({selector:"iui-listitem",template:'\n        <li [ngClass]="{ \'iui-listitem-general\': !allowAnimation, \'iui-listitem-animate\': allowAnimation, \'iui-listitem-animate-enter-suspended\': allowAnimation && isHovered }" (mouseenter)="onMouseEnter($event)" (mousemove)="onMouseMove($event)" (mouseleave)="onMouseLeave($event)" [ngStyle]="getControlStyle()">\n            <div [ngClass]="getControlClass()" style="position:relative" draggable="true" (dragstart)="itemDragStart($event)" (dragover)="itemDragOver($event, true)" (drop)="itemDragDrop($event)" #dragElem>\n                <div [ngClass]="getContentClass()" (click)="onClick($event)" (dblclick)="onDblClick($event)" (contextmenu)="onRightClick($event)" (mousedown)="onMouseDown($event)" (mouseup)="onMouseUp($event)" (touchstart)="onTouchStart($event)" #content>\n                    <span *ngIf="icon" class="iui-item-icon" [ngClass]="icon" [style.display]="getIconStatus()"></span>\n                    <span *ngIf="text" class="iui-item-label">{{text}}</span>\n                    <ng-content></ng-content>\n                </div>\n                <span *ngIf="allowAnimation && isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ height: getSize().height + \'px\', width: clickPos.x + \'px\' }">\n                    <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-left\': isClicked }" [ngStyle]="{ height: getSize().height + \'px\' }"></span>\n               </span>\n                <span *ngIf="allowAnimation && isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ left: clickPos.x + \'px\', height: getSize().height + \'px\', width: getSize().width - clickPos.x + \'px\' }">\n                    <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-right\': isClicked }" [ngStyle]="{ height: getSize().height + \'px\' }"></span>\n                </span>\n            </div>\n        </li>\n    ',
inputs:"controlStyle data enabled icon name size state text".split(" "),outputs:"click mouseDown mouseEnter mouseLeave mouseMove mouseUp".split(" "),encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[core_1.ElementRef,integralui_common_service_1.IntegralUICommonService,integralui_core_1.IntegralUIBaseService])],b)}(integralui_core_1.IntegralUIItem);exports.IntegralUIListItem=IntegralUIListItem;