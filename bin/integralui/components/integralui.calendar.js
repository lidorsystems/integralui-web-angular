/*
  filename: integralui.calendar.js
  version : 1.6.0
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var f=function(d,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return f(d,a)};return function(d,a){function b(){this.constructor=d}f(d,a);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),__decorate=this&&this.__decorate||function(f,d,a,b){var c=arguments.length,l=3>c?d:null===b?b=Object.getOwnPropertyDescriptor(d,a):b,e;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(f,d,a,b);else for(var h=f.length-1;0<=h;h--)if(e=f[h])l=(3>c?e(l):3<c?e(d,a,l):e(d,a))||l;return 3<c&&l&&Object.defineProperty(d,a,l),l},__metadata=this&&this.__metadata||function(f,d){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(f,d)};Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),IntegralUICalendar=function(f){function d(a,b){var c=f.call(this,b)||this;c.elemRef=a;c.commonService=b;c.animateCurrentPos=0;c.animateNextPos=0;c.animatePrevPos=0;c.animateCurrentOpacity=1;c.animateNextOpacity=0;c.animatePrevOpacity=0;c.decadeOpacity=0;c.monthOpacity=1;c.yearOpacity=0;c.isDecadeAnimated=!1;c.isMonthAnimated=!1;c.isYearAnimated=
!1;c.listDayWeek=[];c.title="";c.listYears=[];c.nextListYears=[];c.prevListYears=[];c.listMonths=[];c.nextListMonths=[];c.prevListMonths=[];c.listDaysInMonth=[];c.nextListDaysInMonth=[];c.prevListDaysInMonth=[];c.buttonMargin={top:2,right:2,bottom:2,left:2};c.ctrlOpacity=1;c.contentSize={width:0,height:0};c.displayMode=0;c.headerSize={width:0,height:0};c.prevDisplayMode=0;c.titleMargin={top:2,right:2,bottom:2,left:2};c.titleSize={width:0,height:0};c.updateTimer=null;c.contentCellClass=[];c.ctrlClassObj=
"";c.firstDayOfWeek=integralui_core_1.IntegralUIWeekDays.Sunday;c.locales="en-us";c.showToday=!0;c.dateChanged=new core_1.EventEmitter;c.isNavigationActive=!1;c.navTimer=null;for(var d=0;7>d;d++)c.listDayWeek.push({});return c}__extends(d,f);Object.defineProperty(d.prototype,"controlStyle",{get:function(){return this.currentControlStyle},set:function(a){a&&(this.currentControlStyle=a,this.initDefaultStyle(),this.updateStyle(a),this.updateControlClass())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"selectedDate",{get:function(){return this.currentSelectedDate},set:function(a){this.currentSelectedDate!=a&&(this.currentSelectedDate=a,this.currentDate=new Date(a.getFullYear(),a.getMonth(),a.getDate()))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"todayDate",{get:function(){return this.currentTodayDate},set:function(a){this.currentTodayDate!=a&&(this.currentTodayDate=a,this.updateLayout())},enumerable:!0,configurable:!0});d.prototype.ngOnInit=function(){this.generalClassName=
"iui-calendar";this.cellClassName=this.generalClassName+"-cell";this.initStyle()};d.prototype.initDefaultStyle=function(){this.defaultStyle={general:{disabled:this.generalClassName+"-disabled",focused:this.generalClassName+"-focused",normal:this.generalClassName,hovered:this.generalClassName+"-hovered",selected:this.generalClassName+"-selected"},cell:{disabled:this.cellClassName+"-disabled",focused:this.cellClassName+"-focused",grayed:this.cellClassName+"-grayed",normal:this.cellClassName,hovered:this.cellClassName+
"-hovered",selected:this.cellClassName+"-selected",today:this.cellClassName+"-today"}}};d.prototype.initStyle=function(){this.initDefaultStyle();this.updateStyle(this.controlStyle);this.refresh()};d.prototype.ngAfterViewInit=function(){var a=this;a.ctrlOpacity=0;a.currentTodayDate||(a.currentTodayDate=new Date);a.currentSelectedDate||(a.currentSelectedDate=new Date);var b=a.currentSelectedDate.getDate(),c=a.currentSelectedDate.getMonth(),d=a.currentSelectedDate.getFullYear();a.currentDate=new Date(d,
c,b);a.updateLayout();var e=setTimeout(function(){a.ctrlOpacity=1;clearTimeout(e)},5)};d.prototype.ngOnDestroy=function(){this.removeNavigationTimer()};d.prototype.ngAfterContentChecked=function(){this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight};this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&
(this.updateLayout(),this.prevClientRect.height=this.clientRect.height)};d.prototype.clearDisplayAnimation=function(){this.isYearAnimated=this.isDecadeAnimated=this.isMonthAnimated=!1};d.prototype.animateDisplayChanges=function(a){var b=this;if(a){a=b.currentDate.getDate();var c=b.currentDate.getMonth(),d=b.currentDate.getFullYear();b.updateHeaderTitle(new Date(d,c,a))}else b.updateLayout();if(b.allowAnimation){b.isMonthAnimated=0==b.prevDisplayMode?!0:!1;b.isDecadeAnimated=2==b.prevDisplayMode?!0:
!1;b.isYearAnimated=1==b.prevDisplayMode?!0:!1;var e=setInterval(function(){switch(b.displayMode){case 1:1>b.yearOpacity?(b.yearOpacity+=.03,b.decadeOpacity=0<b.decadeOpacity?b.decadeOpacity-.03:0,b.monthOpacity=0<b.monthOpacity?b.monthOpacity-.03:0):(b.decadeOpacity=0,b.monthOpacity=0,b.yearOpacity=1,b.clearDisplayAnimation(),b.refresh(),clearInterval(e));break;case 2:1>b.decadeOpacity?(b.decadeOpacity+=.03,b.monthOpacity=0<b.monthOpacity?b.monthOpacity-.03:0,b.yearOpacity=0<b.yearOpacity?b.yearOpacity-
.03:0):(b.decadeOpacity=1,b.monthOpacity=0,b.yearOpacity=0,b.clearDisplayAnimation(),b.refresh(),clearInterval(e));break;default:1>b.monthOpacity?(b.monthOpacity+=.03,b.decadeOpacity=0<b.decadeOpacity?b.decadeOpacity-.03:0,b.yearOpacity=0<b.yearOpacity?b.yearOpacity-.03:0):(b.decadeOpacity=0,b.monthOpacity=1,b.yearOpacity=0,b.clearDisplayAnimation(),b.refresh(),clearInterval(e))}},5)}else switch(b.isMonthAnimated=!1,b.isDecadeAnimated=!1,b.isYearAnimated=!1,b.displayMode){case 1:b.decadeOpacity=0;
b.monthOpacity=0;b.yearOpacity=1;b.refresh();break;case 2:b.decadeOpacity=1;b.monthOpacity=0;b.yearOpacity=0;b.refresh();break;default:b.decadeOpacity=0,b.monthOpacity=1,b.yearOpacity=0,b.refresh()}};d.prototype.getCorrectDayInMonth=function(a,b,c){a=this.getLastDayFromMonth(b,a);return c<=a?c:a};d.prototype.getLastDayFromMonth=function(a,b){return 1==a?0==b%4?29:28:3==a||5==a||8==a||10==a?30:31};d.prototype.getPrevMonth=function(a){a=a.getMonth();return 0==a?11:a-1};d.prototype.getPrevYear=function(a){var b=
a.getMonth();a=a.getFullYear();return 1==this.displayMode?a-1:0==b?a-1:a};d.prototype.getNextMonth=function(a){a=a.getMonth();return 11==a?0:a+1};d.prototype.getNextYear=function(a){var b=a.getMonth();a=a.getFullYear();return 1==this.displayMode?a+1:11==b?a+1:a};d.prototype.getWeekNames=function(){for(var a=new Date(2017,0,2),b=[],c=0;7>c;c++)b.push(a.toLocaleString(this.locales,{weekday:"long"})),a.setDate(a.getDate()+1);return b};d.prototype.isDateEqual=function(a,b){return this.isYearEqual(a,b)&&
this.isMonthEqual(a,b)&&a.getDate()==b.getDate()};d.prototype.isMonthEqual=function(a,b){return a.getMonth()==b.getMonth()};d.prototype.isYearEqual=function(a,b){return a.getFullYear()==b.getFullYear()};d.prototype.reset=function(){this.decadeOpacity=this.displayMode=0;this.monthOpacity=1;this.yearOpacity=0};d.prototype.refresh=function(){this.updateControlClass();if(this.currentDate){var a=this.currentDate.getDate(),b=this.currentDate.getMonth(),c=this.currentDate.getFullYear();a=new Date(c,b,a);
for(c=0;c<this.listDaysInMonth.length;c++)for(var d=this.listDaysInMonth[c],e=0;e<d.days.length;e++)b=d.days[e],b.style=this.getDayObjectStyle(a,b.value,b.grayed);for(c=0;c<this.listMonths.length;c++)for(d=this.listMonths[c],e=0;e<d.months.length;e++)b=d.months[e],b.style=this.getMonthObjectStyle(a,b.value,!1);for(c=0;c<this.listYears.length;c++)for(d=this.listYears[c],e=0;e<d.years.length;e++)b=d.years[e],b.style=this.getYearObjectStyle(a,b.value,b.grayed)}};d.prototype.updateLayout=function(){var a=
this;a.updateTimer=setTimeout(function(){a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth,height:a.elemRef.nativeElement.firstElementChild.clientHeight};a.headerSize={width:a.clientRect.width-4,height:a.headerElem.nativeElement.offsetHeight};a.contentSize={width:a.clientRect.width,height:a.clientRect.height-a.headerSize.height};a.listYears.length=0;a.nextListYears.length=0;a.prevListYears.length=0;a.listMonths.length=0;a.nextListMonths.length=0;a.prevListMonths.length=0;a.listDaysInMonth.length=
0;a.nextListDaysInMonth.length=0;a.prevListDaysInMonth.length=0;var b=a.currentDate.getDate(),c=a.currentDate.getMonth(),d=a.currentDate.getFullYear(),e=new Date(d,c,b);e.setFullYear(d-10);a.updateDecadeLayout(a.prevListYears,e);e.setFullYear(d+10);a.updateDecadeLayout(a.nextListYears,e);e.setFullYear(d);a.updateDecadeLayout(a.listYears,e);e.setFullYear(d-1);a.updateYearLayout(a.prevListMonths,e);e.setFullYear(d+1);a.updateYearLayout(a.nextListMonths,e);e.setFullYear(d);a.updateYearLayout(a.listMonths,
e);e=new Date(a.getPrevYear(a.currentDate),a.getPrevMonth(a.currentDate),1);a.updateMonthLayout(a.prevListDaysInMonth,e);e=new Date(a.getNextYear(a.currentDate),a.getNextMonth(a.currentDate),1);a.updateMonthLayout(a.nextListDaysInMonth,e);e=new Date(d,c,b);a.updateMonthLayout(a.listDaysInMonth,e);a.updateHeaderTitle(e);a.updateHeaderLayout();a.updateHeaderLayout();a.animatePrevPos=-a.contentSize.width;a.animateCurrentPos=0;a.animateNextPos=a.contentSize.width;a.animatePrevOpacity=0;a.animateCurrentOpacity=
1;a.animateNextOpacity=0;clearTimeout(a.updateTimer)},1)};d.prototype.updateHeaderLayout=function(){var a=this,b=setTimeout(function(){a.buttonMargin={top:(a.headerSize.height-a.headerButtonElem.nativeElement.offsetHeight)/2,right:2,bottom:2,left:2};a.titleMargin={top:(a.headerSize.height-a.headerTitleElem.nativeElement.offsetHeight)/2,right:2,bottom:2,left:2};a.titleSize={width:a.headerSize.width-2*(a.headerButtonElem.nativeElement.offsetWidth+a.buttonMargin.left+a.buttonMargin.right)-(a.titleMargin.left+
a.titleMargin.right),height:a.headerSize.height};clearTimeout(b)},1)};d.prototype.updateHeaderTitle=function(a){switch(this.displayMode){case 1:this.title=a.getFullYear().toString();break;case 2:var b=10*Math.floor(a.getFullYear()/10);this.title=b.toString()+" - "+(b+9).toString();break;default:b=a.toLocaleString(this.locales,{month:"long"}),a=a.getFullYear().toString(),this.title=b+", "+a}};d.prototype.updateDecadeLayout=function(a,b){for(var c=10*Math.floor(b.getFullYear()/10)-1,d,e=0;3>e;e++){for(var h=
{years:[]},g=0;4>g;g++)d=0==e&&0==g||2==e&&3==g?!0:!1,h.years.push({grayed:d,style:this.getYearObjectStyle(b,c,d),value:c}),c++;a.push(h)}};d.prototype.updateMonthLayout=function(a,b){for(var c=this.getWeekNames(),d=this.firstDayOfWeek,e=this.listDayWeek.length=0;7>e&&d<c.length;e++)this.listDayWeek.push({text:c[d].substring(0,2)}),d=6>d?d+1:0;e=b.getFullYear();var h=b.getMonth();c=this.getLastDayFromMonth(h,e);var g=(new Date(e,h,1)).getDay();d=this.firstDayOfWeek+1;g=g>this.firstDayOfWeek?g-d:g-
d+7;g=0<g?g:7;d=this.getLastDayFromMonth(0<h?h-1:11,e);h=!1;var f=0;for(e=0;6>e;e++){var n={days:[]};if(0==e){for(var k=0;k<g;k++){var m=d-g+1+k;m={grayed:!0,isPrev:!0,style:this.getDayObjectStyle(b,m,!0),value:m};n.days.push(m)}for(k=g;7>k;k++)f++,m={grayed:!1,style:this.getDayObjectStyle(b,f,!1),value:f},n.days.push(m)}else for(k=0;7>k;k++)!h&&f>=c&&(h=!0),f=f<c?f+1:1,m={grayed:h,isNext:h,style:this.getDayObjectStyle(b,f,h),value:f},n.days.push(m);a.push(n)}};d.prototype.updateYearLayout=function(a,
b){for(var c=0,d=0;3>d;d++){for(var e={months:[]},f=0;4>f;f++){var g=new Date;g.setMonth(c);e.months.push({text:g.toLocaleString(this.locales,{month:"long"}).substring(0,3),style:this.getMonthObjectStyle(b,c,!1),value:c});c++}a.push(e)}};d.prototype.updateCurrentDate=function(a,b){if(a)this.currentDate=new Date(a.getFullYear(),a.getMonth(),a.getDate());else{this.currentDate.getDate();this.currentDate.getMonth();var c=this.currentDate.getFullYear();switch(this.displayMode){case 1:this.currentDate=
new Date(b?this.getPrevYear(this.currentDate):this.getNextYear(this.currentDate),this.currentDate.getMonth(),1);break;case 2:this.currentDate.setFullYear(b?c-10:c+10);break;default:this.currentDate=new Date(b?this.getPrevYear(this.currentDate):this.getNextYear(this.currentDate),b?this.getPrevMonth(this.currentDate):this.getNextMonth(this.currentDate),1)}}this.updateLayout()};d.prototype.btnNextClicked=function(a){var b=this;b.next(a);b.removeNavigationTimer();b.isNavigationActive=!0;b.navTimer=setInterval(function(){b.isNavigationActive?
b.next(a):b.removeNavigationTimer()},500);a.stopPropagation()};d.prototype.btnPrevClicked=function(a){var b=this;b.prev(a);b.removeNavigationTimer();b.isNavigationActive=!0;b.navTimer=setInterval(function(){b.isNavigationActive?b.prev(a):b.removeNavigationTimer()},500);a.stopPropagation()};d.prototype.ctrlClick=function(a){a.stopPropagation()};d.prototype.ctrlMouseDown=function(a){a.stopPropagation()};d.prototype.ctrlMouseEnter=function(a){this.state|=integralui_core_1.IntegralUIObjectState.hovered};
d.prototype.ctrlMouseLeave=function(a){this.state&=~integralui_core_1.IntegralUIObjectState.hovered};d.prototype.ctrlMouseUp=function(a){this.removeNavigationTimer();a.stopPropagation()};d.prototype.dayClicked=function(a,b){1==a.which&&this.isEnabled&&this.processDayClicked(a,b);a.stopPropagation()};d.prototype.dayTouchEnd=function(a,b){this.isEnabled&&this.processDayClicked(a,b);a.stopPropagation()};d.prototype.dayEnter=function(a,b){if(this.isEnabled){var c=b.isPrev?this.getPrevYear(this.currentDate):
b.isNext?this.getNextYear(this.currentDate):this.currentDate.getFullYear(),d=b.isPrev?this.getPrevMonth(this.currentDate):b.isNext?this.getNextMonth(this.currentDate):this.currentDate.getMonth();this.hoverDate=new Date(c,d,b.value);this.refresh()}a.stopPropagation()};d.prototype.dayLeave=function(a,b){this.isEnabled&&(this.prevHoverDate=this.hoverDate,this.hoverDate=null,this.refresh());a.stopPropagation()};d.prototype.headerClicked=function(a){1==a.which&&this.isEnabled&&2>this.displayMode&&(this.prevDisplayMode=
this.prevDisplayMode!=this.displayMode?this.displayMode:this.prevDisplayMode,this.displayMode=2>this.displayMode?this.displayMode+1:2,this.animateDisplayChanges(!0));this.hoverDate=null;a.stopPropagation()};d.prototype.monthClicked=function(a,b){1==a.which&&this.isEnabled&&this.processMonthClicked(b);a.stopPropagation()};d.prototype.monthTouchEnd=function(a,b){this.isEnabled&&this.processMonthClicked(b);a.stopPropagation()};d.prototype.monthEnter=function(a,b){if(this.isEnabled){var c=this.currentSelectedDate.getFullYear(),
d=b.value,e=this.getCorrectDayInMonth(c,d,this.currentSelectedDate.getDate());this.hoverDate=new Date(c,d,e);this.refresh()}a.stopPropagation()};d.prototype.monthLeave=function(a,b){this.isEnabled&&(this.prevHoverDate=this.hoverDate,this.hoverDate=null,this.refresh());a.stopPropagation()};d.prototype.yearClicked=function(a,b){1==a.which&&this.isEnabled&&this.processYearClicked(b);a.stopPropagation()};d.prototype.yearTouchEnd=function(a,b){this.isEnabled&&this.processYearClicked(b);a.stopPropagation()};
d.prototype.yearEnter=function(a,b){if(this.isEnabled){var c=b.value,d=this.currentSelectedDate.getMonth(),e=this.currentSelectedDate.getDate();this.hoverDate=new Date(c,d,e);this.refresh()}a.stopPropagation()};d.prototype.yearLeave=function(a,b){this.isEnabled&&(this.prevHoverDate=this.hoverDate,this.hoverDate=null,this.refresh());a.stopPropagation()};d.prototype.next=function(a,b){var c=this;if(c.allowAnimation)var d=setInterval(function(){0<c.animateNextPos?(c.animateCurrentPos-=5,c.animateNextPos-=
5,c.animateCurrentOpacity=0<c.animateCurrentOpacity?c.animateCurrentOpacity-.01:0,c.animateNextOpacity=1>c.animateNextOpacity?c.animateNextOpacity+.01:1):(c.animateCurrentPos=-c.contentSize.width,c.animateNextPos=0,c.animateCurrentOpacity=0,c.animateNextOpacity=1,c.updateCurrentDate(b),c.prevHoverDate=null,c.hoverDate=null,clearInterval(d))},5);else c.updateCurrentDate(b),c.prevHoverDate=null,c.hoverDate=null;a.stopPropagation()};d.prototype.prev=function(a,b){var c=this;if(c.allowAnimation)var d=
setInterval(function(){0>c.animatePrevPos?(c.animateCurrentPos+=5,c.animatePrevPos+=5,c.animateCurrentOpacity=0<c.animateCurrentOpacity?c.animateCurrentOpacity-.01:0,c.animatePrevOpacity=1>c.animatePrevOpacity?c.animatePrevOpacity+.01:1):(c.animateCurrentPos=c.contentSize.width,c.animatePrevPos=0,c.animateCurrentOpacity=0,c.animatePrevOpacity=1,c.updateCurrentDate(b,!0),c.prevHoverDate=null,c.hoverDate=null,clearInterval(d))},5);else c.updateCurrentDate(b,!0),c.prevHoverDate=null,c.hoverDate=null;
a.stopPropagation()};d.prototype.removeNavigationTimer=function(){this.isNavigationActive=!1;this.navTimer&&clearInterval(this.navTimer);this.navTimer=null};d.prototype.processDayClicked=function(a,b){var c=b.isPrev?this.getPrevYear(this.currentDate):b.isNext?this.getNextYear(this.currentDate):this.currentDate.getFullYear(),d=b.isPrev?this.getPrevMonth(this.currentDate):b.isNext?this.getNextMonth(this.currentDate):this.currentDate.getMonth();this.selectedDate=new Date(c,d,b.value);b.isPrev?this.prev(a,
this.selectedDate):b.isNext?this.next(a,this.selectedDate):this.refresh();this.dateChanged.emit({date:this.currentSelectedDate})};d.prototype.processMonthClicked=function(a){var b=this.currentDate.getFullYear();a=a.value;var c=this.getCorrectDayInMonth(b,a,this.currentSelectedDate.getDate());this.selectedDate=new Date(b,a,c);this.prevDisplayMode=this.displayMode;this.displayMode=0;this.animateDisplayChanges()};d.prototype.processYearClicked=function(a){a=a.value;var b=this.currentDate.getMonth(),
c=this.currentSelectedDate.getDate();this.selectedDate=new Date(a,b,c);this.prevDisplayMode=this.displayMode;this.displayMode=1;this.animateDisplayChanges()};d.prototype.onWindowMouseUp=function(a){this.removeNavigationTimer()};d.prototype.getDayObjectStyle=function(a,b,c){return this.getCellObjectStyle(a,new Date(a.getFullYear(),a.getMonth(),b),c)};d.prototype.getMonthObjectStyle=function(a,b,c){return this.getCellObjectStyle(a,new Date(a.getFullYear(),b,1),c)};d.prototype.getYearObjectStyle=function(a,
b,c){return this.getCellObjectStyle(a,new Date(b,0,1),c)};d.prototype.getCellObjectStyle=function(a,b,c){a=[];a.push(this.cellClassName);switch(this.displayMode){case 1:c?a.push(this.options.currentStyle.cell.grayed):this.isMonthEqual(b,this.currentDate)?a.push(this.options.currentStyle.cell.selected):this.hoverDate&&this.isMonthEqual(b,this.hoverDate)?(a.push(this.options.currentStyle.cell.hovered),this.allowAnimation&&a.push(this.cellClassName+"-enter")):this.prevHoverDate&&this.isMonthEqual(b,
this.prevHoverDate)?(a.push(this.options.currentStyle.cell.normal),this.allowAnimation&&a.push(this.cellClassName+"-leave")):a.push(this.options.currentStyle.cell.normal);break;case 2:this.isYearEqual(b,this.currentDate)?a.push(this.options.currentStyle.cell.selected):this.hoverDate&&this.isYearEqual(b,this.hoverDate)?(a.push(this.options.currentStyle.cell.hovered),this.allowAnimation&&a.push(this.cellClassName+"-enter")):this.prevHoverDate&&this.isYearEqual(b,this.prevHoverDate)?(a.push(this.options.currentStyle.cell.normal),
this.allowAnimation&&a.push(this.cellClassName+"-leave")):a.push(this.options.currentStyle.cell.normal);break;default:c?a.push(this.options.currentStyle.cell.grayed):(this.isDateEqual(b,this.currentSelectedDate)?a.push(this.options.currentStyle.cell.selected):this.hoverDate&&this.isDateEqual(b,this.hoverDate)?(a.push(this.options.currentStyle.cell.hovered),!this.allowAnimation||this.showToday&&this.isDateEqual(b,this.currentTodayDate)||a.push(this.cellClassName+"-enter")):this.prevHoverDate&&this.isDateEqual(b,
this.prevHoverDate)?(a.push(this.options.currentStyle.cell.normal),!this.allowAnimation||this.showToday&&this.isDateEqual(b,this.currentTodayDate)||a.push(this.cellClassName+"-leave")):a.push(this.options.currentStyle.cell.normal),this.showToday&&this.isDateEqual(b,this.currentTodayDate)&&a.push(this.options.currentStyle.cell.today))}return a};d.prototype.getControlStyle=function(){var a={opacity:this.ctrlOpacity};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=
this.ctrlSize.height+"px");return a};d.prototype.getCellStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.disabled,this.cellClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.focused,this.cellClassName+"-focused"),grayed:this.commonService.isFieldAvailable(a.grayed,this.cellClassName+"-grayed"),hovered:this.commonService.isFieldAvailable(a.hovered,this.cellClassName+"-hovered"),normal:this.commonService.isFieldAvailable(a.normal,
this.cellClassName),selected:this.commonService.isFieldAvailable(a.selected,this.cellClassName+"-selected"),today:this.commonService.isFieldAvailable(a.grayed,this.cellClassName+"-today")}:{disabled:this.defaultStyle.cell.disabled,focused:this.defaultStyle.cell.focused,grayed:this.defaultStyle.cell.grayed,hovered:this.defaultStyle.cell.hovered,normal:this.defaultStyle.cell.normal,selected:this.defaultStyle.cell.selected,today:this.defaultStyle.cell.today}};d.prototype.updateControlClass=function(){var a=
this.generalClassName;this.options.currentStyle&&(a+=" "+this.options.currentStyle.general.normal,this.state&integralui_core_1.IntegralUIObjectState.disabled?a+=" "+this.options.currentStyle.general.disabled:this.state&integralui_core_1.IntegralUIObjectState.focused?a+=" "+this.options.currentStyle.general.focused:this.state&integralui_core_1.IntegralUIObjectState.selected?a+=" "+this.options.currentStyle.general.selected:this.state&integralui_core_1.IntegralUIObjectState.hovered&&(a+=" "+this.options.currentStyle.general.hovered));
this.ctrlClassObj=a};d.prototype.updateStyle=function(a){this.options.currentStyle=a?{general:this.getGeneralStyle(a.general),cell:this.getCellStyle(a.cell)}:{general:{disabled:this.defaultStyle.general.disabled,focused:this.defaultStyle.general.focused,hovered:this.defaultStyle.general.hovered,normal:this.defaultStyle.general.normal,selected:this.defaultStyle.general.selected},cell:{disabled:this.defaultStyle.cell.disabled,focused:this.defaultStyle.cell.focused,grayed:this.defaultStyle.cell.grayed,
hovered:this.defaultStyle.cell.hovered,normal:this.defaultStyle.cell.normal,selected:this.defaultStyle.cell.selected,today:this.defaultStyle.cell.today}}};__decorate([core_1.ViewChild("header",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],d.prototype,"headerElem",void 0);__decorate([core_1.ViewChild("headerButton",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],d.prototype,"headerButtonElem",void 0);__decorate([core_1.ViewChild("headerTitle",
{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],d.prototype,"headerTitleElem",void 0);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],d.prototype,"controlStyle",null);__decorate([core_1.Input(),__metadata("design:type",Number)],d.prototype,"firstDayOfWeek",void 0);__decorate([core_1.Input(),__metadata("design:type",String)],d.prototype,"locales",void 0);__decorate([core_1.Input(),__metadata("design:type",Date),
__metadata("design:paramtypes",[Date])],d.prototype,"selectedDate",null);__decorate([core_1.Input(),__metadata("design:type",Boolean)],d.prototype,"showToday",void 0);__decorate([core_1.Input(),__metadata("design:type",Date),__metadata("design:paramtypes",[Date])],d.prototype,"todayDate",null);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],d.prototype,"dateChanged",void 0);__decorate([core_1.HostListener("document:mouseup",["$event"]),__metadata("design:type",Function),
__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],d.prototype,"onWindowMouseUp",null);return d=__decorate([core_1.Component({selector:"iui-calendar",template:'\n\t\t<div class="{{ctrlClassObj}}" [ngStyle]="getControlStyle()" (click)="ctrlClick($event)" (mouseenter)="ctrlMouseEnter($event)" (mouseleave)="ctrlMouseLeave($event)" (mousedown)="ctrlMouseDown($event)" (mouseup)="ctrlMouseUp($event)">\n            <div style="height:14%;margin:0 2px;" #header>\n                <div class="iui-calendar-header-button iui-calendar-header-button-prev" [ngStyle]="{ \'margin-top\': buttonMargin.top + \'px\', \'margin-left\': buttonMargin.left + \'px\' }" (mousedown)="btnPrevClicked($event)" #headerButton><span></span></div>\n                <div class="iui-calendar-header-title" [ngStyle]="{ \'margin-top\': titleMargin.top + \'px\', \'margin-left\': titleMargin.left + \'px\', width: titleSize.width + \'px\' }" (click)="headerClicked($event)" #headerTitle><span>{{title}}</span></div>\n                <div class="iui-calendar-header-button iui-calendar-header-button-next" [ngStyle]="{ \'margin-top\': buttonMargin.top + \'px\', \'margin-right\': buttonMargin.right + \'px\' }" (mousedown)="btnNextClicked($event)"><span></span></div>\n            </div>\n            <div style="position:relative;overflow:hidden;" [ngStyle]="{ height: contentSize.height + \'px\' }">\n                \x3c!-- DECADE --\x3e\n                <span *ngIf="displayMode==2 || isDecadeAnimated" [ngStyle]="{ opacity: decadeOpacity }">\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animatePrevPos + \'px\' }" #content>\n                        <tr *ngFor="let group of prevListYears">\n                            <td [ngClass]="year.style" *ngFor="let year of group.years" style="width:25%;height:33%;text-align:center;">\n                                <span>{{year.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateCurrentPos + \'px\' }" #content>\n                        <tr *ngFor="let group of listYears">\n                            <td [ngClass]="year.style" *ngFor="let year of group.years" style="width:25%;height:33%;text-align:center;" (mouseenter)="yearEnter($event, year)" (mousedown)="yearClicked($event, year)" (mouseleave)="yearLeave($event, year)" (touchend)="yearTouchEnd($event, year)">\n                                <span>{{year.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateNextPos + \'px\' }" #content>\n                        <tr *ngFor="let group of nextListYears">\n                            <td [ngClass]="year.style" *ngFor="let year of group.years" style="width:25%;height:33%;text-align:center;">\n                                <span>{{year.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                </span>\n                \x3c!-- YEAR --\x3e\n                <span *ngIf="displayMode==1 || isYearAnimated" [ngStyle]="{ opacity: yearOpacity }">\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animatePrevPos + \'px\' }" #content>\n                        <tr *ngFor="let group of prevListMonths">\n                            <td [ngClass]="month.style" *ngFor="let month of group.months" style="width:25%;height:33%;text-align:center;">\n                                <span>{{month.text}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateCurrentPos + \'px\' }" #content>\n                        <tr *ngFor="let group of listMonths">\n                            <td [ngClass]="month.style" *ngFor="let month of group.months" style="width:25%;height:33%;text-align:center;" (mouseenter)="monthEnter($event, month)" (mousedown)="monthClicked($event, month)" (mouseleave)="monthLeave($event, month)" (touchend)="monthTouchEnd($event, month)">\n                                <span>{{month.text}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateNextPos + \'px\' }" #content>\n                        <tr *ngFor="let group of nextListMonths">\n                            <td [ngClass]="month.style" *ngFor="let month of group.months" style="width:25%;height:33%;text-align:center;">\n                                <span>{{month.text}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                </span>\n                \x3c!-- MONTH --\x3e\n                <span *ngIf="displayMode==0 || isMonthAnimated" [ngStyle]="{ opacity: monthOpacity }">\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animatePrevPos + \'px\', opacity: 1 }" #content>\n                        <tr>\n                            <th class="iui-calendar-cell-header" *ngFor="let head of listDayWeek" style="width:14.2857%;height:14.2857%;">\n                                <span>{{head.text}}</span>\n                            </th>\n                        </tr>\n                        <tr *ngFor="let week of prevListDaysInMonth">\n                            <td [ngClass]="day.style" style="width:14.2857%;height:14.2857%;" *ngFor="let day of week.days">\n                                <span>{{day.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateCurrentPos + \'px\', opacity: 1 }" #content>\n                        <tr>\n                            <th class="iui-calendar-cell-header" *ngFor="let head of listDayWeek" style="width:14.2857%;height:14.2857%;">\n                                <span>{{head.text}}</span>\n                            </th>\n                        </tr>\n                        <tr *ngFor="let week of listDaysInMonth">\n                            <td [ngClass]="day.style" style="width:14.2857%;height:14.2857%;" *ngFor="let day of week.days" (mouseenter)="dayEnter($event, day)" (mousedown)="dayClicked($event, day)" (mouseleave)="dayLeave($event, day)" (touchend)="dayTouchEnd($event, day)">\n                                <span>{{day.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                    <table cellspacing="2" cellpadding="1" style="position:absolute;width:100%" [ngStyle]="{ height: contentSize.height + \'px\', left: animateNextPos + \'px\', opacity: 1 }" #content>\n                        <tr>\n                            <th class="iui-calendar-cell-header" *ngFor="let head of listDayWeek" style="width:14.2857%;height:14.2857%;">\n                                <span>{{head.text}}</span>\n                            </th>\n                        </tr>\n                        <tr *ngFor="let week of nextListDaysInMonth">\n                            <td [ngClass]="day.style" style="width:14.2857%;height:14.2857%;" *ngFor="let day of week.days">\n                                <span>{{day.value}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                </span>\n            </div>\n\t\t</div>\n\t',
inputs:"controlStyle data enabled name size state".split(" "),encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[core_1.ElementRef,integralui_common_service_1.IntegralUICommonService])],d)}(integralui_core_1.IntegralUIBaseComponent);exports.IntegralUICalendar=IntegralUICalendar;