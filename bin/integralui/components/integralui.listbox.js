/*
  filename: integralui.listbox.js
  version : 2.4.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var e=function(c,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return e(c,a)};return function(c,a){function b(){this.constructor=c}e(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),integralui_data_service_1=require("../services/integralui.data.service"),integralui_dragdrop_service_1=require("../services/integralui.dragdrop.service"),integralui_filter_service_1=require("../services/integralui.filter.service"),integralui_base_list_1=require("./integralui.base.list"),integralui_listitem_1=require("./integralui.listitem"),
i0=require("@angular/core"),i1=require("../services/integralui.data.service"),i2=require("../services/integralui.dragdrop.service"),i3=require("../services/integralui.common.service"),i4=require("../services/integralui.filter.service"),i5=require("./integralui.core"),i6=require("@angular/common"),i7=require("./integralui.scrollbar"),_c0=["content"],_c1=["itemElem"],_c2=function(e,c){return{height:e,width:c}},_c3=function(e){return{"iui-listitem-animate-select iui-listitem-animate-select-left":e}},
_c4=function(e){return{height:e}};
function IntegralUIListBox_span_3_li_2_span_5_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"span",18),i0.\u0275\u0275element(1,"span",19),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext().$implicit,b=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction2(3,_c2,b.animateItemSize.height+"px",a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(6,_c3,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(8,
_c4,b.animateItemSize.height+"px"))}}var _c5=function(e,c,a){return{left:e,height:c,width:a}},_c6=function(e){return{"iui-listitem-animate-select iui-listitem-animate-select-right":e}};
function IntegralUIListBox_span_3_li_2_span_6_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"span",18),i0.\u0275\u0275element(1,"span",19),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext().$implicit,b=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction3(3,_c5,a.clickPos.x+"px",b.animateItemSize.height+"px",b.contentSize.width-a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(7,
_c6,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(9,_c4,b.animateItemSize.height+"px"))}}var _c7=function(e,c){return{"iui-listitem-animate":e,"iui-listitem-animate-enter-suspended":c}},_c8=function(e){return{$implicit:e}};
function IntegralUIListBox_span_3_li_2_Template(e,c){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"li",12,13);i0.\u0275\u0275listener("mouseenter",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemMouseEnter(b,d)})("mouseleave",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemMouseLeave(b,d)});i0.\u0275\u0275elementStart(2,"div",14);i0.\u0275\u0275listener("click",
function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemClickEvent(b,d)})("dblclick",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemDblClickEvent(b,d)})("contextmenu",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemRightClickEvent(b,d)})("mousedown",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemMouseDown(b,
d)})("mousemove",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemMouseMove(b,d)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemMouseUp(b,d)})("dragstart",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemDragStart(b,d)})("dragover",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit,e=c.index;return i0.\u0275\u0275nextContext(2).itemDragOver(b,
d,e,!0)})("drop",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemDragDrop(b,d)});i0.\u0275\u0275elementStart(3,"div",15);i0.\u0275\u0275listener("focus",function(){i0.\u0275\u0275restoreView(a);var b=c.$implicit;return i0.\u0275\u0275nextContext(2).itemGotFocus(b)})("blur",function(){i0.\u0275\u0275restoreView(a);var b=c.$implicit;return i0.\u0275\u0275nextContext(2).itemLostFocus(b)})("keydown",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;
return i0.\u0275\u0275nextContext(2).itemKeyDown(b,d)})("keypress",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemKeyPress(b,d)})("keyup",function(b){i0.\u0275\u0275restoreView(a);var d=c.$implicit;return i0.\u0275\u0275nextContext(2).itemKeyUp(b,d)});i0.\u0275\u0275element(4,"span",16);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementEnd();i0.\u0275\u0275template(5,IntegralUIListBox_span_3_li_2_span_5_Template,2,10,"span",17);i0.\u0275\u0275template(6,
IntegralUIListBox_span_3_li_2_span_6_Template,2,11,"span",17);i0.\u0275\u0275elementEnd()}if(e&2){var b=c.$implicit,d=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction2(10,_c7,d.allowAnimation,d.allowAnimation&&b.data==d.hoverItem));i0.\u0275\u0275advance(2);i0.\u0275\u0275property("ngClass",b.style.general)("ngStyle",b.inlineStyle);i0.\u0275\u0275advance(1);i0.\u0275\u0275propertyInterpolate("tabindex",b.tabIndex);i0.\u0275\u0275property("ngClass",b.style.content)("iuiFocus",
b.data==d.currentFocusItem);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("iuiTemplateOutlet",d.itemData[0])("iuiTemplateOutletContext",i0.\u0275\u0275pureFunction1(13,_c8,b.data));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",d.allowAnimation&&b.isClicked);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",d.allowAnimation&&b.isClicked)}}var _c9=function(e,c,a,b){return{left:e,top:c,height:a,width:b}};
function IntegralUIListBox_span_3_div_3_Template(e,c){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"div",20);i0.\u0275\u0275elementStart(1,"div",21);i0.\u0275\u0275listener("mousemove",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).hoverBlockMouseMove(b)})("mouseleave",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).hoverBlockMouseLeave(b)});i0.\u0275\u0275element(2,"span",16);i0.\u0275\u0275elementEnd();
i0.\u0275\u0275elementEnd()}if(e&2){var b=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction4(4,_c9,b.blockHoverRect.left+"px",b.blockHoverRect.top+"px",b.blockHoverRect.height+"px",b.blockHoverRect.width+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(9,_c4,b.blockHoverRect.height+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("iuiTemplateOutlet",b.itemHoverData[0])("iuiTemplateOutletContext",i0.\u0275\u0275pureFunction1(11,
_c8,b.hoverItemObj.data))}}
function IntegralUIListBox_span_3_span_4_span_1_div_1_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"div",24),i0.\u0275\u0275elementStart(1,"div",25),i0.\u0275\u0275element(2,"span",16),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext(),b=a.index;a=a.$implicit;var d=i0.\u0275\u0275nextContext(3);i0.\u0275\u0275property("ngStyle",d.getSelectBlockRect(b));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(4,_c4,
d.blockSelectHeight+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("iuiTemplateOutlet",d.itemSelectData[0])("iuiTemplateOutletContext",i0.\u0275\u0275pureFunction1(6,_c8,a))}}
function IntegralUIListBox_span_3_span_4_span_1_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"span"),i0.\u0275\u0275template(1,IntegralUIListBox_span_3_span_4_span_1_div_1_Template,3,8,"div",23),i0.\u0275\u0275elementEnd());if(e&2){var a=c.$implicit,b=i0.\u0275\u0275nextContext(3);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",b.isContentAllowed(a,"select"))}}
function IntegralUIListBox_span_3_span_4_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"span"),i0.\u0275\u0275template(1,IntegralUIListBox_span_3_span_4_span_1_Template,2,1,"span",22),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngForOf",a.currentSelectedItems)}}
function IntegralUIListBox_span_3_iui_scrollbar_5_Template(e,c){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"iui-scrollbar",26,27);i0.\u0275\u0275listener("mouseenter",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).scrollMouseEnter(b)})("valueChanged",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onVerticalScrollChanged(b)})("scrollStart",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onVerticalScrollStart(b)})("scrollEnd",
function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onVerticalScrollEnd(b)});i0.\u0275\u0275elementEnd()}if(e&2){var b=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("enabled",b.enabled)("value",b.currentScrollPos.y)("max",b.maxScrollPos.y)("largeChange",b.scrollLargeChange.y)("height",b.scrollBarSize.height)}}
function IntegralUIListBox_span_3_iui_scrollbar_6_Template(e,c){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"iui-scrollbar",28,29);i0.\u0275\u0275listener("mouseenter",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).scrollMouseEnter(b)})("valueChanged",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onHorizontalScrollChanged(b)})("scrollStart",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onHorizontalScrollStart(b)})("scrollEnd",
function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext(2).onHorizontalScrollEnd(b)});i0.\u0275\u0275elementEnd()}if(e&2){var b=i0.\u0275\u0275nextContext(2);i0.\u0275\u0275property("enabled",b.enabled)("orientation",b.horScrollOrientation)("value",b.currentScrollPos.x)("max",b.maxScrollPos.x)("width",b.scrollBarSize.width)}}function IntegralUIListBox_span_3_div_7_Template(e,c){e&1&&i0.\u0275\u0275element(0,"div",30)}var _c10=function(e,c){return{width:e,height:c}};
function IntegralUIListBox_span_3_Template(e,c){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"span");i0.\u0275\u0275elementStart(1,"ul",5);i0.\u0275\u0275listener("touchstart",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().ctrlTouchStart(b)})("touchend",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().ctrlTouchEnd(b)});i0.\u0275\u0275template(2,IntegralUIListBox_span_3_li_2_Template,7,15,"li",6);i0.\u0275\u0275elementEnd();
i0.\u0275\u0275template(3,IntegralUIListBox_span_3_div_3_Template,3,13,"div",7);i0.\u0275\u0275template(4,IntegralUIListBox_span_3_span_4_Template,2,1,"span",8);i0.\u0275\u0275template(5,IntegralUIListBox_span_3_iui_scrollbar_5_Template,2,5,"iui-scrollbar",9);i0.\u0275\u0275template(6,IntegralUIListBox_span_3_iui_scrollbar_6_Template,2,5,"iui-scrollbar",10);i0.\u0275\u0275template(7,IntegralUIListBox_span_3_div_7_Template,1,0,"div",11);i0.\u0275\u0275elementEnd()}if(e&2){var b=i0.\u0275\u0275nextContext();
i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction2(7,_c10,b.contentSize.width+"px",b.contentSize.height+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngForOf",b.scrollItemList);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",b.isHoverTemplatePresent&&!b.isUpdateActive&&b.hoverItemObj&&b.isContentAllowed(b.hoverItemObj.data,"hover"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",b.isSelectedTemplatePresent&&!b.isUpdateActive);i0.\u0275\u0275advance(1);
i0.\u0275\u0275property("ngIf",b.isVerScrollVisible());i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",b.isHorScrollVisible());i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngIf",b.isVerScrollVisible()&&b.isHorScrollVisible())}}function IntegralUIListBox_span_4_Template(e,c){e&1&&(i0.\u0275\u0275elementStart(0,"span"),i0.\u0275\u0275elementStart(1,"ul",31,2),i0.\u0275\u0275projection(3),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd())}
var _c11=["*"],IntegralUIListBox=function(e){function c(a,b,d,c,g,h,k,l){var f=e.call(this,a,b,d,c,g,h)||this;f.dataService=a;f.dragDropService=b;f.elemRef=d;f.elemRenderer=c;f.commonService=g;f.filterService=h;f.cmpResolver=k;f.baseService=l;f.tRef=null;f.itemList=[];return f}__extends(c,e);c.prototype.ngOnInit=function(){this.baseService.setComponent(this);this.updateData();this.updateCurrentList();this.generalClassName="iui-listbox";this.itemClassName="iui-listitem";this.itemContentClassName=this.itemClassName+
"-content";this.initStyle()};c.prototype.updateData=function(){this.dataService.init([{data:this.items,fields:this.options.dataFields}])};c.prototype.ngAfterViewInit=function(){var a=this,b=setTimeout(function(){var d=a.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUITComponent);d&&a.contentRef&&(a.tRef=a.contentRef.createComponent(d));clearTimeout(b)},100);a.updateLayout()};c.prototype.ngAfterContentInit=function(){this.templateList=this.templates.toArray();this.isSelectedTemplatePresent=
this.isHoverTemplatePresent=!1;if(0<this.templateList.length)for(var a=0;a<this.templateList.length;a++){if(this.templateList[a].settings)switch(this.templateList[a].settings.type){case "item":this.itemData.push(this.templateList[a].getTemplate());break;case "item-hover":this.itemHoverData.push(this.templateList[a].getTemplate());this.isHoverTemplatePresent=!0;break;case "item-select":this.itemSelectData.push(this.templateList[a].getTemplate()),this.isSelectedTemplatePresent=!0}}else this.itemData.push(this.itemTemplate)};
c.prototype.ngOnDestroy=function(){this.removeDropMark();this.updateTimer&&clearTimeout(this.updateTimer);this.tRef&&this.tRef.destroy()};c.prototype.ngAfterContentChecked=function(){this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight};this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),
this.prevClientRect.height=this.clientRect.height)};c.prototype.addItem=function(a){this.callEventAdd("add",a)};c.prototype.clearItems=function(){this.dataService.clear();this.clear.emit(null)};c.prototype.insertItemAt=function(a,b){this.callEventAdd("at",a,b)};c.prototype.removeItemAt=function(a){return this.callEventRemove(null,a)};c.prototype.addItemToCurrentList=function(a){a.type="item";a[this.options.dataFields.id]||(a[this.options.dataFields.id]=this.commonService.getUniqueId());this.isItemAllowed(a)&&
this.currentList.push({data:a})};c.prototype.loadData=function(a,b){this.processLoadData(a,null,b)};c.prototype.updateCurrentList=function(){this.currentList.length=0;var a=this.dataService.getList();if(a){this.applySorting(a);for(var b=0;b<a.length;b++)this.addItemToCurrentList(a[b])}};c.prototype.updateScrollItemList=function(){for(var a=this.scrollItemList.length=0,b=this.currentIndex;b<this.currentList.length&&b<this.currentIndex+this.visibleRange;b++,a++){var d=this.currentList[b];d={clickPos:{x:0,
y:0},data:d.data,index:b-this.currentIndex,inlineStyle:this.getItemInlineStyle(d),style:{},tabIndex:a};this.updateItemStyle(d);this.scrollItemList.push(d)}};c.prototype.getItemElemList=function(){return this.itemElems?this.itemElems.toArray():null};c.prototype.getItemFromComponent=function(a){return a&&a.data?a.data:this.items&&(this.updateItemList(),a=this.itemList.indexOf(a),0<=a&&a<this.items.length)?this.items[a]:null};c.prototype.updateItemList=function(){this.contentList&&(this.itemList=this.contentList.toArray())};
c.prototype.invokeEvent=function(a,b){if(this.isEnabled&&b)switch(a){case "ITEM_HOVER":this.itemHover.emit({item:b})}return!0};c.prototype.updateBlockSize=function(){this.blockSize={width:this.contentElem.nativeElement.offsetWidth,height:this.contentElem.nativeElement.offsetHeight}};c.prototype.getContentSize=function(){return this.contentElem?{width:this.contentElem.nativeElement.offsetWidth,height:this.contentElem.nativeElement.offsetHeight}:{width:0,height:0}};c.prototype.updateLayout=function(){var a=
this;a.allowUpdate&&(a.resetLayoutTimer(),a.updateTimer=setTimeout(function(){a.updateCurrentList();a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth,height:a.elemRef.nativeElement.firstElementChild.clientHeight};a.virtualMode&&a.updateScrollItemList();var b=setTimeout(function(){a.updateVisibleRange();a.virtualMode&&a.updateScrollItemList();var d=setTimeout(function(){a.updateBlockSize();var b=a.getItemElemList();a.avgItemHeight=0;if(b&&0<b.length){for(var c=0,e=0;e<b.length;e++)c+=
b[e].nativeElement.offsetHeight;a.avgItemHeight=Math.floor(c/b.length)}a.animateItemSize.height=a.avgItemHeight;a.updateScrollSize();a.refresh();a.updateComplete.emit(null);clearTimeout(d)},1);clearTimeout(b)},50);clearTimeout(a.updateTimer)},100))};c.prototype.getControlStyle=function(){var a={cursor:this.ctrlCursor,overflow:this.virtualMode?"hidden":"auto"};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};c.prototype.resetRefresh=
function(){this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=null};c.prototype.refresh=function(a){this.resetRefresh();if(0!=this.virtualMode)for(this.updateControlClass(),a=0;a<this.scrollItemList.length;a++)this.updateItemStyle(this.scrollItemList[a]);else for(this.updateItemList(),this.clearComponentSelection(),a=0;a<this.currentSelectedItems.length;a++){var b=this.getItemCurrentIndex(this.currentSelectedItems[a]);this.isComponentIndexInRange(b)&&(this.itemList[b].state|=integralui_core_1.IntegralUIObjectState.selected)}};
c.\u0275fac=function(a){return new (a||c)(i0.\u0275\u0275directiveInject(i1.IntegralUIDataService),i0.\u0275\u0275directiveInject(i2.IntegralUIDragDropService),i0.\u0275\u0275directiveInject(i0.ElementRef),i0.\u0275\u0275directiveInject(i0.Renderer2),i0.\u0275\u0275directiveInject(i3.IntegralUICommonService),i0.\u0275\u0275directiveInject(i4.IntegralUIFilterService),i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver),i0.\u0275\u0275directiveInject(i5.IntegralUIBaseService))};c.\u0275cmp=i0.\u0275\u0275defineComponent({type:c,
selectors:[["iui-listbox"]],contentQueries:function(a,b,d){a&1&&(i0.\u0275\u0275contentQuery(d,core_1.TemplateRef,!0),i0.\u0275\u0275contentQuery(d,integralui_listitem_1.IntegralUIListItem,!0),i0.\u0275\u0275contentQuery(d,integralui_core_1.IntegralUITemplate,!0));if(a&2){var c;i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.itemTemplate=c.first);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.contentList=c);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.templates=
c)}},viewQuery:function(a,b){a&1&&(i0.\u0275\u0275viewQuery(_c0,!0,core_1.ViewContainerRef),i0.\u0275\u0275viewQuery(_c0,!0,core_1.ElementRef),i0.\u0275\u0275viewQuery(_c1,!0,core_1.ElementRef));if(a&2){var d;i0.\u0275\u0275queryRefresh(d=i0.\u0275\u0275loadQuery())&&(b.contentRef=d.first);i0.\u0275\u0275queryRefresh(d=i0.\u0275\u0275loadQuery())&&(b.contentElem=d.first);i0.\u0275\u0275queryRefresh(d=i0.\u0275\u0275loadQuery())&&(b.itemElems=d)}},inputs:{allowDrag:"allowDrag",allowDrop:"allowDrop",
allowFilter:"allowFilter",allowFocus:"allowFocus",appRef:"appRef",controlStyle:"controlStyle",data:"data",enabled:"enabled",items:"items",name:"name",selectedItem:"selectedItem",selectionMode:"selectionMode",sorting:"sorting",state:"state",virtualMode:"virtualMode"},outputs:{afterSelect:"afterSelect",beforeEdit:"beforeEdit",beforeSelect:"beforeSelect",change:"change",clear:"clear",dragEnter:"dragEnter",dragDrop:"dragDrop",dragDropComplete:"dragDropComplete",dragLeave:"dragLeave",dragOver:"dragOver",
itemAdding:"itemAdding",itemAdded:"itemAdded",itemHover:"itemHover",itemRemoving:"itemRemoving",itemRemoved:"itemRemoved",keyDown:"keyDown",keyPress:"keyPress",keyUp:"keyUp",loadComplete:"loadComplete",scrollPosChanged:"scrollPosChanged",selectionChanged:"selectionChanged",updateComplete:"updateComplete"},features:[i0.\u0275\u0275ProvidersFeature([integralui_core_1.IntegralUIBaseService,integralui_data_service_1.IntegralUIDataService]),i0.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_c11,
decls:5,vars:4,consts:[[3,"ngClass","ngStyle","DOMMouseScroll","mousewheel","mouseenter","mouseleave","mousemove","dragenter","dragleave","dragover","drop","dragend","scroll"],[3,"ngSwitch"],["content",""],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"margin","0","padding","0",3,"ngStyle","touchstart","touchend"],[3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],["class","iui-listbox-block iui-listbox-block-hover",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[3,"enabled","value","max","largeChange",
"height","mouseenter","valueChanged","scrollStart","scrollEnd",4,"ngIf"],[3,"enabled","orientation","value","max","width","mouseenter","valueChanged","scrollStart","scrollEnd",4,"ngIf"],["style","background:#f5f5f5;position:absolute;right:0;bottom:0;width:16px;height:16px;",4,"ngIf"],[3,"ngClass","mouseenter","mouseleave"],["itemElem",""],["draggable","true",3,"ngClass","ngStyle","click","dblclick","contextmenu","mousedown","mousemove","mouseup","dragstart","dragover","drop"],[3,"ngClass","tabindex",
"iuiFocus","focus","blur","keydown","keypress","keyup"],[3,"iuiTemplateOutlet","iuiTemplateOutletContext"],["class","iui-listitem-animate-select-block",3,"ngStyle",4,"ngIf"],[1,"iui-listitem-animate-select-block",3,"ngStyle"],[3,"ngClass","ngStyle"],[1,"iui-listbox-block","iui-listbox-block-hover",3,"ngStyle"],[3,"ngStyle","mousemove","mouseleave"],[4,"ngFor","ngForOf"],["class","iui-listbox-block iui-listbox-block-select",3,"ngStyle",4,"ngIf"],[1,"iui-listbox-block","iui-listbox-block-select",3,
"ngStyle"],[3,"ngStyle"],[3,"enabled","value","max","largeChange","height","mouseenter","valueChanged","scrollStart","scrollEnd"],["verScroll",""],[3,"enabled","orientation","value","max","width","mouseenter","valueChanged","scrollStart","scrollEnd"],["horScroll",""],[2,"background","#f5f5f5","position","absolute","right","0","bottom","0","width","16px","height","16px"],[2,"margin","0","padding","0"]],template:function(a,b){a&1&&(i0.\u0275\u0275projectionDef(),i0.\u0275\u0275elementStart(0,"div",
0),i0.\u0275\u0275listener("DOMMouseScroll",function(a){return b.processMouseWheel(a)})("mousewheel",function(a){return b.processMouseWheel(a)})("mouseenter",function(a){return b.onCtrlMouseEnter(a)})("mouseleave",function(a){return b.onCtrlMouseLeave(a)})("mousemove",function(a){return b.onCtrlMouseMove(a)})("dragenter",function(a){return b.ctrlDragEnter(a)})("dragleave",function(a){return b.ctrlDragLeave(a)})("dragover",function(a){return b.ctrlDragOver(a)})("drop",function(a){return b.ctrlDragDrop(a)})("dragend",
function(a){return b.ctrlDragEnd(a)})("scroll",function(a){return b.onScroll(a)}),i0.\u0275\u0275elementStart(1,"span",1,2),i0.\u0275\u0275template(3,IntegralUIListBox_span_3_Template,8,10,"span",3),i0.\u0275\u0275template(4,IntegralUIListBox_span_4_Template,4,0,"span",4),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",b.getControlClass())("ngStyle",b.getControlStyle()),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngSwitch",b.virtualMode),i0.\u0275\u0275advance(2),
i0.\u0275\u0275property("ngSwitchCase",!0))},directives:[i6.NgClass,i6.NgStyle,i6.NgSwitch,i6.NgSwitchCase,i6.NgSwitchDefault,i6.NgForOf,i6.NgIf,i5.IntegralUIFocus,i5.IntegralUITemplateOutlet,i7.IntegralUIScrollBar],encapsulation:2});return c}(integralui_base_list_1.IntegralUIBaseList);exports.IntegralUIListBox=IntegralUIListBox;
(function(){i0.\u0275setClassMetadata(IntegralUIListBox,[{type:core_1.Component,args:[{selector:"iui-listbox",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()" (DOMMouseScroll)="processMouseWheel($event)" (mousewheel)="processMouseWheel($event)" (mouseenter)="onCtrlMouseEnter($event)" (mouseleave)="onCtrlMouseLeave($event)" (mousemove)="onCtrlMouseMove($event)" (dragenter)="ctrlDragEnter($event)" (dragleave)="ctrlDragLeave($event)" (dragover)="ctrlDragOver($event)" (drop)="ctrlDragDrop($event)" (dragend)="ctrlDragEnd($event)" (scroll)="onScroll($event)">\n            <span [ngSwitch]="virtualMode" #content>\n                <span *ngSwitchCase="true">\n\t                <ul (touchstart)="ctrlTouchStart($event)" (touchend)="ctrlTouchEnd($event)" style="margin:0;padding:0;" [ngStyle]="{ width: contentSize.width + \'px\', height: contentSize.height + \'px\' }">\n\t\t\t        \t<li [ngClass]="{ \'iui-listitem-animate\': allowAnimation, \'iui-listitem-animate-enter-suspended\': allowAnimation && item.data == hoverItem }" *ngFor="let item of scrollItemList; let i = index" (mouseenter)="itemMouseEnter($event, item)" (mouseleave)="itemMouseLeave($event, item)" #itemElem>\n\t\t\t\t\t        <div [ngClass]="item.style.general" (click)="itemClickEvent($event, item)" (dblclick)="itemDblClickEvent($event, item)" (contextmenu)="itemRightClickEvent($event, item)" (mousedown)="itemMouseDown($event, item)" (mousemove)="itemMouseMove($event, item)" (mouseup)="itemMouseUp($event, item)" draggable="true" (dragstart)="itemDragStart($event, item)" (dragover)="itemDragOver($event, item, i, true)" (drop)="itemDragDrop($event, item)" [ngStyle]="item.inlineStyle">\n\t\t\t\t\t            <div [ngClass]="item.style.content" tabindex="{{item.tabIndex}}" [iuiFocus]="item.data == this.currentFocusItem" (focus)="itemGotFocus(item)" (blur)="itemLostFocus(item)" (keydown)="itemKeyDown($event, item)" (keypress)="itemKeyPress($event, item)" (keyup)="itemKeyUp($event, item)">\n\t\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="itemData[0]" [iuiTemplateOutletContext]="{$implicit: (item.data)}"></span>\n\t\t\t\t\t            </div>\n\t\t\t\t\t        </div>\n\t\t\t\t\t        <span *ngIf="allowAnimation && item.isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ height: animateItemSize.height + \'px\', width: item.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-left\': item.isClicked }" [ngStyle]="{ height: animateItemSize.height + \'px\' }"></span>\n\t\t\t\t\t       </span>\n\t\t\t\t\t        <span *ngIf="allowAnimation && item.isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ left: item.clickPos.x + \'px\', height: animateItemSize.height + \'px\', width: contentSize.width - item.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-right\': item.isClicked }" [ngStyle]="{ height: animateItemSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t           </li>\n\t\t\t\t    </ul>\n\t\t\t\t\t<div *ngIf="isHoverTemplatePresent && !isUpdateActive && hoverItemObj && isContentAllowed(hoverItemObj.data, \'hover\')" class="iui-listbox-block iui-listbox-block-hover" [ngStyle]="{ left: blockHoverRect.left + \'px\', top: blockHoverRect.top + \'px\', height: blockHoverRect.height + \'px\', width: blockHoverRect.width + \'px\' }">\n\t\t\t\t\t\t<div [ngStyle]="{ height: blockHoverRect.height + \'px\' }" (mousemove)="hoverBlockMouseMove($event)" (mouseleave)="hoverBlockMouseLeave($event)">\n\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="itemHoverData[0]" [iuiTemplateOutletContext]="{$implicit: (hoverItemObj.data)}"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span *ngIf="isSelectedTemplatePresent && !isUpdateActive">\n\t\t\t\t\t\t<span *ngFor="let item of currentSelectedItems; let i = index">\n\t\t\t\t\t\t\t<div *ngIf="isContentAllowed(item, \'select\')" class="iui-listbox-block iui-listbox-block-select" [ngStyle]="getSelectBlockRect(i)">\n\t\t\t\t\t\t\t\t<div [ngStyle]="{ height: blockSelectHeight + \'px\' }">\n\t\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="itemSelectData[0]" [iuiTemplateOutletContext]="{$implicit: (item)}"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t            <iui-scrollbar *ngIf="isVerScrollVisible()" [enabled]="enabled" [value]="currentScrollPos.y" [max]="maxScrollPos.y" [largeChange]="scrollLargeChange.y" [height]="scrollBarSize.height" (mouseenter)="scrollMouseEnter($event)" (valueChanged)="onVerticalScrollChanged($event)" (scrollStart)="onVerticalScrollStart($event)" (scrollEnd)="onVerticalScrollEnd($event)" #verScroll></iui-scrollbar>\n\t\t            <iui-scrollbar *ngIf="isHorScrollVisible()" [enabled]="enabled" [orientation]="horScrollOrientation" [value]="currentScrollPos.x" [max]="maxScrollPos.x" [width]="scrollBarSize.width" (mouseenter)="scrollMouseEnter($event)" (valueChanged)="onHorizontalScrollChanged($event)" (scrollStart)="onHorizontalScrollStart($event)" (scrollEnd)="onHorizontalScrollEnd($event)" #horScroll></iui-scrollbar>\n\t\t            <div *ngIf="isVerScrollVisible() && isHorScrollVisible()" style="background:#f5f5f5;position:absolute;right:0;bottom:0;width:16px;height:16px;"></div>\n\t            </span>\n                <span *ngSwitchDefault>\n\t\t\t\t\t<ul style="margin:0;padding:0;" #content>\n\t\t\t\t\t\t<ng-content></ng-content>\n\t\t\t\t\t</ul>\n\t            </span>\n            </span>\n\t\t</div>\n\t',inputs:"allowDrag allowDrop allowFilter allowFocus appRef controlStyle data enabled items name selectedItem selectionMode sorting state virtualMode".split(" "),
outputs:"afterSelect beforeEdit beforeSelect change clear dragEnter dragDrop dragDropComplete dragLeave dragOver itemAdding itemAdded itemHover itemRemoving itemRemoved keyDown keyPress keyUp loadComplete scrollPosChanged selectionChanged updateComplete".split(" "),providers:[integralui_core_1.IntegralUIBaseService,integralui_data_service_1.IntegralUIDataService]}]}],function(){return[{type:i1.IntegralUIDataService},{type:i2.IntegralUIDragDropService},{type:i0.ElementRef},{type:i0.Renderer2},{type:i3.IntegralUICommonService},
{type:i4.IntegralUIFilterService},{type:i0.ComponentFactoryResolver},{type:i5.IntegralUIBaseService}]},{contentList:[{type:core_1.ContentChildren,args:[integralui_listitem_1.IntegralUIListItem,{descendants:!0}]}],contentRef:[{type:core_1.ViewChild,args:["content",{read:core_1.ViewContainerRef,"static":!1}]}],contentElem:[{type:core_1.ViewChild,args:["content",{read:core_1.ElementRef,"static":!1}]}],itemElems:[{type:core_1.ViewChildren,args:["itemElem",{read:core_1.ElementRef}]}],itemTemplate:[{type:core_1.ContentChild,
args:[core_1.TemplateRef,{"static":!1}]}],templates:[{type:core_1.ContentChildren,args:[integralui_core_1.IntegralUITemplate,{descendants:!0}]}]})})();