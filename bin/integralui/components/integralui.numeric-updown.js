/*
  filename: integralui.numeric-updown.js
  version : 1.3.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return e(d,a)};return function(d,a){function c(){this.constructor=d}e(d,a);d.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),forms_1=require("@angular/forms"),i0=require("@angular/core"),i1=require("../services/integralui.common.service"),i2=require("@angular/common"),_c0=["ctrlValue"],_c1=["inboundButtons"],_c2=["leftrightButtons"],_c3=["topBottomButtons"],_c4=["topBottomButtonsChild"],_c5=function(e){return{"margin-top":e}},_c6=function(e){return{width:e}};
function IntegralUINumericUpDown_span_2_Template(e,d){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"span");i0.\u0275\u0275elementStart(1,"div",4,5);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().decreaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseUp(b)});
i0.\u0275\u0275element(3,"span",6);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(4,"div",7,8);i0.\u0275\u0275text(6);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(7,"div",9);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().increaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b,!0)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseUp(b)});
i0.\u0275\u0275element(8,"span",10);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementEnd()}if(e&2){var c=i0.\u0275\u0275nextContext();i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(4,_c5,c.leftRightMarginTop+"px"));i0.\u0275\u0275advance(3);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(6,_c6,c.ctrlValueWidth+"px"));i0.\u0275\u0275advance(2);i0.\u0275\u0275textInterpolate(c.value);i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngStyle",
i0.\u0275\u0275pureFunction1(8,_c5,c.leftRightMarginTop+"px"))}}var _c7=function(e){return{"margin-left":e}};
function IntegralUINumericUpDown_span_3_Template(e,d){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"span");i0.\u0275\u0275elementStart(1,"div",11,12);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().increaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b,!0)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseUp(b)});
i0.\u0275\u0275element(3,"span",13,14);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(5,"div",15,8);i0.\u0275\u0275text(7);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(8,"div",11);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().decreaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseUp(b)});
i0.\u0275\u0275element(9,"span",16);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementEnd()}if(e&2){var c=i0.\u0275\u0275nextContext();i0.\u0275\u0275advance(3);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(3,_c7,c.topBotomMarginLeft+"px"));i0.\u0275\u0275advance(4);i0.\u0275\u0275textInterpolate(c.value);i0.\u0275\u0275advance(2);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(5,_c7,c.topBotomMarginLeft+"px"))}}
function IntegralUINumericUpDown_span_4_Template(e,d){if(e&1){var a=i0.\u0275\u0275getCurrentView();i0.\u0275\u0275elementStart(0,"span");i0.\u0275\u0275elementStart(1,"div",17,18);i0.\u0275\u0275elementStart(3,"div",19);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().increaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b,!0)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);
return i0.\u0275\u0275nextContext().onMouseUp(b)});i0.\u0275\u0275element(4,"span",20);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(5,"div",19);i0.\u0275\u0275listener("click",function(){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().decreaseValue()})("mousedown",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseDown(b)})("mouseup",function(b){i0.\u0275\u0275restoreView(a);return i0.\u0275\u0275nextContext().onMouseUp(b)});i0.\u0275\u0275element(6,
"span",21);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementStart(7,"div",22,8);i0.\u0275\u0275text(9);i0.\u0275\u0275elementEnd();i0.\u0275\u0275elementEnd()}if(e&2){var c=i0.\u0275\u0275nextContext();i0.\u0275\u0275advance(7);i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction1(2,_c6,c.ctrlValueWidth+"px"));i0.\u0275\u0275advance(2);i0.\u0275\u0275textInterpolate(c.value)}}
var IntegralUINumericUpDown=function(e){function d(a,c){var b=e.call(this,a,c)||this;b.elemRef=a;b.commonService=c;b.ctrlMaxValue=100;b.ctrlMinValue=0;b.currentStep=1;b.currentAccelerator=0;b.valueTimer=null;b.valueCount=0;b.isChangeActive=!1;b.stopTimer=!0;b.contentSize={width:0,height:0};b.ctrlValueWidth=0;b.leftRightMarginTop=0;b.topBotomMarginLeft=0;b.currentDisplayMode=integralui_core_1.IntegralUINumericDisplayMode.InBound;b.mouseWheelSpeed=integralui_core_1.IntegralUISpeedMode.Normal;b.displayModeChanged=
new core_1.EventEmitter;return b}__extends(d,e);Object.defineProperty(d.prototype,"accelerator",{get:function(){return this.currentAccelerator},set:function(a){this.currentAccelerator!=a&&(this.currentAccelerator=a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"displayMode",{get:function(){return this.currentDisplayMode},set:function(a){this.currentDisplayMode!=a&&(this.currentDisplayMode=a,this.updateLayout(),this.displayModeChanged.emit(null))},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"max",{get:function(){return this.ctrlMaxValue},set:function(a){a=Math.floor(a);this.ctrlMaxValue!=a&&(this.ctrlMaxValue=a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"min",{get:function(){return this.ctrlMinValue},set:function(a){a=Math.floor(a);this.ctrlMinValue!=a&&(this.ctrlMinValue=a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"step",{get:function(){return this.currentStep},set:function(a){this.currentStep!=a&&
(this.currentStep=a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"value",{get:function(){return Math.floor(this.currentValue)},set:function(a){a=Math.floor(a);a=Math.max(this.ctrlMinValue,Math.min(this.ctrlMaxValue,a));a!==this.currentValue&&a>=this.ctrlMinValue&&a<=this.ctrlMaxValue&&(this.currentValue=a,this.onChange(a),this.processValueChange(),this.valueChanged.emit({value:this.currentValue}))},enumerable:!0,configurable:!0});d.prototype.ngOnInit=function(){this.generalClassName=
"iui-numeric";this.contentClassName=this.generalClassName+"-content";this.initStyle()};d.prototype.ngAfterViewInit=function(){this.updateLayout()};d.prototype.ngOnDestroy=function(){this.valueTimer&&clearInterval(this.valueTimer)};d.prototype.ngAfterContentChecked=function(){1==this.autoUpdate&&(this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight},this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),
this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),this.prevClientRect.height=this.clientRect.height))};d.prototype.getContentWidth=function(){return this.contentSize.width};d.prototype.updateLayout=function(){var a=this,c=setTimeout(function(){var b=a.commonService.getPadding(a.elemRef.nativeElement.firstElementChild);a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth-(b.left+b.right),height:a.elemRef.nativeElement.firstElementChild.clientHeight-
(b.top+b.bottom)};a.contentSize={width:100>a.currentValue?Math.floor(a.clientRect.width*a.currentValue/100):a.clientRect.width,height:a.clientRect.height};b=a.commonService.getBorderWidth(a.valueElem.nativeElement);var d=a.commonService.getMargin(a.valueElem.nativeElement),e=a.commonService.getPadding(a.valueElem.nativeElement);switch(a.displayMode){case integralui_core_1.IntegralUINumericDisplayMode.LeftRight:a.leftrightButtonsElem&&(a.ctrlValueWidth=a.clientRect.width-(b.left+b.right+d.left+d.right+
e.left+e.right+2*a.leftrightButtonsElem.nativeElement.offsetWidth),a.valueElem&&(a.leftRightMarginTop=(a.valueElem.nativeElement.offsetHeight-a.leftrightButtonsElem.nativeElement.offsetHeight)/2));break;case integralui_core_1.IntegralUINumericDisplayMode.UpDown:a.topBottomButtonsChildElem&&a.valueElem&&(a.topBotomMarginLeft=(a.valueElem.nativeElement.offsetWidth-a.topBottomButtonsChildElem.nativeElement.offsetWidth)/2);break;default:a.inboundButtonsElem&&(a.ctrlValueWidth=a.clientRect.width-(b.left+
b.right+d.left+d.right+e.left+e.right+a.inboundButtonsElem.nativeElement.offsetWidth))}clearTimeout(c)},1)};d.prototype.changeValueTimerElapsed=function(a){0==this.valueCount&&(this.valueCount=1);this.valueCount+=this.currentAccelerator*this.step;this.stopTimer=!1;this.changeValue(a);this.stopTimer&&(clearInterval(this.valueTimer),this.isChangeActive=!1)};d.prototype.changeValue=function(a){a?this.value+this.valueCount<this.ctrlMaxValue?this.value+=this.valueCount:(this.stopTimer=!0,this.value=this.ctrlMaxValue):
0<this.value-this.valueCount?this.value-=this.valueCount:(this.stopTimer=!0,this.value=this.ctrlMinValue)};d.prototype.decreaseValue=function(){this.value-=this.step};d.prototype.increaseValue=function(){this.value+=this.step};d.prototype.startChange=function(a){var c=this;c.valueTimer&&clearInterval(this.valueTimer);c.valueCount=0;c.isChangeActive=!0;c.valueTimer=setInterval(function(){c.changeValueTimerElapsed(a)},100)};d.prototype.stopChange=function(){this.valueTimer&&clearInterval(this.valueTimer);
this.isChangeActive=!1};d.prototype.ctrlMouseWheel=function(a){if(this.isEnabled){a.preventDefault();var c=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),b=5;switch(this.mouseWheelSpeed){case integralui_core_1.IntegralUISpeedMode.VerySlow:b=1;break;case integralui_core_1.IntegralUISpeedMode.Slow:b=2;break;case integralui_core_1.IntegralUISpeedMode.Fast:b=10;break;case integralui_core_1.IntegralUISpeedMode.VeryFast:b=100}this.value+=this.step*b*c;a.stopPropagation()}};d.prototype.onMouseDown=function(a,
c){this.startChange(c)};d.prototype.onMouseUp=function(a){this.stopChange()};d.prototype.getControlStyle=function(){var a={};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};d.\u0275fac=function(a){return new (a||d)(i0.\u0275\u0275directiveInject(i0.ElementRef),i0.\u0275\u0275directiveInject(i1.IntegralUICommonService))};d.\u0275cmp=i0.\u0275\u0275defineComponent({type:d,selectors:[["iui-numeric-updown"]],viewQuery:function(a,
c){a&1&&(i0.\u0275\u0275viewQuery(_c0,!0),i0.\u0275\u0275viewQuery(_c1,!0),i0.\u0275\u0275viewQuery(_c2,!0),i0.\u0275\u0275viewQuery(_c3,!0),i0.\u0275\u0275viewQuery(_c4,!0));if(a&2){var b;i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(c.valueElem=b.first);i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(c.inboundButtonsElem=b.first);i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(c.leftrightButtonsElem=b.first);i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&
(c.topBottomButtonsElem=b.first);i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(c.topBottomButtonsChildElem=b.first)}},inputs:{autoUpdate:"autoUpdate",controlStyle:"controlStyle",data:"data",enabled:"enabled",name:"name",size:"size",state:"state",value:"value",accelerator:"accelerator",displayMode:"displayMode",max:"max",min:"min",mouseWheelSpeed:"mouseWheelSpeed",step:"step"},outputs:{valueChanged:"valueChanged",displayModeChanged:"displayModeChanged"},features:[i0.\u0275\u0275ProvidersFeature([{provide:forms_1.NG_VALUE_ACCESSOR,
useExisting:core_1.forwardRef(function(){return d}),multi:!0}]),i0.\u0275\u0275InheritDefinitionFeature],decls:5,vars:5,consts:[["draggable","true",3,"ngClass","ngStyle","dragstart","DOMMouseScroll","mousewheel"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"iui-numeric-leftright-buttons",2,"float","left",3,"ngStyle","click","mousedown","mouseup"],["leftrightButtons",""],[1,"iui-numeric-leftright-decrease"],[1,"iui-numeric-leftright-value",3,"ngStyle"],["ctrlValue",""],[1,"iui-numeric-leftright-buttons",
2,"float","right",3,"ngStyle","click","mousedown","mouseup"],[1,"iui-numeric-leftright-increase"],[1,"iui-numeric-updown-buttons",3,"click","mousedown","mouseup"],["topBottomButtons",""],[1,"iui-numeric-updown-increase",3,"ngStyle"],["topBottomButtonsChild",""],[1,"iui-numeric-updown-value"],[1,"iui-numeric-updown-decrease",3,"ngStyle"],[1,"iui-numeric-inbound-buttons"],["inboundButtons",""],[1,"iui-numeric-inbound-btn",3,"click","mousedown","mouseup"],[1,"iui-numeric-inbound-button-up"],[1,"iui-numeric-inbound-button-down"],
[1,"iui-numeric-inbound-value",3,"ngStyle"]],template:function(a,c){a&1&&(i0.\u0275\u0275elementStart(0,"div",0),i0.\u0275\u0275listener("dragstart",function(a){return c.preventDragStart(a)})("DOMMouseScroll",function(a){return c.ctrlMouseWheel(a)})("mousewheel",function(a){return c.ctrlMouseWheel(a)}),i0.\u0275\u0275elementStart(1,"span",1),i0.\u0275\u0275template(2,IntegralUINumericUpDown_span_2_Template,9,10,"span",2),i0.\u0275\u0275template(3,IntegralUINumericUpDown_span_3_Template,10,7,"span",
2),i0.\u0275\u0275template(4,IntegralUINumericUpDown_span_4_Template,10,4,"span",3),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",c.getControlClass())("ngStyle",c.getControlStyle()),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngSwitch",c.displayMode),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngSwitchCase",1),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngSwitchCase",2))},directives:[i2.NgClass,i2.NgStyle,i2.NgSwitch,i2.NgSwitchCase,
i2.NgSwitchDefault],encapsulation:2});return d}(integralui_core_1.IntegralUIBaseValueComponent);exports.IntegralUINumericUpDown=IntegralUINumericUpDown;
(function(){i0.\u0275setClassMetadata(IntegralUINumericUpDown,[{type:core_1.Component,args:[{selector:"iui-numeric-updown",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()" draggable="true" (dragstart)="preventDragStart($event)" (DOMMouseScroll)="ctrlMouseWheel($event)" (mousewheel)="ctrlMouseWheel($event)">\n            <span [ngSwitch]="displayMode">\n                <span *ngSwitchCase="1">\n\t\t\t\t\t<div class="iui-numeric-leftright-buttons" style="float:left" [ngStyle]="{ \'margin-top\': leftRightMarginTop + \'px\' }" (click)="decreaseValue()" (mousedown)="onMouseDown($event)" (mouseup)="onMouseUp($event)" #leftrightButtons>\n\t\t\t\t\t\t<span class="iui-numeric-leftright-decrease"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="iui-numeric-leftright-value" [ngStyle]="{ width: ctrlValueWidth + \'px\' }" #ctrlValue>{{value}}</div>\n\t\t\t\t\t<div class="iui-numeric-leftright-buttons" style="float:right" [ngStyle]="{ \'margin-top\': leftRightMarginTop + \'px\' }" (click)="increaseValue()" (mousedown)="onMouseDown($event, true)" (mouseup)="onMouseUp($event)">\n\t\t\t\t\t\t<span class="iui-numeric-leftright-increase"></span>\n\t\t\t\t\t</div>\n                </span>\n                <span *ngSwitchCase="2">\n\t\t\t\t\t<div class="iui-numeric-updown-buttons" (click)="increaseValue()" (mousedown)="onMouseDown($event, true)" (mouseup)="onMouseUp($event)" #topBottomButtons>\n\t\t\t\t\t\t<span class="iui-numeric-updown-increase" [ngStyle]="{ \'margin-left\': topBotomMarginLeft + \'px\' }" #topBottomButtonsChild></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="iui-numeric-updown-value" #ctrlValue>{{value}}</div>\n\t\t\t\t\t<div class="iui-numeric-updown-buttons" (click)="decreaseValue()" (mousedown)="onMouseDown($event)" (mouseup)="onMouseUp($event)">\n\t\t\t\t\t\t<span class="iui-numeric-updown-decrease" [ngStyle]="{ \'margin-left\': topBotomMarginLeft + \'px\' }"></span>\n\t\t\t\t\t</div>\n                </span>\n                <span *ngSwitchDefault>\n\t\t\t\t\t<div class="iui-numeric-inbound-buttons" #inboundButtons>\n\t\t\t\t\t\t<div class="iui-numeric-inbound-btn" (click)="increaseValue()" (mousedown)="onMouseDown($event, true)" (mouseup)="onMouseUp($event)">\n\t\t\t\t\t\t\t<span class="iui-numeric-inbound-button-up"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="iui-numeric-inbound-btn" (click)="decreaseValue()" (mousedown)="onMouseDown($event)" (mouseup)="onMouseUp($event)">\n\t\t\t\t\t\t\t<span class="iui-numeric-inbound-button-down"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="iui-numeric-inbound-value" [ngStyle]="{ width: ctrlValueWidth + \'px\' }" #ctrlValue>{{value}}</div>\n                </span>\n            </span>\n\t\t</div>\n\t',inputs:"autoUpdate controlStyle data enabled name size state value".split(" "),
outputs:["valueChanged"],providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return IntegralUINumericUpDown}),multi:!0}],encapsulation:core_1.ViewEncapsulation.None}]}],function(){return[{type:i0.ElementRef},{type:i1.IntegralUICommonService}]},{valueElem:[{type:core_1.ViewChild,args:["ctrlValue",{"static":!1}]}],inboundButtonsElem:[{type:core_1.ViewChild,args:["inboundButtons",{"static":!1}]}],leftrightButtonsElem:[{type:core_1.ViewChild,args:["leftrightButtons",
{"static":!1}]}],topBottomButtonsElem:[{type:core_1.ViewChild,args:["topBottomButtons",{"static":!1}]}],topBottomButtonsChildElem:[{type:core_1.ViewChild,args:["topBottomButtonsChild",{"static":!1}]}],accelerator:[{type:core_1.Input}],displayMode:[{type:core_1.Input}],max:[{type:core_1.Input}],min:[{type:core_1.Input}],mouseWheelSpeed:[{type:core_1.Input}],step:[{type:core_1.Input}],displayModeChanged:[{type:core_1.Output}]})})();