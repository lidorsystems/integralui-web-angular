/*
  filename: integralui.basegrid.js
  version : 3.2.0
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var l=function(b,a){l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c])};return l(b,a)};return function(b,a){function c(){this.constructor=b}l(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),__decorate=this&&this.__decorate||function(l,b,a,c){var e=arguments.length,d=3>e?b:null===c?c=Object.getOwnPropertyDescriptor(b,a):c,f;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(l,b,a,c);else for(var h=l.length-1;0<=h;h--)if(f=l[h])d=(3>e?f(d):3<e?f(b,a,d):f(b,a))||d;return 3<e&&d&&Object.defineProperty(b,a,d),d},__metadata=this&&this.__metadata||function(l,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(l,b)};Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),integralui_data_service_1=require("../services/integralui.data.service"),integralui_dragdrop_service_1=require("../services/integralui.dragdrop.service"),integralui_filter_service_1=require("../services/integralui.filter.service"),integralui_datepicker_1=require("./integralui.datepicker"),IntegralUIGridLines;
(function(l){l[l.None=0]="None";l[l.Horizontal=1]="Horizontal";l[l.Vertical=2]="Vertical";l[l.Both=3]="Both"})(IntegralUIGridLines=exports.IntegralUIGridLines||(exports.IntegralUIGridLines={}));
var IntegralUIBaseGrid=function(l){function b(a,c,e,b,f,h,g,k){var d=l.call(this,f)||this;d.dataService=a;d.dragDropService=c;d.elemRef=e;d.elemRenderer=b;d.commonService=f;d.filterService=h;d.changeRef=g;d.cmpResolver=k;d.animateColumnSize={width:0,height:0};d.animateRowSize={width:0,height:0};d.prevClickedObj=null;d.currentColumnList=[];d.currentLeftColumnList=[];d.currentRightColumnList=[];d.currentRowList=[];d.dataColumns=[];d.dataRows=[];d.options={};d.scrollColumnList=[];d.scrollLeftColumnList=
[];d.scrollRightColumnList=[];d.scrollRowList=[];d.scrollLeftRowList=[];d.scrollRightRowList=[];d.columnDataKey="columns";d.rowDataKey="rows";d.dropMarkElem=null;d.dragCmpRef=null;d.dragCmp=null;d.cloneElem=null;d.cloneElemStartPos={x:0,y:0};d.isCtrlDragEntered=!1;d.isFirstDragEnter=!1;d.isDragHandleVisible=!1;d.dragRowList=[];d.targetDropRow=null;d.targetDropPos=-1;d.prevTargetDropPos=-1;d.dragHandlePos={top:-9999999,left:0};d.dragHandleShiftPos={x:0,y:0};d.dragObjIndent=0;d.isDragActive=!1;d.dragStartPos=
{x:0,y:0};d.dragEndPos={x:0,y:0};d.dropListRef=null;d.dropList=null;d.calendarRef=null;d.calendar=null;d.currentEditorCell=null;d.isPopupDelayed=!1;d.isEditorFocused=!1;d.originalEditorText="";d.originalEditorValue=null;d.expandColIndex=0;d.hoverCell=null;d.hoverColumn=null;d.hoverRow=null;d.isGridHovered=!1;d.currentIndex=0;d.prevIndex=0;d.tabIndexCount=0;d.ctrlCursor="default";d.blockHoverRect={height:30,left:0,top:-9999999,width:880};d.hoverRowObj={data:{}};d.columnStartPos={x:0,y:0};d.resizeColumn=
null;d.resizeColumnIndex=-1;d.reorderColumn=null;d.columnReorderActive=!1;d.currentFocusCell=null;d.isKeyboardActive=!1;d.allowUpdate=!0;d.avgRowHeight=0;d.blockMarginTop=0;d.blockSize={width:0,height:0};d.leftBlockSize={width:0,height:0};d.rightBlockSize={width:0,height:0};d.columnPadding={top:0,right:0,bottom:0,left:0};d.currentGridLines=IntegralUIGridLines.Both;d.currentHeaderHeight=0;d.currentFooterHeight=0;d.isExpandBoxVisible=!0;d.isLayoutUpdating=!1;d.viewIndexRange={left:0,middle:999,right:999};
d.fixedLeftViewIndexRange=0;d.fixedRightViewIndexRange=0;d.visibleRange=1;d.isAutoSizeColumnsActive=!1;d.isHeaderVisible=!0;d.isFooterVisible=!0;d.isUpdateActive=!1;d.scrollSize={width:0,height:0};d.contentLeftPos=0;d.initialContentLeftPos=0;d.allColWidth=0;d.horScrollElemPos={bottom:0};d.cornerScrollElemPos={bottom:0};d.paginatorPos={top:0,left:0};d.currentPageNumber=1;d.onlyCurrentPage=!1;d.currentPageList=[];d.pageNumber=0;d.pageList=[];d.pageRowCount=0;d.paginatorHeight=0;d.originalScrollColumnList=
[];d.reorderColumnObj=null;d.reorderColumnObjPos={top:0,left:0};d.reorderColumnStartPos={top:0,left:0};d.reorderColumnCurrentPos={top:0,left:0};d.reorderColIndex=-1;d.reorderNewColIndex=-1;d.startColumnReorder=!1;d.isColumnResizing=!1;d.currentScrollPos={x:0,y:0};d.isKeyPressed=!1;d.maxScrollPos={x:0,y:0};d.accelerator=.5;d.scrollTimerID=null;d.isScrollTimerActive=!1;d.scrollCount=0;d.isScrollActive=!1;d.prevScrollPos={x:0,y:0};d.scrollBarSize={width:0,height:0};d.scrollLargeChange={x:0,y:0};d.currentSelectedColumn=
null;d.currentSelectedRow=null;d.currentSelectionMode=integralui_core_1.IntegralUISelectionMode.One;d.shiftFirstSelectedRow=null;d.removeIndex=-1;d.currentSelectedRows=[];d.isExpandBoxTouched=!1;d.touchStartPos={x:0,y:0};d.touchEndPos={x:0,y:0};d.footerHeight=0;d.headerHeight=0;d.mouseWheelSpeed=integralui_core_1.IntegralUISpeedMode.Normal;d.rowHeight=0;d.showHoverRow=!1;d.afterSelect=new core_1.EventEmitter;d.beforeEdit=new core_1.EventEmitter;d.beforeSelect=new core_1.EventEmitter;d.beforeUpdate=
new core_1.EventEmitter;d.cellClick=new core_1.EventEmitter;d.cellDblClick=new core_1.EventEmitter;d.cellHover=new core_1.EventEmitter;d.cellRightClick=new core_1.EventEmitter;d.cellValueChanging=new core_1.EventEmitter;d.cellValueChanged=new core_1.EventEmitter;d.change=new core_1.EventEmitter;d.columnAdding=new core_1.EventEmitter;d.columnAdded=new core_1.EventEmitter;d.columnClick=new core_1.EventEmitter;d.columnDblClick=new core_1.EventEmitter;d.columnHover=new core_1.EventEmitter;d.columnRightClick=
new core_1.EventEmitter;d.columnOrderChanged=new core_1.EventEmitter;d.columnRemoving=new core_1.EventEmitter;d.columnRemoved=new core_1.EventEmitter;d.columnsCleared=new core_1.EventEmitter;d.columnSizeChanged=new core_1.EventEmitter;d.dragEnd=new core_1.EventEmitter;d.dragEnter=new core_1.EventEmitter;d.dragDrop=new core_1.EventEmitter;d.dragDropComplete=new core_1.EventEmitter;d.dragLeave=new core_1.EventEmitter;d.dragOver=new core_1.EventEmitter;d.dragStart=new core_1.EventEmitter;d.keyDown=new core_1.EventEmitter;
d.keyPress=new core_1.EventEmitter;d.keyUp=new core_1.EventEmitter;d.pageChanged=new core_1.EventEmitter;d.rowAdding=new core_1.EventEmitter;d.rowAdded=new core_1.EventEmitter;d.rowClick=new core_1.EventEmitter;d.rowDblClick=new core_1.EventEmitter;d.rowHover=new core_1.EventEmitter;d.rowRemoving=new core_1.EventEmitter;d.rowRemoved=new core_1.EventEmitter;d.rowRightClick=new core_1.EventEmitter;d.rowsCleared=new core_1.EventEmitter;d.loadComplete=new core_1.EventEmitter;d.scrollPosChanged=new core_1.EventEmitter;
d.selectionChanged=new core_1.EventEmitter;d.updateComplete=new core_1.EventEmitter;d.dragGhost=null;d.dragMode=integralui_core_1.IntegralUIDragDropDisplayMode.Popup;d.emptyRowObj={cells:[],draggable:!1,isEmpty:!0,status:1,style:{}};d.sortColumn=null;d.sortComparer=null;d.updateOptions();return d}__extends(b,l);Object.defineProperty(b.prototype,"allowColumnReorder",{set:function(a){this.options.allowColumnReorder=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"allowDrag",{set:function(a){this.options.allowDrag=
a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"allowDrop",{set:function(a){this.options.allowDrop=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"allowFilter",{set:function(a){this.options.allowFilter=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"allowFocus",{set:function(a){this.options.allowFocus=a;a||(this.currentFocusCell=null);this.refresh()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"autoSizeColumns",
{get:function(){return this.isAutoSizeColumnsActive},set:function(a){this.isAutoSizeColumnsActive!=a&&(this.isAutoSizeColumnsActive=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"columns",{get:function(){return this.dataColumns},set:function(a){this.dataColumns=a;this.updateData()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dataFields",{set:function(a){this.updateDataFields(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"focusedCell",{get:function(){return this.currentFocusCell?this.currentFocusCell.data:null},set:function(a){this.currentFocusCell!=a&&this.updateFocusCell(this.getObjFromCell(a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"gridLines",{get:function(){return this.currentGridLines},set:function(a){this.currentGridLines!=a&&(this.currentGridLines=a,this.refresh())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"paging",{set:function(a){this.updatePaging(a);
this.resetPageNumber();this.updateCurrentLayout()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rows",{get:function(){return this.dataRows},set:function(a){this.dataRows=a;this.updateData()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectedColumn",{get:function(){return this.currentSelectedColumn},set:function(a){this.currentSelectedColumn!=a&&this.processColumnSelection(null,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectedRow",
{get:function(){return this.currentSelectedRow},set:function(a){this.currentSelectedRow!=a&&this.processRowSelection(null,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectionMode",{get:function(){return this.currentSelectionMode},set:function(a){this.currentSelectionMode!=a&&(this.currentSelectionMode=a,this.clearPrevSelection(this.currentSelectionMode!=integralui_core_1.IntegralUISelectionMode.None?this.currentSelectedRow:null),this.refresh(),this.currentSelectionMode==
integralui_core_1.IntegralUISelectionMode.None&&(this.currentSelectedRow=null,this.selectionChanged.emit(null)))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showExpandBox",{get:function(){return this.isExpandBoxVisible},set:function(a){this.isExpandBoxVisible!=a&&(this.isExpandBoxVisible=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showScroll",{get:function(){return this.options.showScroll},set:function(a){this.updateShowScroll(a)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sorting",{set:function(a){this.options.sorting=a},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.dataService.init([{data:this.columns,fields:this.options.columnFields,key:this.columnDataKey},{data:this.rows,fields:this.options.rowFields,key:this.rowDataKey}])};b.prototype.addColumn=function(a){this.callEventAddColumn("add",a)};b.prototype.clearColumns=function(){this.dataService.clear(null,this.columnDataKey);
this.columnsCleared.emit(null);this.currentScrollPos.x=0};b.prototype.insertColumnAt=function(a,c){this.callEventAddColumn("at",a,c)};b.prototype.insertColumnBefore=function(a,c){this.callEventAddColumn("ref",a,-1,c)};b.prototype.insertColumnAfter=function(a,c){this.callEventAddColumn("ref",a,-1,c,!0)};b.prototype.removeColumn=function(a){return this.callEventRemoveColumn(a)};b.prototype.removeColumnAt=function(a){return this.callEventRemoveColumn(null,a)};b.prototype.callEventAddColumn=function(a,
c,e,d,b){var f={cancel:!1,column:c};this.columnAdding.emit(f);if(1!=f.cancel){switch(a){case "at":this.dataService.insert(c,e,null,null,!1,this.columnDataKey);break;case "ref":this.dataService.insertByRef(c,d,b,this.columnDataKey);break;default:this.dataService.insert(c,-1,null,null,!1,this.columnDataKey)}this.columnAdded.emit({column:c})}};b.prototype.callEventRemoveColumn=function(a,c){var e={cancel:!1,column:a};this.columnRemoving.emit(e);return 1!=e.cancel&&(this.removeIndex=this.columns?this.columns.indexOf(a):
-1,e=this.dataService.removeAt(a,c,null,this.columnDataKey),e.result)?(this.columnRemoved.emit({column:e.obj}),!0):!1};b.prototype.addRow=function(a,c){this.callEventAddRow("add",a,-1,c)};b.prototype.clearRows=function(a){this.dataService.clear(a,this.rowDataKey);this.rowsCleared.emit({parent:a});this.clearSelection();this.currentScrollPos.y=0};b.prototype.insertRowAt=function(a,c,e){this.callEventAddRow("at",a,c,e)};b.prototype.insertRowBefore=function(a,c){this.callEventAddRow("ref",a,-1,null,c)};
b.prototype.insertRowAfter=function(a,c){this.callEventAddRow("ref",a,-1,null,c,!0)};b.prototype.removeRow=function(a){return this.callEventRemoveRow(a)};b.prototype.removeRowAt=function(a,c){return this.callEventRemoveRow(null,a,c)};b.prototype.callEventAddRow=function(a,c,e,d,b,h){var f={cancel:!1,row:c};this.rowAdding.emit(f);if(1!=f.cancel){switch(a){case "at":this.dataService.insert(c,e,d,null,!1,this.rowDataKey);break;case "ref":this.dataService.insertByRef(c,b,h,this.rowDataKey);break;default:this.dataService.insert(c,
-1,d,null,!1,this.rowDataKey)}this.rowAdded.emit({row:c})}};b.prototype.callEventRemoveRow=function(a,c,e){var d={cancel:!1,row:a};this.rowRemoving.emit(d);return 1!=d.cancel&&(this.removeIndex=this.rows?this.rows.indexOf(a):-1,a=this.dataService.removeAt(a,c,e,this.rowDataKey),a.result)?(this.rowRemoved.emit({row:a.obj}),!0):!1};b.prototype.cellClickEvent=function(a,c){this.isEnabled&&1==a.which&&this.cellClick.emit({cell:c.data,event:a})};b.prototype.cellDblClickEvent=function(a,c){this.isEnabled&&
1==a.which&&this.cellDblClick.emit({cell:c.data,event:a})};b.prototype.cellRightClickEvent=function(a,c){this.isEnabled&&this.cellRightClick.emit({cell:c.data,event:a})};b.prototype.columnClickEvent=function(a,c){var e=this;if(e.isEnabled&&1==a.which)if(e.allowAnimation)var d=setTimeout(function(){e.columnClick.emit({column:c.data,event:a});clearTimeout(d)},250);else e.columnClick.emit({column:c.data,event:a})};b.prototype.columnDblClickEvent=function(a,c){this.isEnabled&&1==a.which&&this.columnDblClick.emit({column:c.data,
event:a})};b.prototype.columnRightClickEvent=function(a,c){this.isEnabled&&this.columnRightClick.emit({column:c.data,event:a})};b.prototype.rowClickEvent=function(a,c){this.isEnabled&&1==a.which&&this.rowClick.emit({event:a,row:c.data})};b.prototype.rowDblClickEvent=function(a,c){if(this.isEnabled&&1==a.which){var e={cancel:!1,event:a,row:c.data};this.rowDblClick.emit(e);1!=e.cancel&&this.toggle(c.data)}};b.prototype.rowRightClickEvent=function(a,c){this.isEnabled&&this.rowRightClick.emit({event:a,
row:c.data})};b.prototype.updateData=function(){};b.prototype.updateDataFields=function(a){a?(this.updateColumnFields(a.column),this.updateRowFields(a.row),this.updateCellFields(a.cell)):(this.updateColumnFields(),this.updateRowFields(),this.updateCellFields())};b.prototype.updateOptions=function(a){a?(this.options={allowAnimation:this.commonService.isFieldAvailable(a.allowAnimation,!0),allowCellFocus:this.commonService.isFieldAvailable(a.allowCellFocus,!0),allowColumnReorder:this.commonService.isFieldAvailable(a.allowColumnReorder,
!1),allowDrag:this.commonService.isFieldAvailable(a.allowDrag,!1),allowDrop:this.commonService.isFieldAvailable(a.allowDrop,!0),allowFilter:this.commonService.isFieldAvailable(a.allowFilter,!1),allowFocus:this.commonService.isFieldAvailable(a.allowFocus,!1),animationSpeed:200,autoExpand:this.commonService.isFieldAvailable(a.autoExpand,!0),displayMode:this.commonService.isFieldAvailable(a.displayMode,"normal"),editorSettings:{activate:"click"},enabled:this.commonService.isFieldAvailable(a.enabled,
!0),expandColIndex:this.commonService.isFieldAvailable(a.expandColIndex,void 0!=this.options.expandColIndex?this.options.expandColIndex:0),fillSpace:this.commonService.isFieldAvailable(a.fillSpace,!1),gridLines:this.commonService.isFieldAvailable(a.gridLines,"both"),hoverSelection:this.commonService.isFieldAvailable(a.hoverSelection,!1),indent:this.commonService.isFieldAvailable(a.indent,15),labelEdit:this.commonService.isFieldAvailable(a.labelEdit,!1),loadRows:[],mouseWheelSpeed:this.commonService.isFieldAvailable(a.mouseWheelSpeed,
"normal"),pathSeparator:this.commonService.isFieldAvailable(a.pathSeparator,"\\"),rowHeight:this.commonService.isFieldAvailable(a.rowHeight,-1),rtl:this.commonService.isFieldAvailable(a.rtl,!1),selectedColumn:this.commonService.isFieldAvailable(a.selectedColumn,this.currentSelectedColumn?this.currentSelectedColumn:null),selectedIndex:-1,selectedRow:this.commonService.isFieldAvailable(a.selectedRow,this.currentSelectedRow?this.currentSelectedRow:null),selectedRows:[],selectionMode:this.commonService.isFieldAvailable(a.selectionMode,
integralui_core_1.IntegralUISelectionMode.One),showFooter:this.commonService.isFieldAvailable(a.showFooter,!0),showHeader:this.commonService.isFieldAvailable(a.showHeader,!0),showIcons:this.commonService.isFieldAvailable(a.showIcons,!0),sorting:this.commonService.isFieldAvailable(a.sorting,integralui_core_1.IntegralUISortOrder.None)},this.updatePaging(a.paging),this.updateDataFields(a.dataFields),this.updateShowScroll(a.showScroll)):(this.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,
allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!1,animationSpeed:200,autoExpand:!0,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,selectedRow:null,selectedRows:[],selectionMode:integralui_core_1.IntegralUISelectionMode.One,showFooter:!0,showHeader:!0,showIcons:!0,sorting:integralui_core_1.IntegralUISortOrder.None},
this.updatePaging(),this.updateDataFields(),this.updateShowScroll())};b.prototype.updateColumnFields=function(a){this.options.columnFields=a?{aggregation:a.aggregation?a.aggregation:"aggregation",allowDrag:a.allowDrag?a.allowDrag:"allowDrag",allowDrop:a.allowDrop?a.allowDrop:"allowDrop",allowFilter:a.allowFilter?a.allowFilter:"allowFilter",allowGrouping:a.allowGrouping?a.allowGrouping:"allowGrouping",allowResize:a.allowResize?a.allowResize:"allowResize",canSelect:a.canSelect?a.canSelect:"canSelect",
cellTemplateUrl:a.cellTemplateUrl?a.cellTemplateUrl:"cellTemplateUrl",comparer:a.comparer?a.comparer:"comparer",contentAlignment:a.contentAlignment?a.contentAlignment:"contentAlignment",contextMenu:a.contextMenu?a.contextMenu:"contextMenu",editorType:a.editorType?a.editorType:"editorType",editorSettings:a.editorSettings?a.editorSettings:"editorSettings",editorTemplate:a.editorTemplate?a.editorTemplate:"editorTemplate",filterParams:a.filterParams?a.filterParams:"filterParams",filterTemplate:a.filterTemplate?
a.filterTemplate:"filterTemplate",fixed:a.fixed?a.fixed:"fixed",fixedWidth:a.fixedWidth?a.fixedWidth:"fixedWidth",footerAlignment:a.footerAlignment?a.footerAlignment:"footerAlignment",footerContent:a.footerContent?a.footerContent:"footerContent",footerTemplate:a.footerTemplate?a.footerTemplate:"footerTemplate",footerTemplateModel:a.footerTemplateModel?a.footerTemplateModel:"footerTemplateModel",footerText:a.footerText?a.footerText:"footerText",footerTooltip:a.footerTooltip?a.footerTooltip:"footerTooltip",
groupText:a.groupText?a.groupText:"groupText",headerAlignment:a.headerAlignment?a.headerAlignment:"headerAlignment",headerContent:a.headerContent?a.headerContent:"headerContent",headerTemplate:a.headerTemplate?a.headerTemplate:"headerTemplate",headerTemplateModel:a.headerTemplateModel?a.headerTemplateModel:"headerTemplateModel",headerText:a.headerText?a.headerText:"headerText",headerTooltip:a.headerTooltip?a.headerTooltip:"headerTooltip",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",minWidth:a.minWidth?
a.minWidth:"minWidth",maxWidth:a.maxWidth?a.maxWidth:"maxWidth",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",templateSettings:a.templateSettings?a.templateSettings:"templateSettings",visible:a.visible?a.visible:"visible",width:a.width?a.width:"width"}:{aggregation:"aggregation",allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",allowGrouping:"allowGrouping",allowResize:"allowResize",canSelect:"canSelect",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",
contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",footerTemplateModel:"footerTemplateModel",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerText:"footerText",footerTooltip:"footerTooltip",groupText:"groupText",headerAlignment:"headerAlignment",headerContent:"headerContent",
headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};this.dataService&&this.dataService.updateDataFields(this.options.columnFields,this.columnDataKey)};b.prototype.updateRowFields=function(a){this.options.rowFields=a?{allowDrag:a.allowDrag?a.allowDrag:"allowDrag",
allowDrop:a.allowDrop?a.allowDrop:"allowDrop",allowEdit:a.allowEdit?a.allowEdit:"allowEdit",allowFocus:a.allowFocus?a.allowFocus:"allowFocus",autoCheck:a.autoCheck?a.autoCheck:"autoCheck",canSelect:a.canSelect?a.canSelect:"canSelect",cells:a.cells?a.cells:"cells",checkBoxSettings:a.checkBoxSettings?a.checkBoxSettings:"checkBoxSettings",checked:a.checked?a.checked:"checked",checkState:a.checkState?a.checkState:"checkState",content:a.content?a.content:"content",contextMenu:a.contextMenu?a.contextMenu:
"contextMenu",gid:a.gid?a.gid:"gid",enabled:a.enabled?a.enabled:"enabled",expanded:a.expanded?a.expanded:"expanded",fixed:a.fixed?a.fixed:"fixed",hasChildren:a.hasChildren?a.hasChildren:"hasChildren",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",objects:a.rows?a.rows:"rows",pid:a.pid?a.pid:"pid",rows:a.rows?a.rows:"rows",selected:a.selected?a.selected:"selected",statusIcon:a.statusIcon?a.statusIcon:"statusIcon",style:a.style?a.style:"style",subobjects:a.cells?a.cells:"cells",templateObj:a.templateObj?
a.templateObj:"templateObj",text:a.text?a.text:"text",tooltip:a.tooltip?a.tooltip:"tooltip",value:a.value?a.value:"value",visible:a.visible?a.visible:"visible"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",canSelect:"canSelect",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",gid:"gid",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",
subobjects:"cells",text:"text",tooltip:"tooltip",value:"value",visible:"visible"};this.dataService&&this.dataService.updateDataFields(this.options.rowFields,this.rowDataKey)};b.prototype.updateCellFields=function(a){this.options.cellFields=a?{allowDrag:a.allowDrag?a.allowDrag:"allowDrag",allowEdit:a.allowEdit?a.allowEdit:"allowEdit",cid:a.cid?a.cid:"cid",content:a.content?a.content:"content",contextMenu:a.contextMenu?a.contextMenu:"contextMenu",editorSettings:a.editorSettings?a.editorSettings:"editorSettings",
enabled:a.enabled?a.enabled:"enabled",expanded:a.expanded?a.expanded:"expanded",isGroup:a.isGroup?a.isGroup:"isGroup",labelEdit:a.labelEdit?a.labelEdit:"labelEdit",rid:a.rid?a.rid:"rid",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",tag:a.tag?a.tag:"tag",templateObj:a.templateObj?a.templateObj:"templateObj",text:a.text?a.text:"text",tooltip:a.tooltip?a.tooltip:"tooltip",value:a.value?a.value:"value",valueID:a.valueID?a.valueID:"valueID",valueType:a.valueType?a.valueType:"valueType"}:
{allowDrag:"allowDrag",allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",editorSettings:"editorSettings",enabled:"enabled",expanded:"expanded",isGroup:"isGroup",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",tag:"tag",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value",valueID:"valueID",valueType:"valueType"}};b.prototype.updateShowScroll=function(a){this.options.showScroll=a?{horizontal:this.commonService.isFieldAvailable(a.horizontal,
!0),vertical:this.commonService.isFieldAvailable(a.vertical,!0)}:{horizontal:!0,vertical:!0}};b.prototype.processLoadData=function(a,c,e,d){var b=this;b.clearRows(c);b.updateRowFields(e);var h=[];if(a)if(d||void 0==d){var g=[];a.forEach(function(a,c){var e=a[b.options.rowFields.pid];g[e]?(g[e][b.options.rowFields.rows]||(g[e][b.options.rowFields.rows]=[]),g[a[b.options.rowFields.id]]=a,g[e][b.options.rowFields.rows].push(a)):(g[a[b.options.rowFields.id]]=a,h.push(a))});g.length=0}else h=a;if(c)for(c[b.options.rowFields.rows]=
h,a=0;a<c[b.options.rowFields.rows].length;a++)c[b.options.rowFields.rows][a][b.options.rowFields.pid]=c[b.options.rowFields.id];else if(b.rows)for(a=b.rows.length=0;a<h.length;a++)b.rows.push(h[a]);b.loadComplete.emit(null);this.updateLayout()};b.prototype.createScrollRowList=function(){this.createScrollNormalRowList();this.createScrollLeftRowList();this.createScrollRightRowList()};b.prototype.createScrollNormalRowList=function(){for(var a=this.scrollRowList.length=0;100>a;a++){var c=this.createEmptyRowObj();
this.scrollRowList.push(c)}};b.prototype.createScrollLeftRowList=function(){for(var a=this.scrollLeftRowList.length=0;100>a;a++){var c=this.createEmptyRowObj();this.scrollLeftRowList.push(c)}};b.prototype.createScrollRightRowList=function(){for(var a=this.scrollRightRowList.length=0;100>a;a++){var c=this.createEmptyRowObj();this.scrollRightRowList.push(c)}};b.prototype.createEmptyRowObj=function(){for(var a={clickPos:{x:0,y:0},cells:[],data:{},draggable:!1,indent:0,inlineStyle:{},isEmpty:!0,isGroup:!1,
style:{}},c=0;1>c;c++)a.cells.push(this.createEmptyCellObj());return a};b.prototype.createEmptyCellObj=function(){return{align:"",colIndex:-1,data:{},display:"none",editorClass:"",editorList:[],editorSettings:{},editorStyle:"",editorType:null,editorValue:null,expandBoxAllowed:!1,indent:0,inlineStyle:{},isEditorEnabled:!0,isEditorVisible:!0,isEmpty:!0,rowIndex:-1,style:{content:"iui-grid-row-cell-content"},tabIndex:-1,width:100,height:"auto"}};b.prototype.updateScrollRowListLimit=function(a){this.updateScrollNormalRowListLimit(a);
this.updateScrollLeftRowListLimit(a);this.updateScrollRightRowListLimit(a)};b.prototype.updateScrollNormalRowListLimit=function(a){for(var c=0;c<this.scrollRowList.length;c++)for(var e=0;e<a;e++)this.scrollRowList[c].cells.push(this.createEmptyCellObj())};b.prototype.updateScrollLeftRowListLimit=function(a){for(var c=0;c<this.scrollLeftRowList.length;c++)for(var e=0;e<a;e++)this.scrollLeftRowList[c].cells.push(this.createEmptyCellObj())};b.prototype.updateScrollRightRowListLimit=function(a){for(var c=
0;c<this.scrollRightRowList.length;c++)for(var e=0;e<a;e++)this.scrollRightRowList[c].cells.push(this.createEmptyCellObj())};b.prototype.getNumScrollColumns=function(a){switch(a){case "left":return 0<this.scrollLeftRowList.length?this.scrollLeftRowList[0].cells.length:0;case "right":return 0<this.scrollRightRowList.length?this.scrollRightRowList[0].cells.length:0}return 0<this.scrollRowList.length?this.scrollRowList[0].cells.length:0};b.prototype.resetRowObj=function(a){a&&(a.clickPos={x:0,y:0},a.data=
{},a.draggable=!1,a.indent=0,a.inlineStyle={},a.isEmpty=!0,a.isGroup=!1,a.style={})};b.prototype.resetCellObj=function(a){a&&(a.align="",a.colIndex=-1,a.data={},a.display="none",a.editorClass="",a.editorList=[],a.editorSettings={},a.editorStyle="",a.editorType=null,a.editorValue=null,a.expandBoxAllowed=!1,a.indent=0,a.inlineStyle={},a.isEditorEnabled=!0,a.isEditorVisible=!0,a.isEmpty=!0,a.rowIndex=-1,a.style={content:"iui-grid-row-cell-content"},a.tabIndex=-1,a.width=0,a.height="auto")};b.prototype.updateScrollColumnList=
function(){};b.prototype.updateScrollRowList=function(a){};b.prototype.addDropMark=function(a){this.appRef&&(this.removeDropMark(),a=this.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUIDragWindow))&&(this.dragCmpRef=this.appRef.createComponent(a),this.dragCmpRef._component?this.dragCmp=this.dragCmpRef._component:this.dragCmpRef._hostElement&&(this.dragCmp=this.dragCmpRef._hostElement.component))};b.prototype.removeDropMark=function(){this.dragCmpRef&&this.dragCmpRef.destroy();this.dragCmp=
null};b.prototype.callDragDropEvent=function(a,c,e){var d=this;c={action:c.action,cancel:!1,dragRow:c.source,dropPos:c.dropPos,event:a,isDropAllowed:c.allow,mousePos:this.commonService.getMousePos(a),resume:function(){d.drop(a,d.dragDropService.getData());d.dragDropService.clearData()},sourceCtrl:c.sourceCtrl,targetCtrl:c.targetCtrl,targetRow:c.target};e?this.dragDrop.emit(c):this.dragOver.emit(c);return c};b.prototype.checkEmptySpace=function(a){var c=this.getContentSize(),e=this.commonService.getPageRect(this.elemRef.nativeElement.firstElementChild);
c=e.top+c.height;e=e.bottom;a=this.commonService.getMousePos(a);var d=this.commonService.getShiftPos();a.x-=d.x;a.y-=d.y;return a.y>=c&&a.y<=e};b.prototype.ctrlDragEnter=function(a){this.isEnabled&&this.processDragEnter(a)};b.prototype.ctrlDragDrop=function(a){this.isEnabled&&this.processDragDrop(a);this.removeDropMark();a.stopPropagation()};b.prototype.ctrlDragLeave=function(a){this.isEnabled&&this.processDragLeave(a)};b.prototype.ctrlDragOver=function(a){this.isEnabled&&this.processDragOver(a);
a.stopPropagation()};b.prototype.ctrlDragEnd=function(a){this.removeDropMark();var c=this.dragDropService.getData();c.targetCtrl&&c.targetCtrl.removeDropMark&&c.targetCtrl.removeDropMark();this.rowDragEnd(a,null)};b.prototype.removeDragHandle=function(){this.isDragHandleVisible=!1;this.targetDropRow=null;this.targetDropPos=-1};b.prototype.dropMark=function(a,c){if(this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle)c||this.removeDragHandle(),this.updateScrollRowListDragOver(null);
else if(this.dragCmp||this.isScrollTimerActive||this.addDropMark({x:a.pageX,y:a.pageY}),this.dragCmp){var e="none";this.options.allowDrop&&(e=c?"block":"none");this.dragCmp.display=e}};b.prototype.updateDragComponent=function(a){this.dragCmp&&this.dragCmp.updatePos(a)};b.prototype.isDragAllowed=function(a){return this.options.allowDrag?a&&(a[this.options.rowFields.allowDrag]||void 0===a[this.options.rowFields.allowDrag])?!0:!1:!1};b.prototype.isDropAllowed=function(a,c,e){var d=this.options.allowDrop;
if(d&&a&&c&&(d=c[this.options.rowFields.allowDrop]||void 0===c[this.options.rowFields.allowDrop]?!0:!1))if(Array.isArray(a))for(var b=0;b<a.length;b++){if(this.commonService.isEqual(a[b][this.options.rowFields.id],c[this.options.rowFields.id])||0===e&&this.isParentOf(c,a[b])||this.isChildOf(c,a[b])){d=!1;break}if(!d)break}else if(this.commonService.isEqual(a[this.options.rowFields.id],c[this.options.rowFields.id])||0===e&&this.isParentOf(c,a)||this.isChildOf(c,a))d=!1;return d};b.prototype.processDragStart=
function(a,c){this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle?this.processDragStartHandle(a,c):this.processDragStartPopup(a,c)};b.prototype.processDragStartHandle=function(a,c){this.dragDropService.clearData();if(!this.isDragAllowed(c))a.preventDefault();else if(c)if(this.isDragAllowed(c)){var e={clone:this.cloneRow(c),handle:this.dragRowList,source:c,sourceCtrl:this,sourceData:this.rows};switch(this.selectionMode){case integralui_core_1.IntegralUISelectionMode.MultiSimple:e.clone=
this.createCloneList(this.currentSelectedRows);e.source=this.currentSelectedRows;break;case integralui_core_1.IntegralUISelectionMode.MultiExtended:e.clone=this.createCloneList(this.currentSelectedRows),e.source=this.currentSelectedRows}var d={action:a.shiftKey?"copy":"move",cancel:!1,dragRow:e.source,dropPos:-1,event:a,isDropAllowed:this.options.allowDrop,mousePos:this.commonService.getMousePos(a),sourceCtrl:e.sourceCtrl,targetCtrl:this,targetRow:null};this.dragStart.emit(d);1==d.cancel?a.preventDefault():
(this.isFirstDragEnter=!0,this.dragDropService.setData(e))}else this.ctrlCursor="no-drop"};b.prototype.processDragStartPopup=function(a,c){this.dragDropService.clearData();if(!this.isDragAllowed(c))a.preventDefault();else if(c)if(this.isDragAllowed(c)){var e={clone:this.cloneRow(c),source:c,sourceCtrl:this,sourceData:this.rows};switch(this.selectionMode){case integralui_core_1.IntegralUISelectionMode.MultiSimple:e.clone=this.createCloneList(this.currentSelectedRows);e.source=this.currentSelectedRows;
break;case integralui_core_1.IntegralUISelectionMode.MultiExtended:e.clone=this.createCloneList(this.currentSelectedRows),e.source=this.currentSelectedRows}var d={action:a.shiftKey?"copy":"move",cancel:!1,dragRow:e.source,dropPos:-1,event:a,isDropAllowed:this.options.allowDrop,mousePos:this.commonService.getMousePos(a),sourceCtrl:e.sourceCtrl,targetCtrl:this,targetRow:null};this.dragStart.emit(d);1==d.cancel?a.preventDefault():(this.isFirstDragEnter=this.isDragActive=!0,this.addDropMark({x:a.pageX,
y:a.pageY}),this.dropMark(a),a.dataTransfer?(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text",c[this.options.rowFields.id]?c[this.options.rowFields.id].toString():"")):a.originalEvent&&a.originalEvent.dataTransfer&&(a.originalEvent.dataTransfer.effectAllowed="move",a.originalEvent.dataTransfer.setData("text",c[this.options.rowFields.id]?c[this.options.rowFields.id].toString():"")),this.dragDropService.setData(e))}else a.dataTransfer?a.dataTransfer.effectAllowed="none":a.originalEvent&&
a.originalEvent.dataTransfer&&(a.originalEvent.dataTransfer.effectAllowed="none")};b.prototype.processDragEnter=function(a){a.preventDefault();if(!this.isCtrlDragEntered){this.isCtrlDragEntered=!0;var c=this.dragDropService.getData();if(!this.isFirstDragEnter&&this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle&&(this.dragRowList=c.handle)){for(var e=0;e<this.dragRowList.length;e++){var d=this.getObjIndexFromScrollList(this.dragRowList[e].data);0<=d&&this.scrollRowList.splice(d,
1)}this.isDragHandleVisible=!0;this.targetDropPos=2;this.targetDropRow=0<this.scrollRowList.length?this.scrollRowList[this.scrollRowList.length-1].data:null;this.scrollRowList.splice(this.scrollRowList.length,0,{cells:[],draggable:!1,isEmpty:!0,status:1,style:{}})}this.isFirstDragEnter=!1;a={action:a.shiftKey?"copy":"move",dragRow:c.source,dropPos:-1,event:a,isDropAllowed:this.options.allowDrop,mousePos:this.commonService.getMousePos(a),sourceCtrl:c.sourceCtrl,targetCtrl:this,targetRow:null};this.dragEnter.emit(a)}};
b.prototype.processDragLeave=function(a){a.preventDefault();if(this.isCtrlDragEntered){var c=this.commonService.getPageRect(this.elemRef.nativeElement.firstElementChild),e=this.commonService.getMousePos(a),d=this.commonService.getShiftPos();e.x-=d.x;e.y-=d.y;if(e.x<=c.left||e.x>=c.right||e.y<=c.top||e.y>=c.bottom)this.isCtrlDragEntered=!1,this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle&&this.updateScrollRowList(),this.stopScrollTimer(),c=this.dragDropService.getData(),c={action:a.shiftKey?
"copy":"move",dragRow:c.source,dropPos:-1,event:a,isDropAllowed:!1,mousePos:this.commonService.getMousePos(a),sourceCtrl:c.sourceCtrl,targetCtrl:null,targetRow:null},this.dragLeave.emit(c);this.dropMark(a)}};b.prototype.processDragOver=function(a,c,e,d,b){this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle?this.processDragOverHandle(a,c,e,d,b):this.processDragOverPopup(a,c,e,d,b)};b.prototype.processDragOverHandle=function(a,c,e,d,b){a.preventDefault();this.processDragEnter(a);this.hoverRow=
null;this.changeCursor();var f=this.isDragActive;if(f)if(b=this.dragDropService.getData(),f=this.commonService.getShiftPos(),c&&!c.isEmpty){var g=this.commonService.getMousePos(a);g.x-=f.x;g.y-=f.y;e=this.dragDropService.getDropPos(g,e,d,"group"==c.data.type?"full":null);f=this.isDropAllowed(b.source,c.data,e);d=this.callDragDropEvent(a,{action:a.shiftKey?"copy":"move",source:b.source,dropPos:e,allow:f,sourceCtrl:b.sourceCtrl,target:c.data,targetCtrl:this});f&&1!=d.cancel?(this.isDragHandleVisible=
!0,this.dragRowList=b.handle,this.targetDropPos=e,this.updateScrollRowListDragOver(c.data),this.dragObjIndent=this.getObjFromRow(c.data).indent,c.data[this.options.rowFields.rows]&&0<c.data[this.options.rowFields.rows].length&&(this.dragObjIndent+=this.options.indent),this.updateDragHandlePos(a),this.dragDropService.setData({action:a.shiftKey?"copy":"move",clone:b.clone,handle:b.handle,source:b.source,sourceCtrl:b.sourceCtrl,sourceData:b.sourceData,target:c.data,targetCtrl:this,dropPos:e})):(this.ctrlCursor=
"no-drop",this.dropMark(a,!0),this.targetDropPos=-1,this.updateScrollRowListDragOver(c.data),this.updateDragHandlePos(a))}else this.options.allowDrop?(this.dragRowList=b.handle,this.updateDragHandlePos(a)):(this.ctrlCursor="no-drop",this.dropMark(a))};b.prototype.processDragOverPopup=function(a,c,e,d,b){a.preventDefault();this.processDragEnter(a);var f=!0;a.dataTransfer?f="none"===a.dataTransfer.effectAllowed?!1:!0:a.originalEvent&&a.originalEvent.dataTransfer&&(f="none"===a.originalEvent.dataTransfer.effectAllowed?
!1:!0);if(f)if(b=this.dragDropService.getData(),f=this.commonService.getShiftPos(),c&&!c.isEmpty){var g=this.commonService.getMousePos(a);g.x-=f.x;g.y-=f.y;g=this.dragDropService.getDropPos(g,e,d,"group"==c.data.type?"full":null);f=this.isDropAllowed(b.source,c.data,g);g={action:a.shiftKey?"copy":"move",source:b.source,dropPos:g,allow:f,sourceCtrl:b.sourceCtrl,target:c.data,targetCtrl:this};e=this.callDragDropEvent(a,g);if(f&&1!=e.cancel){g=this.commonService.getMousePos(a);d=g.y+16;g=g.x+20;var k=
"iui-dragwin-icon";switch(e.dropPos){case 0:k+=" iui-dragwin-move-in";break;case 1:k+=" iui-dragwin-move-up";break;case 2:k+=" iui-dragwin-move-down"}"copy"==e.action&&(k+="-copy");this.updateDragComponent({"class":k,top:d,left:g,text:c.data[this.options.rowFields.text]});this.dropMark(a,f);this.dragDropService.setData({action:e.action,clone:b.clone,dropPos:e.dropPos,source:b.source,sourceCtrl:b.sourceCtrl,sourceData:b.sourceData,target:c.data,targetCtrl:this})}else a.dataTransfer?a.dataTransfer.dropEffect=
"none":a.originalEvent&&a.originalEvent.dataTransfer&&(a.originalEvent.dataTransfer.dropEffect="none"),this.dropMark(a)}else this.options.allowDrop?(f=this.checkEmptySpace(a),g={action:a.shiftKey?"copy":"move",allow:f,dropPos:-1,source:b.source,sourceCtrl:b.sourceCtrl,target:null,targetCtrl:this},e=this.callDragDropEvent(a,g),f&&1!=e.cancel?(g=this.commonService.getMousePos(a),d=g.y+16,g=g.x+20,k="iui-dragwin-icon iui-dragwin-move-end","copy"==e.action&&(k+="-copy"),this.updateDragComponent({"class":k,
top:d,left:g,text:this.name?this.name:"Component"}),this.dropMark(a,f&&!this.isScrollTimerActive),this.dragDropService.setData({action:e.action,clone:b.clone,source:b.source,sourceCtrl:b.sourceCtrl,sourceData:b.sourceData,target:null,targetCtrl:this,dropPos:-1})):(a.dataTransfer?a.dataTransfer.dropEffect="none":a.originalEvent&&a.originalEvent.dataTransfer&&(a.originalEvent.dataTransfer.dropEffect="none"),this.dropMark(a))):(a.dataTransfer?a.dataTransfer.dropEffect="none":a.originalEvent&&a.originalEvent.dataTransfer&&
(a.originalEvent.dataTransfer.dropEffect="none"),this.dropMark(a))};b.prototype.processDragDrop=function(a,c){a.preventDefault();var e=!0;a.dataTransfer?e="none"===a.dataTransfer.effectAllowed?!1:!0:a.originalEvent&&a.originalEvent.dataTransfer&&(e="none"===a.originalEvent.dataTransfer.effectAllowed?!1:!0);var d=this.dragDropService.getData();if(e){if((e=c&&!c.isEmpty?this.isDropAllowed(d.source,c.data,d.dropPos):this.checkEmptySpace(a))&&d.source){var b=this.callDragDropEvent(a,{action:d.action,
source:d.source,dropPos:d.dropPos,allow:e,sourceCtrl:d.sourceCtrl,target:d.target,targetCtrl:this},!0);this.dragDropService.setData({action:b.action,clone:d.clone,dropPos:b.dropPos,source:d.source,sourceCtrl:d.sourceCtrl,sourceData:d.sourceData,target:d.target,targetCtrl:this});b.cancel?e=!1:this.drop(a,this.dragDropService.getData())}d.sourceCtrl&&d.sourceCtrl.removeDropMark&&d.sourceCtrl.removeDropMark()}e?this.dragDropService.clearData():this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle&&
this.updateLayout();var h=this,g=setTimeout(function(){h.dropMark(a);if(e){var c=h.dragDropService.getData();c={action:c.action,dragRow:c.source,dropPos:c.dropPos,event:a,isDropAllowed:!0,mousePos:h.commonService.getMousePos(a),sourceCtrl:c.sourceCtrl,targetCtrl:h,targetRow:c.target};h.dragDropComplete.emit(c)}h.isDragActive=!1;h.clearDragDropSettings();clearTimeout(g)},150)};b.prototype.clearDragDropSettings=function(){this.dragDropService.clearData();this.isDragHandleVisible=this.isDragActive=!1;
this.dragStartPos={x:0,y:0};this.dragEndPos={x:0,y:0};this.changeCursor()};b.prototype.drop=function(a,c){if(c&&c.sourceCtrl){var e="copy"==c.action&&c.clone?c.clone:c.source;if(Array.isArray(e)){for(var d=[],b=0;b<e.length;b++)d.push(e[b]);if(0<d.length){for(b=0;b<d.length;b++)this.processDataDrop(a,d[b],c);this.clearPrevSelection()}}else this.processDataDrop(a,e,c),this.clearPrevSelection();c.sourceCtrl!=c.targetCtrl&&c.sourceCtrl.updateLayout&&c.sourceCtrl.updateLayout();this.updateLayout()}this.isCtrlDragEntered=
!1};b.prototype.processDataDrop=function(a,c,e){a="copy"==e.action;"copy"!=e.action&&e.sourceCtrl&&e.sourceCtrl.removeRow&&(a=e.sourceCtrl.removeRow(c));if(a)switch(e.dropPos){case 0:this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle?this.insertRowAt(c,0,e.target):this.insertRowAt(c,-1,e.target);break;case 1:this.insertRowBefore(c,e.target);break;case 2:this.insertRowAfter(c,e.target);break;default:this.addRow(c)}};b.prototype.callAfterSelectEvent=function(a){this.afterSelect.emit({obj:a});
this.selectionChanged.emit(null)};b.prototype.rowDragEnd=function(a,c){var e=this.dragDropService.getData();e={action:a.shiftKey?"copy":"move",dragRow:e.source,dropPos:e.dropPos,event:a,mousePos:this.commonService.getMousePos(a),sourceCtrl:e.sourceCtrl,targetCtrl:this,targetRow:e.target};this.dragEnd.emit(e)};b.prototype.getEmptyObj=function(a){for(var c=null,e=0;e<this.scrollRowList.length;e++)if(this.scrollRowList[e].status==a){c=this.scrollRowList[e];break}return c};b.prototype.removeEmptyRow=
function(a){if(a=this.getEmptyObj(a))a=this.scrollRowList.indexOf(a),0<=a&&this.scrollRowList.splice(a,1)};b.prototype.updateDragHandlePos=function(a){};b.prototype.updateScrollRowListDragOver=function(a){};b.prototype.addCalendar=function(){var a=this;if(a.appRef&&a.isEditorPresent(integralui_core_1.IntegralUIEditorType.Date)&&!a.calendarRef){a.removeCalendar();var c=a.cmpResolver.resolveComponentFactory(integralui_datepicker_1.IntegralUICalendarPopup);c&&(a.calendarRef=a.appRef.createComponent(c),
a.calendarRef._component?a.calendar=a.calendarRef._component:a.calendarRef._hostElement&&(a.calendar=a.calendarRef._hostElement.component),a.hideCalendar(),a.calendar&&(a.calendar.closed.subscribe(function(c){a.hideCalendar()}),a.calendar.dateChanged.subscribe(function(c){a.hideCalendar();a.currentEditorCell&&1!=a.callCellValueChanging(a.currentEditorCell,c.date)&&(a.currentEditorCell.data.value=c.date,a.updateScrollRowList(),a.callCellValueChanged(a.currentEditorCell));a.isPopupDelayed=!0;setTimeout(function(){a.isPopupDelayed=
!1},250)})))}};b.prototype.addDropList=function(){var a=this;if(a.appRef&&a.isEditorPresent(integralui_core_1.IntegralUIEditorType.DropList)&&!a.dropListRef){a.removeDropList();var c=a.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUIListPopup);c&&(a.dropListRef=a.appRef.createComponent(c),a.dropListRef._component?a.dropList=a.dropListRef._component:a.dropListRef._hostElement&&(a.dropList=a.dropListRef._hostElement.component),a.hideDropList(),a.dropList&&(a.dropList.closed.subscribe(function(c){a.hideDropList()}),
a.dropList.selectionChanged.subscribe(function(c){a.hideDropList();c.item&&a.currentEditorCell&&1!=a.callCellValueChanging(a.currentEditorCell,c.item.value)&&(a.currentEditorCell.data[a.options.cellFields.value]=c.item.value,a.callCellValueChanged(a.currentEditorCell));a.isPopupDelayed=!0;setTimeout(function(){a.isPopupDelayed=!1},250)})))}};b.prototype.callCellValueChanging=function(a,c){var e={cancel:!1,cell:a.data,text:a.data[this.options.cellFields.text],value:void 0!=c?c:a.data[this.options.cellFields.value]};
this.cellValueChanging.emit(e);return e.cancel};b.prototype.callCellValueChanged=function(a){this.cellValueChanged.emit({cell:a.data,text:a.data[this.options.cellFields.text],value:a.data[this.options.cellFields.value]})};b.prototype.closeEditor=function(){this.currentEditorCell=null;this.originalEditorText="";this.originalEditorValue=null;this.isEditorFocused=!1};b.prototype.editCheckBoxValue=function(a){if(a.isEditorEnabled){var c=void 0!=a.data[this.options.cellFields.value]?a.data[this.options.cellFields.value]:
"unchecked";if(1!=this.callCellValueChanging(a)){c="checked"==c||1==c?"checked":a.editorSettings&&a.editorSettings.threeState&&"indeterminate"==c?"indeterminate":"unchecked";var e="unchecked";if(a.editorSettings&&a.editorSettings.threeState)switch(c){case "checked":e="unchecked";break;case "indeterminate":e="checked";break;case "unchecked":e="indeterminate"}else e="unchecked"==c?!0:!1;a.data[this.options.cellFields.value]=e;this.updateScrollRowList();this.callCellValueChanged(a)}}};b.prototype.editorClick=
function(a){a.stopPropagation()};b.prototype.editorDblClickEvent=function(a){a.stopPropagation()};b.prototype.editorKeyDown=function(a,c){if(this.currentEditorCell)switch(a.keyCode){case 13:switch(c){case "numeric":this.callCellValueChanged(this.currentEditorCell);break;default:this.cellValueChanged.emit({cell:this.currentEditorCell.data,orgText:this.originalEditorText,text:this.currentEditorCell.data[this.options.cellFields.text],value:this.currentEditorCell.data[this.options.cellFields.value]})}this.closeEditor();
break;case 27:switch(c){case "numeric":this.currentEditorCell.data[this.options.cellFields.value]=this.originalEditorValue;break;default:this.currentEditorCell.data[this.options.cellFields.text]=this.originalEditorText}this.closeEditor()}};b.prototype.editorLostFocus=function(a){if(this.currentEditorCell)switch(a){case "numeric":this.currentEditorCell.data[this.options.cellFields.value]=this.originalEditorValue;break;default:this.currentEditorCell.data[this.options.cellFields.text]=this.originalEditorText}this.closeEditor()};
b.prototype.editorMouseDown=function(a,c){};b.prototype.editorMouseWheel=function(a){a.stopPropagation()};b.prototype.editorNumericValueChange=function(a,c){c&&!isNaN(c)&&(a.data[this.options.cellFields.value]=Math.min(Math.max(Number(c),a.editorSettings&&void 0!=a.editorSettings.min?a.editorSettings.min:-9999999),a.editorSettings&&void 0!=a.editorSettings.max?a.editorSettings.max:9999999),this.callCellValueChanged(a))};b.prototype.editorPreventDragStart=function(a){a.preventDefault();a.stopPropagation()};
b.prototype.editorValueChanged=function(a,c){this.isLayoutUpdating||this.isScrollActive||this.callCellValueChanged(c)};b.prototype.getCellEditorClass=function(a){var c="",e=a.editorSettings&&a.editorSettings.style?a.editorSettings.style:{};switch(a.editorType){case integralui_core_1.IntegralUIEditorType.CheckBox:c="iui-editor-checkbox"+(e.general?" "+e.general:"");switch(a.editorValue){case "checked":c+=e.checked?" "+e.checked:" iui-editor-checkbox-checked";break;case "indeterminate":c+=e.indeterminate?
" "+e.indeterminate:" iui-editor-checkbox-indeterminate";break;default:c+=e.unchecked?" "+e.unchecked:" iui-editor-checkbox-unchecked"}a.isEditorEnabled||(c+=e.disabled?" "+e.disabled:" iui-editor-checkbox-disabled")}return c};b.prototype.getCellEditorList=function(a){return void 0!=a[this.options.columnFields.editorSettings]&&void 0!=a[this.options.columnFields.editorSettings].list?a[this.options.columnFields.editorSettings].list:[]};b.prototype.getCellEditorSettings=function(a){return void 0!=a[this.options.columnFields.editorSettings]?
a[this.options.columnFields.editorSettings]:{}};b.prototype.getCellEditorStyle=function(a){var c={},e=a.editorSettings&&a.editorSettings.style?a.editorSettings.style:{};switch(a.editorType){case integralui_core_1.IntegralUIEditorType.Rating:c=e}return c};b.prototype.getCellEditorType=function(a){return void 0!=a[this.options.columnFields.editorType]?a[this.options.columnFields.editorType]:integralui_core_1.IntegralUIEditorType.None};b.prototype.getCellEditorVisibility=function(a,c){var e=!0;switch((void 0!=
c[this.options.cellFields.editorSettings]?c[this.options.cellFields.editorSettings]:{}).visible){case integralui_core_1.IntegralUIVisibility.None:e=!1}return e};b.prototype.getCellField=function(a){switch(a){case "text":return this.options.cellFields.text;case "value":return this.options.cellFields.value}};b.prototype.getCellText=function(a){return void 0!=a.data[this.options.cellFields.text]?a.data[this.options.cellFields.text]:""};b.prototype.getCellValue=function(a){var c=void 0!=a.data[this.options.cellFields.value]?
a.data[this.options.cellFields.value]:null;switch(a.editorType){case integralui_core_1.IntegralUIEditorType.CheckBox:a.editorSettings&&(c="checked"==c||1==c?"checked":a.editorSettings.threeState&&"indeterminate"==c?"indeterminate":"unchecked");break;case integralui_core_1.IntegralUIEditorType.Date:var e="en-US",b={year:"numeric",month:"numeric",day:"numeric"};if(a.editorSettings)switch(e=a.editorSettings.locales?a.editorSettings.locales:"en-US",a.editorSettings.format){case integralui_core_1.IntegralUIDateFormat.Long:b.weekday=
"long";break;case integralui_core_1.IntegralUIDateFormat.Custom:b=a.editorSettings.formatOptions}c=c?c.toLocaleString(e,b):"";break;case integralui_core_1.IntegralUIEditorType.DropList:c=this.commonService.isObject(c)?c?c.text:"":void 0!=c&&a.editorSettings?this.findItemByValue(c,a.editorSettings.items):"";break;case integralui_core_1.IntegralUIEditorType.Image:c=Array.isArray(c)?c:[{src:c}];break;case integralui_core_1.IntegralUIEditorType.Progress:c=this.getEditorProgressValue(a);break;case integralui_core_1.IntegralUIEditorType.Numeric:c=
void 0!=a.data[this.options.cellFields.value]?a.data[this.options.cellFields.value]:"";break;case integralui_core_1.IntegralUIEditorType.TextBox:c=void 0!=a.data[this.options.cellFields.text]?a.data[this.options.cellFields.text]:""}return c};b.prototype.findItemByValue=function(a,c){for(var b="",d=0;d<c.length;d++)if(void 0!=c[d].value&&c[d].value==a){b=void 0!=c[d].text&&""!=c[d].text?c[d].text:c[d].value.toString();break}return b};b.prototype.getEditorProgressStyle=function(a){return{width:a.editorValue+
"%","z-index":2}};b.prototype.getEditorProgressValue=function(a){var c=a.editorSettings&&void 0!=a.editorSettings.min?a.editorSettings.min:0,b=a.editorSettings&&void 0!=a.editorSettings.max?a.editorSettings.max:100;return(a=a.data[this.options.cellFields.value])&&!isNaN(a)&&!isNaN(b)&&0<b?100*Math.min(Math.max(a,c),b)/b:0};b.prototype.getHoverRow=function(){return this.hoverRow};b.prototype.hideCalendar=function(){this.calendar&&(this.calendar.display="none")};b.prototype.hideDropList=function(){this.dropList&&
(this.dropList.display="none")};b.prototype.isCellEditorEnabled=function(a,c){return 0!=(void 0!=c[this.options.cellFields.editorSettings]?c[this.options.cellFields.editorSettings]:{}).enabled?!0:!1};b.prototype.isEditorPresent=function(a){var c=!1,b=this.dataService.getList(null,this.columnDataKey);if(b)for(var d=0;d<b.length;d++)if(b[d][this.options.columnFields.editorType]==a){c=!0;break}return c};b.prototype.openEditor=function(a,c,b){this.currentEditorCell=c;this.isEditorFocused=!0;switch(b){case "numeric":this.originalEditorValue=
c.data[this.options.cellFields.value];break;default:this.originalEditorText=c.data[this.options.cellFields.text]}};b.prototype.removeCalendar=function(){this.calendar&&(this.calendar.closed&&this.calendar.closed.unsubscribe(),this.calendar.dateChanged&&this.calendar.dateChanged.unsubscribe());this.calendarRef&&this.calendarRef.destroy();this.calendar=null};b.prototype.removeDropList=function(){this.dropList&&(this.dropList.closed&&this.dropList.closed.unsubscribe(),this.dropList.selectionChanged&&
this.dropList.selectionChanged.unsubscribe());this.dropListRef&&this.dropListRef.destroy();this.dropList=null};b.prototype.showPopup=function(a,c,b,d){a=this.commonService.getShiftPos();b=this.commonService.getPageRect(b.nativeElement);d=this.commonService.getPageRect(d.nativeElement);switch(c.editorType){case integralui_core_1.IntegralUIEditorType.Date:this.calendar&&(this.calendar.allowAnimation=!1,this.calendar.calendarStyle=c.editorSettings&&c.editorSettings.style&&c.editorSettings.style.calendar?
c.editorSettings.style.calendar:null,this.calendar.date=c.data.value,this.calendar.display="block",this.calendar.firstDayOfWeek=c.editorSettings&&void 0!=c.editorSettings.firstDayOfWeek?c.editorSettings.firstDayOfWeek:integralui_core_1.IntegralUIWeekDays.Sunday,this.calendar.position={x:d.left+a.x-1,y:b.bottom+a.y},this.calendar.size=c.editorSettings&&c.editorSettings.calendarSize?c.editorSettings.calendarSize:{width:250,height:200},this.allowAnimation&&(this.calendar.position.y-=2),this.calendar.refresh(),
this.calendar.open(),this.currentEditorCell=c,this.calendar.focus());break;case integralui_core_1.IntegralUIEditorType.DropList:this.dropList&&(this.dropList.allowAnimation=!1,this.dropList.display="block",this.dropList.items=c.editorSettings&&c.editorSettings.items?c.editorSettings.items:[],this.dropList.listStyle=c.editorSettings&&c.editorSettings.style&&c.editorSettings.style.list?c.editorSettings.style.list:null,this.dropList.minWidth=c.editorSettings&&c.editorSettings.minWidth?c.editorSettings.minWidth:
d.width,this.dropList.maxVisibleItems=c.editorSettings&&c.editorSettings.maxVisibleItems?c.editorSettings.maxVisibleItems:5,this.dropList.position={x:d.left+a.x-1,y:b.bottom+a.y},this.dropList.size={width:Math.max(d.width,this.dropList.minWidth),height:0},this.dropList.refresh(),this.dropList.open(),this.currentEditorCell=c,this.dropList.focus())}};b.prototype.selectTextBoxContent=function(a){a.target&&setTimeout(function(){a.target.setSelectionRange(0,a.target.value.length)},1)};b.prototype.expandBoxMouseDown=
function(a,c){this.isEnabled&&(1!=a.buttons||this.isExpandBoxTouched||this.toggle(c),this.isExpandBoxTouched=!1);a.stopPropagation()};b.prototype.expandBoxMouseUp=function(a){this.isExpandBoxTouched=!1;a.stopPropagation()};b.prototype.expandBoxTouchStart=function(a,c){this.isEnabled&&(this.isExpandBoxTouched=!0,this.toggle(c));a.stopPropagation()};b.prototype.toggle=function(a,c){};b.prototype.updateExpandingCell=function(a,c){var b=0,d=this.getExpandingColumn();d&&(b=d[this.options.columnFields.id]);
(b=this.getCellByColumnId(a[this.options.rowFields.cells],b))&&(b[this.options.cellFields.expanded]=c)};b.prototype.convertToCSV=function(a){for(var c="",b=0;b<a.length;b++){var d="",f=a[b];if(0<f.length){for(var h=0;h<f.length;h++)d+=f[h].text+",";d=d.slice(0,-1);d+="\r\n"}c+=d}return c};b.prototype.exportToCSV=function(){for(var a=[],c=[],b=0;b<this.currentColumnList.length;b++){var d=this.currentColumnList[b].data;d={text:void 0!=d[this.options.columnFields.headerText]?d[this.options.columnFields.headerText].toString():
""};c.push(d)}a.push(c);for(var f=this.getFullList(),h=0;h<f.length;h++){var g=f[h];c=[];for(b=0;b<this.currentColumnList.length;b++){var k=this.getCellByColumnId(g[this.options.rowFields.cells],this.currentColumnList[b].data[this.options.columnFields.id]);d={};d.text=k?k.value?k.value instanceof Date?k.value.toLocaleDateString():JSON.stringify(k.value):k.text?0<=k.text.indexOf(",")?JSON.stringify(k.text):k.text:"":"";c.push(d)}a.push(c)}return this.convertToCSV(a)};b.prototype.exportToJSON=function(a,
c,b,d){a=this.exportColumnsToJSON(a,b);c=this.exportRowsToJSON(c,b,d);return'[\n{ "columns": '+a+' },\n{ "rows": '+c+" }\n]"};b.prototype.exportColumnsToJSON=function(a,c){return JSON.stringify(this.columns,a?a:[this.options.columnFields.allowDrag,this.options.columnFields.allowDrop,this.options.columnFields.allowFilter,this.options.columnFields.allowGrouping,this.options.columnFields.allowResize,this.options.columnFields.canSelect,this.options.columnFields.cellTemplateUrl,this.options.columnFields.columns,
this.options.columnFields.contentAlignment,this.options.columnFields.contextMenu,this.options.columnFields.editorType,this.options.columnFields.editorSettings,this.options.columnFields.editorTemplate,this.options.columnFields.filterParams,this.options.columnFields.fixed,this.options.columnFields.fixedWidth,this.options.columnFields.footerAlignment,this.options.columnFields.footerContent,this.options.columnFields.footerText,this.options.columnFields.footerTooltip,this.options.columnFields.groupText,
this.options.columnFields.headerAlignment,this.options.columnFields.headerContent,this.options.columnFields.headerText,this.options.columnFields.headerTooltip,this.options.columnFields.icon,this.options.columnFields.id,this.options.columnFields.minWidth,this.options.columnFields.maxWidth,this.options.columnFields.pid,this.options.columnFields.selected,this.options.columnFields.style,this.options.columnFields.visible,this.options.columnFields.width],c?c:null)};b.prototype.exportRowsToJSON=function(a,
c,b){c=c?c:null;var d=0==b?this.rows:this.getFullList();a=a?a:[this.options.rowFields.allowCellFocus,this.options.rowFields.allowDrag,this.options.rowFields.allowDrop,this.options.rowFields.allowEdit,this.options.rowFields.allowFocus,this.options.rowFields.autoCheck,this.options.rowFields.canSelect,this.options.rowFields.cells,this.options.rowFields.checked,this.options.rowFields.checkState,this.options.rowFields.content,this.options.rowFields.contextMenu,this.options.rowFields.gid,this.options.rowFields.enabled,
this.options.rowFields.expanded,this.options.rowFields.fixed,this.options.rowFields.hasChildren,this.options.rowFields.icon,this.options.rowFields.id,this.options.rowFields.pid,this.options.rowFields.selected,this.options.rowFields.statusIcon,this.options.rowFields.style,this.options.rowFields.text,this.options.rowFields.tooltip,this.options.rowFields.value,this.options.rowFields.visible,this.options.cellFields.allowDrag,this.options.cellFields.allowEdit,this.options.cellFields.cid,this.options.cellFields.content,
this.options.cellFields.contextMenu,this.options.cellFields.editorSettings,this.options.cellFields.enabled,this.options.cellFields.isGroup,this.options.cellFields.rid,this.options.cellFields.selected,this.options.cellFields.style,this.options.cellFields.tag,this.options.cellFields.text,this.options.cellFields.tooltip,this.options.cellFields.value,this.options.cellFields.valueID,this.options.cellFields.valueType];0==b&&a.push(this.options.rowFields.rows);return JSON.stringify(d,a,c)};b.prototype.filter=
function(a,c){if(a)a[this.options.columnFields.filterParams]=c;else for(var b=0;b<this.currentColumnList.length;b++)this.currentColumnList[b].data[this.options.columnFields.filterParams]=null;this.updateLayout();this.change.emit({type:"filtering"})};b.prototype.changeCursor=function(a){a="default";if(this.isEnabled)if(this.isDragActive&&this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle)a="move";else if(0<=this.resizeColumnIndex||this.isColumnResizing)a="ew-resize";this.ctrlCursor=
a};b.prototype.checkStatus=function(a){var c=!1;switch(a){case "column-reorder":c=this.columnReorderActive}return c};b.prototype.clearHoverRow=function(a){};b.prototype.cloneRow=function(a){return this.dataService.clone(a,this.rowDataKey)};b.prototype.createCloneList=function(a){for(var c=[],b=0;b<a.length;b++)c.push(this.cloneRow(a[b]));return c};b.prototype.getCellByColumnId=function(a,c){var b=null;if(a)for(var d=0;d<a.length;d++)if(a[d][this.options.cellFields.cid]==c){b=a[d];break}return b};
b.prototype.getCellWidth=function(a,c){var b=this.getColumnWidth(c);c&&this.getColumnIndex(c)==this.expandColIndex&&(b-=a.indent);return 0<b?b:0};b.prototype.getColumnAllowResize=function(a){return(a=a[this.options.columnFields.allowResize])?{left:this.commonService.isFieldAvailable(a.left,!0),right:this.commonService.isFieldAvailable(a.right,!0)}:{left:!0,right:!0}};b.prototype.getColumnById=function(a){var c=null,b=this.dataService.getList(null,this.columnDataKey);if(b)for(var d=0;d<b.length;d++)if(b[d][this.options.columnFields.id]==
a){c=b[d];break}return c};b.prototype.getColumnCurrentIndex=function(a){return a?this.getColumnIndexFromList(a):-1};b.prototype.getColumnIndexFromList=function(a){for(var c=-1,b=this.getColumnList(a[this.options.columnFields.fixed]),d=0;d<b.length;d++)if(b[d].data==a){c=d;break}return c};b.prototype.getColumnList=function(a){switch(a){case "left":return this.currentLeftColumnList;case "right":return this.currentRightColumnList}return this.currentColumnList};b.prototype.getColumnIndex=function(a){var c=
this.dataService.getList(null,this.columnDataKey);return c?c.indexOf(a):-1};b.prototype.getColumnRealIndex=function(a){var c=this.dataService.getList(null,this.columnDataKey);return 0<=a&&a<c.length&&a<this.currentColumnList.length?c.indexOf(this.currentColumnList[a].data):-1};b.prototype.getPrevColumnIndex=function(a){var c=this.dataService.getList(null,this.columnDataKey);a=c?c.indexOf(a):-1;return 0<a?a-1:-1};b.prototype.getNextColumnIndex=function(a){var c=this.dataService.getList(null,this.columnDataKey);
a=c?c.indexOf(a):-1;return c&&a<c.length-1?a+1:c.length-1};b.prototype.getLastColumnIndex=function(){var a=this.dataService.getList(null,this.columnDataKey);return a?a.length-1:-1};b.prototype.getColumnWidth=function(a,c){var b=this.options.columnFields.width;switch(c){case "min":return b=this.options.columnFields.minWidth,a&&void 0!=a[b]?a[b]:0;case "max":return b=this.options.columnFields.maxWidth,a&&void 0!=a[b]?a[b]:9999999}return a&&void 0!=a[b]?a[b]:100};b.prototype.setColumnWidth=function(a,
c){if(a&&1!=a[this.options.columnFields.fixedWidth]){var b=this.getColumnWidth(a,"min"),d=this.getColumnWidth(a,"max");b=Math.min(d,Math.max(b,c));a[this.options.columnFields.width]=1<b?b:0}};b.prototype.getPrevColumn=function(a,c){var b=null,d=this.getColumnIndexFromList(a)-1;if(0<=d)for(var f=this.getColumnList(a[this.options.columnFields.fixed]);0<=d;d--){var h=this.getColumnWidth(f[d].data),g=this.getColumnWidth(f[d].data,"min");h=c?!0:h>g;if(!this.isColumnWidthFixed(f[d].data)&&h){b=f[d].data;
break}}return b};b.prototype.getExpandingColumn=function(){var a=this.dataService.getList(null,this.columnDataKey);return 0<=this.expandColIndex&&this.expandColIndex<a.length?a[this.expandColIndex]:null};b.prototype.updateExpandingColumnID=function(){var a=this.getExpandingColumn();a&&(this.currentExpandColumnID=a[this.options.columnFields.id])};b.prototype.getFilterTree=function(a){for(var c=null,b=0;b<this.currentColumnList.length;b++)if(this.currentColumnList[b].data==a){c=this.currentColumnList[b].filter;
break}return c};b.prototype.getCurrentList=function(){for(var a=[],c=0;c<this.currentRowList.length;c++)a.push(this.currentRowList[c].data);return a};b.prototype.getList=function(a,c){switch(a){case "current":return this.getCurrentList();case "selected":return this.currentSelectedRows}return this.dataService.getList(c,this.rowDataKey)};b.prototype.getFullList=function(){return[]};b.prototype.getTopRow=function(){return 0<this.scrollRowList.length?this.scrollRowList[0].data:null};b.prototype.getObjFromRow=
function(a){for(var c=null,b=0;b<this.currentRowList.length;b++)if(this.currentRowList[b].data==a){c=this.currentRowList[b];break}return c};b.prototype.createScrollObjFromRow=function(a,c,b){return null};b.prototype.getObjIndexFromScrollList=function(a,c){var b=-1,d=this.scrollRowList;switch(c){case "left":d=this.scrollLeftRowList;break;case "right":d=this.scrollRightRowList}for(var f=0;f<d.length;f++)if(d[f].data==a){b=f;break}return b};b.prototype.getObjFromScrollList=function(a,c){var b=this.scrollRowList;
switch(c){case "left":b=this.scrollLeftRowList;break;case "right":b=this.scrollRightRowList}var d=this.getObjIndexFromScrollList(a,c);return this.isIndexInRange(d,b)?b[d]:null};b.prototype.getRowCurrentIndex=function(a){return a?(a=this.getObjFromRow(a))&&this.currentRowList?this.currentRowList.indexOf(a):-1:-1};b.prototype.getRowIndent=function(a,c){var b=this.columnPadding.left;this.isExpandBoxAllowed(c)&&(b+=a.indent);return b};b.prototype.getRowLevel=function(a){return 0};b.prototype.getRowList=
function(a){switch(a){case "left":return this.scrollLeftRowList;case "right":return this.scrollRightRowList}return this.scrollRowList};b.prototype.getRowFromComponent=function(a){return null};b.prototype.isChildOf=function(a,c){return!1};b.prototype.isColumnFixed=function(a,c){return c?a[this.options.columnFields.fixed]==c:!a||"left"!=a[this.options.columnFields.fixed]&&"right"!=a[this.options.columnFields.fixed]?!1:!0};b.prototype.isColumnVisible=function(a){return a&&0!=a[this.options.columnFields.visible]?
!0:!1};b.prototype.isColumnWidthFixed=function(a){return 1==a[this.options.columnFields.fixedWidth]?!0:!1};b.prototype.isComponentIndexInRange=function(a){return this.rowList?0<=a&&a<this.rowList.length:!1};b.prototype.isExpandBoxAllowed=function(a){return a?this.getColumnIndex(a)==this.expandColIndex:!1};b.prototype.isIndexInRange=function(a,c){return c?0<=a&&a<c.length:!1};b.prototype.isRowAllowed=function(a,c){if(0==a[this.options.rowFields.visible])return!1;if(0==this.options.allowFilter)return!0;
var b=!0;if(a)for(var d,f,h=0;h<a[this.options.rowFields.cells].length;h++){b=!0;f=a[this.options.rowFields.cells][h];d=f[this.options.cellFields.cid];d=this.getColumnById(d);!d&&h<this.currentColumnList.length&&(d=this.currentColumnList[h].data);if(d&&d[this.options.columnFields.filterParams]){var g=d[this.options.columnFields.filterParams],k=f[this.options.cellFields.value]?f[this.options.cellFields.value]:f[this.options.cellFields.text];g&&(g.callback?b=g.callback(k,f,a):(b=this.filterService.match(k,
g.conditions,g.formula,this.getFilterTree(d),g.caseSensitive),!b&&g.allowParent&&(b=this.filterIsThereChildren(a,c))))}if(!b)break}return b};b.prototype.filterIsThereChildren=function(a,c){var b=!1,d=a[this.options.rowFields.rows];if(d)for(var f=0;f<d.length&&!(b=this.isRowAllowed(d[f],c));f++);return b};b.prototype.isRowEnabled=function(a){return!0};b.prototype.isRowFixed=function(a){return!1};b.prototype.isRowHovered=function(a){return this.isDragActive||this.isScrollTimerActive||!a||a!=this.hoverRow?
!1:!0};b.prototype.isRowSelected=function(a){return a&&1==a[this.options.rowFields.selected]?!0:!1};b.prototype.isParentOf=function(a,c){return!1};b.prototype.isThereFixedColumns=function(a){switch(a){case "left":return 0<this.currentLeftColumnList.length;case "right":return 0<this.currentRightColumnList.length}return!1};b.prototype.processStateChanged=function(){};b.prototype.updateExpandStatus=function(){};b.prototype.resetHoverRowObj=function(){this.hoverRowObj={data:{}}};b.prototype.moveColumn=
function(a,c,b,d){if(a){var e=-1;switch(c){case integralui_core_1.IntegralUIMoveDirection.After:e=b?this.getNextColumnIndex(b):-1;break;case integralui_core_1.IntegralUIMoveDirection.At:e=d;break;case integralui_core_1.IntegralUIMoveDirection.Before:e=b?this.getColumnIndex(b):-1;break;case integralui_core_1.IntegralUIMoveDirection.First:e=0;break;case integralui_core_1.IntegralUIMoveDirection.Last:e=this.getLastColumnIndex();break;case integralui_core_1.IntegralUIMoveDirection.Left:e=this.getPrevColumnIndex(a);
break;case integralui_core_1.IntegralUIMoveDirection.Right:e=this.getNextColumnIndex(a)}(c=this.dataService.getList(null,this.columnDataKey))&&0<=e&&e<c.length&&(this.allowUpdate=!1,b=c.indexOf(a),this.moveObject(b,e,c),this.allowUpdate=!0,this.columnOrderChanged.emit({column:a}),this.updateLayout())}};b.prototype.paginatorMouseEnter=function(a){this.blockHoverRect.top=-9999999};b.prototype.scrollMouseEnter=function(a){this.blockHoverRect.top=-9999999};b.prototype.cellGotFocus=function(a){this.isEnabled&&
this.refresh()};b.prototype.cellLostFocus=function(a){this.isEnabled&&this.refresh()};b.prototype.onContentScroll=function(a){a.srcElement.scrollTop=0;a.srcElement.scrollLeft=0;a.target.scrollTop=0;a.target.scrollLeft=0};b.prototype.onGridScroll=function(a){a.srcElement.scrollTop=0;a.srcElement.scrollLeft=0;a.target.scrollTop=0;a.target.scrollLeft=0};b.prototype.cellMouseEnter=function(a,c){this.isEnabled&&(this.cellHover.emit({cell:c.data}),this.hoverCell=c)};b.prototype.cellMouseLeave=function(a){this.hoverCell=
null};b.prototype.cellMouseDown=function(a,c){if(this.isEnabled&&1==a.which&&(this.currentFocusCell=c,c.editorType))switch(c.editorType){case integralui_core_1.IntegralUIEditorType.CheckBox:this.editCheckBoxValue(c)}};b.prototype.cellMouseUp=function(a,c,b,d){if(1==a.which&&c.isEditorEnabled&&c.isEditorVisible)switch(c.editorType){case integralui_core_1.IntegralUIEditorType.Date:this.openDropDown(a,c,b,d);break;case integralui_core_1.IntegralUIEditorType.DropList:this.openDropDown(a,c,b,d);break;
case integralui_core_1.IntegralUIEditorType.Numeric:this.openEditor(a,c,"numeric");break;case integralui_core_1.IntegralUIEditorType.TextBox:this.openEditor(a,c)}};b.prototype.cellTouchEnd=function(a,c,b,d){if(c.isEditorEnabled&&c.isEditorVisible)switch(c.editorType){case integralui_core_1.IntegralUIEditorType.CheckBox:this.editCheckBoxValue(c);break;case integralui_core_1.IntegralUIEditorType.Date:this.openDropDown(a,c,b,d);break;case integralui_core_1.IntegralUIEditorType.DropList:this.openDropDown(a,
c,b,d);break;case integralui_core_1.IntegralUIEditorType.Numeric:this.openEditor(a,c,"numeric");break;case integralui_core_1.IntegralUIEditorType.TextBox:this.openEditor(a,c)}};b.prototype.openDropDown=function(a,c,b,d){};b.prototype.cellKeyDown=function(a,c){if(this.isEnabled){var b={cancel:!1,cell:c.data,event:a};this.keyDown.emit(b);switch(a.keyCode){case 13:this.beforeEdit.emit(b);break;case 33:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processPageUpKey(c));
break;case 34:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processPageDownKey(c));break;case 35:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processEndKey(c));break;case 36:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processHomeKey(c));break;case 37:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processLeftArrowKey(c));break;case 38:!b.cancel&&
this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processUpArrowKey(c));break;case 39:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processRightArrowKey(c));break;case 40:!b.cancel&&this.options.allowFocus&&(a.preventDefault(),this.isKeyboardActive=!0,this.processDownArrowKey(c))}}this.isKeyPressed=!0};b.prototype.cellKeyPress=function(a,c){var b={cancel:!1,cell:c.data,event:a};this.isEnabled&&this.keyPress.emit(b)};b.prototype.cellKeyUp=
function(a,c){var b={cancel:!1,cell:c.data,event:a};this.isEnabled&&this.keyUp.emit(b);this.isKeyPressed=!1};b.prototype.isCellFocused=function(a){return this.currentFocusCell?a.data==this.currentFocusCell.data:!1};b.prototype.processDownArrowKey=function(a,c){var b=this.getDownCell(this.isKeyPressed?this.currentFocusCell:a);if(b&&!b.isEmpty){this.updateFocusCell(b);var d=this.getRowFromCell(b);d&&(this.processRowSelection(c,d.data),this.isLastRow(b)&&(this.scrollPos({x:this.currentScrollPos.x,y:this.currentScrollPos.y+
2*this.avgRowHeight}),this.currentFocusCell.rowIndex-=2),this.refresh())}return b&&!b.isEmpty?b:null};b.prototype.processEndKey=function(a,c){var b=null;if(0<this.scrollRowList.length){this.scrollPos({x:this.currentScrollPos.x,y:this.maxScrollPos.y});var d=this;setTimeout(function(){if(d.visibleRange<=d.scrollRowList.length){var e=d.getLastScrollIndex();0<=e&&(e=d.scrollRowList[e])&&e.cells&&0<=a.colIndex&&a.colIndex<e.cells.length&&(b=e.cells[a.colIndex],d.updateFocusCell(b),d.processRowSelection(c,
e.data))}},1)}return b};b.prototype.processHomeKey=function(a,c){var b=null;if(0<this.scrollRowList.length){this.scrollPos({x:this.currentScrollPos.x,y:0});var d=this;setTimeout(function(){var e=d.scrollRowList[0];e&&e&&e.cells&&0<=a.colIndex&&a.colIndex<e.cells.length&&(b=e.cells[a.colIndex],d.updateFocusCell(b),d.processRowSelection(c,e.data))},1)}return b};b.prototype.processLeftArrowKey=function(a){if((a=this.getPrevCell(this.isKeyPressed?this.currentFocusCell:a))&&!a.isEmpty){this.updateFocusCell(a);
this.isFirstCell(a)&&this.scrollPos({x:this.currentScrollPos.x-2*a.width,y:this.currentScrollPos.y});var c=this;setTimeout(function(){c.refresh()},1)}return a&&!a.isEmpty?a:null};b.prototype.processPageDownKey=function(a,c){var b=null,d=this;0<this.scrollRowList.length&&(d.scrollPos({x:d.currentScrollPos.x,y:d.currentScrollPos.y+d.avgRowHeight*(d.visibleRange-1)}),setTimeout(function(){var e=0<=a.rowIndex&&a.rowIndex<d.visibleRange?a.rowIndex:d.visibleRange-1;d.currentScrollPos.y==d.maxScrollPos.y&&
(e=d.getLastScrollIndex());0<=e&&(e=d.scrollRowList[e])&&e.cells&&0<=a.colIndex&&a.colIndex<e.cells.length&&(b=e.cells[a.colIndex],d.updateFocusCell(b),d.processRowSelection(c,e.data))},1));return b};b.prototype.processPageUpKey=function(a,c){var b=null,d=this;0<d.scrollRowList.length&&(d.scrollPos({x:d.currentScrollPos.x,y:d.currentScrollPos.y-d.avgRowHeight*(d.visibleRange-1)}),setTimeout(function(){var e=0<=a.rowIndex&&a.rowIndex<d.visibleRange?a.rowIndex:0;0==d.currentScrollPos.y&&(e=0);(e=d.scrollRowList[e])&&
e.cells&&0<=a.colIndex&&a.colIndex<e.cells.length&&(b=e.cells[a.colIndex],d.updateFocusCell(b),d.processRowSelection(c,e.data))},1));return b};b.prototype.processRightArrowKey=function(a){if((a=this.getNextCell(this.isKeyPressed?this.currentFocusCell:a))&&!a.isEmpty){this.updateFocusCell(a);this.isLastCell(a)?this.scrollPos({x:this.currentScrollPos.x+2*a.width,y:this.currentScrollPos.y}):a.colIndex>=this.currentColumnList.length-2&&this.scrollPos({x:this.maxScrollPos.x,y:this.currentScrollPos.y});
var c=this;setTimeout(function(){c.refresh()},1)}return a&&!a.isEmpty?a:null};b.prototype.processUpArrowKey=function(a,c){var b=this.getUpCell(a);if(b&&!b.isEmpty){this.updateFocusCell(b);var d=this.getRowFromCell(b);d&&(this.processRowSelection(c,d.data),this.isFirstRow(b)&&(this.scrollPos({x:this.currentScrollPos.x,y:this.currentScrollPos.y-this.avgRowHeight}),this.currentFocusCell.rowIndex++))}return b&&!b.isEmpty?b:null};b.prototype.getDownCell=function(a){if(a&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length){var c=
a.rowIndex<this.scrollRowList.length-1?a.rowIndex+1:-1;return(c=0<=c?this.scrollRowList[c]:null)&&0<=a.colIndex&&a.colIndex<c.cells.length?c.cells[a.colIndex]:null}return null};b.prototype.getNextCell=function(a){if(a&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length){var c=this.scrollRowList[a.rowIndex];a=a.colIndex;a=0<=a&&a<this.viewIndexRange.middle&&a<c.cells.length-1?a+1:this.viewIndexRange.middle-this.viewIndexRange.left;return 0<=a?c.cells[a]:null}return null};b.prototype.getLastScrollIndex=
function(){for(var a=0,c=0;c<this.scrollRowList.length;c++)if(this.scrollRowList[c].isEmpty){a=c-1;break}return a};b.prototype.getPrevCell=function(a){if(a&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length){var c=this.scrollRowList[a.rowIndex];a=a.colIndex;a=0<a&&a<c.cells.length?a-1:0;return 0<=a?c.cells[a]:null}return null};b.prototype.getUpCell=function(a){if(a&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length){var c=0<a.rowIndex?a.rowIndex-1:-1;return(c=0<=c?this.scrollRowList[c]:null)&&
0<=a.colIndex&&a.colIndex<c.cells.length?c.cells[a.colIndex]:null}return null};b.prototype.isFirstCell=function(a){return 0==a.colIndex?!0:!1};b.prototype.isFirstRow=function(a){return 0==a.rowIndex?!0:!1};b.prototype.isLastCell=function(a){return a.colIndex==this.viewIndexRange.middle-this.viewIndexRange.left?!0:!1};b.prototype.isLastRow=function(a){return a.rowIndex==this.visibleRange-2?!0:!1};b.prototype.getRowFromCell=function(a){return 0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length?this.scrollRowList[a.rowIndex]:
null};b.prototype.moveFocusFromCell=function(a,c){if(!this.options.allowFocus)return null;var b=null,d=this.getObjFromCell(a);if(d)switch(c){case "down":b=this.processDownArrowKey(d);break;case "end":b=this.processEndKey(d);break;case "home":b=this.processHomeKey(d);break;case "left":b=this.processLeftArrowKey(d);break;case "pagedown":b=this.processPageDownKey(d);break;case "pageup":b=this.processPageUpKey(d);break;case "right":b=this.processRightArrowKey(d);break;case "up":b=this.processUpArrowKey(d)}return b?
b.data:null};b.prototype.getObjFromCell=function(a){for(var c=null,b=0;b<this.scrollRowList.length;b++)for(var d=this.scrollRowList[b],f=0;f<d.cells.length;f++){var h=d.cells[f];if(h.data==a){c=h;break}}return c};b.prototype.updateFocusCell=function(a){a?(this.currentFocusCell={},this.currentFocusCell.isEmpty=!1,this.currentFocusCell.data=a.data,this.currentFocusCell.colIndex=a.colIndex,this.currentFocusCell.rowIndex=a.rowIndex):this.currentFocusCell=null};b.prototype.onWindowKeyDown=function(a){this.isEnabled&&
this.isKeyboardActive&&a.preventDefault();this.isDragActive&&27==a.keyCode&&(this.dropMark(a),this.clearDragDropSettings(),this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle&&this.updateScrollRowList())};b.prototype.onWindowKeyUp=function(a){this.isKeyboardActive=!1};b.prototype.getContentSize=function(){return{width:0,height:0}};b.prototype.refresh=function(a){this.clearComponentSelection();for(a=0;a<this.currentSelectedRows.length;a++){var c=this.getRowCurrentIndex(this.currentSelectedRows[a]);
this.isComponentIndexInRange(c)&&(this.rowList[c].state|=integralui_core_1.IntegralUIObjectState.selected)}};b.prototype.suspendLayout=function(){this.allowUpdate=!1};b.prototype.resumeLayout=function(){this.allowUpdate=!0;this.updateLayout()};b.prototype.updateCurrentLayout=function(){};b.prototype.updateLayout=function(){};b.prototype.updateColumnWidth=function(){if(this.isAutoSizeColumnsActive){for(var a=0,c,b,d=0,f=[],h=0;h<this.currentColumnList.length;h++)c=this.getColumnWidth(this.currentColumnList[h].data),
b=this.getColumnWidth(this.currentColumnList[h].data,"min"),c>=b&&(a+=c+this.columnPadding.left+this.columnPadding.right+6,1!=this.currentColumnList[h].data[this.options.columnFields.fixedWidth]&&(d++,f.push(this.currentColumnList[h])));0<d&&(c=this.isVerScrollVisible()?20:0,this.updateColumnWidthByFactor(f,(this.clientRect.width-c-a)/d))}};b.prototype.updateColumnWidthByFactor=function(a,c){var b=0;var d=0;for(var f=[],h=0;h<a.length;h++){var g=this.getColumnWidth(a[h].data);var k=this.getColumnWidth(a[h].data,
"min");1==a[h].data[this.options.columnFields.fixedWidth]&&(k=g);g>=k&&(g+c<=k?(b+=g+c-k,this.setColumnWidth(a[h].data,k),this.updateCellWidth(a[h].data)):(f.push(a[h]),d++))}if(0<d)if(g=b/d,0!=g)this.updateColumnWidthByFactor(f,c+g);else for(h=0;h<f.length;h++)g=this.getColumnWidth(f[h].data)+c,this.setColumnWidth(f[h].data,g),this.updateCellWidth(f[h].data)};b.prototype.checkWidthChanges=function(){if(this.isAutoSizeColumnsActive){for(var a=0,c,b=0;b<this.currentColumnList.length;b++)c=this.getColumnWidth(this.currentColumnList[b].data),
this.getColumnWidth(this.currentColumnList[b].data,"min"),a+=c+this.columnPadding.left+this.columnPadding.right+6;b=this.isVerScrollVisible()?20:0;c=this.clientRect.width-b-a-2;if(0<c)for(b=this.currentColumnList.length-1;0<=b;b--)if(a=this.currentColumnList[b].data,!this.isColumnWidthFixed(a)){c=this.getColumnWidth(a)+c;this.setColumnWidth(a.data,c);this.updateCellWidth(a.data);break}}};b.prototype.updateCellWidth=function(a){for(var c=this.getRowList(a[this.options.columnFields.fixed]),b=0;b<c.length;b++){var d=
c[b],f=this.isColumnFixed(a),h=this.getColumnCurrentIndex(a);h=f?h:h-this.viewIndexRange.left;for(f=0;f<d.cells.length;f++)if(d.cells[f].colIndex==h){h=this.getCellWidth(d,a);if(this.getColumnIndex(a)==this.expandColIndex){var g=this.getColumnWidth(a);g=0<g?g:this.columnPadding.left;d.cells[f].indent=0==h?g:this.getRowIndent(d,a)}d.cells[f].width=h;break}}};b.prototype.updateRange=function(){};b.prototype.getBlockBottomPos=function(){var a=this.isHorScrollVisible()?16:0;this.isPaginationEnabled()&&
(a+=this.paginatorHeight);return a};b.prototype.getBlockRightPos=function(){return this.isVerScrollVisible()?16:0};b.prototype.onCtrlMouseEnter=function(a){this.isEnabled&&1==a.buttons&&this.cloneElem&&(this.cloneElem.style.display="block");this.elemRenderer.setElementStyle(this.elemRef.nativeElement,"cursor","default")};b.prototype.onCtrlMouseLeave=function(a){this.isEnabled&&1==a.buttons&&this.cloneElem&&(this.cloneElem.style.display="none");this.stopScrollTimer()};b.prototype.currentPage=function(a){this.currentPageNumber!=
a&&1<=a&&a<=this.pageList.length&&(this.currentPageNumber=a,this.updateCurrentLayout());return this.currentPageNumber};b.prototype.getMaxPages=function(){return this.pageList?this.pageList.length:0};b.prototype.firstPage=function(){1!=this.currentPageNumber&&(this.currentPageNumber=1,this.updateCurrentLayout())};b.prototype.lastPage=function(){this.currentPageNumber!=this.pageList.length&&(this.currentPageNumber=this.pageList.length,this.updateCurrentLayout())};b.prototype.nextPage=function(){this.currentPageNumber<
this.pageList.length&&(this.currentPageNumber++,this.updateCurrentLayout())};b.prototype.prevPage=function(){1<this.currentPageNumber&&(this.currentPageNumber--,this.updateCurrentLayout())};b.prototype.resetPageNumber=function(){this.currentPageNumber=1};b.prototype.updatePageNumber=function(){this.currentPageNumber>this.pageList.length&&(0==this.pageList.length?this.resetPageNumber():this.currentPageNumber=this.pageList.length)};b.prototype.updatePaging=function(a){this.options.paging=a?{enabled:this.commonService.isFieldAvailable(a.enabled,
!1),showControlPanel:this.commonService.isFieldAvailable(a.showControlPanel,!0),pageSize:this.commonService.isFieldAvailable(a.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};b.prototype.paginatorPageChanged=function(a){this.currentPageNumber=a.value;this.updateCurrentLayout();this.pageChanged.emit({page:this.currentPageNumber,maxPages:this.getMaxPages(),pageSize:this.options.paging.pageSize})};b.prototype.isPaginationEnabled=function(){return this.options.paging.enabled&&this.options.paging.showControlPanel};
b.prototype.getColumnOpacity=function(a){return this.columnReorderActive&&a.data==this.reorderColumn&&this.isGridHovered?0:1};b.prototype.updateOrignalScrollColumnList=function(){for(var a=this.originalScrollColumnList.length=0;a<this.scrollColumnList.length;a++)this.originalScrollColumnList.push(this.scrollColumnList[a])};b.prototype.updateReorderColumnPos=function(){if(this.reorderColumn){for(var a=0,c,b=0;b<this.originalScrollColumnList.length&&this.originalScrollColumnList[b]!=this.reorderColumnObj;b++)c=
this.getColumnWidth(this.originalScrollColumnList[b].data),a+=c+this.columnPadding.left+this.columnPadding.right+6;this.reorderColumnObjPos.left=a+this.reorderColumnCurrentPos.left-this.reorderColumnStartPos.left;var d=this.getHeaderRect();this.reorderNewColIndex=this.reorderColIndex=this.getColumnIndexFromScrollList(this.reorderColumn);for(b=a=0;b<this.originalScrollColumnList.length;b++)if(c=this.getColumnWidth(this.originalScrollColumnList[b].data)+this.columnPadding.left+this.columnPadding.right+
6,a+=c,0!=this.originalScrollColumnList[b].data[this.options.columnFields.allowDrop]&&this.reorderColumnCurrentPos.left-d.left<a){this.reorderNewColIndex=b;break}this.reorderColIndex!=this.reorderNewColIndex&&this.moveObject(this.reorderColIndex,this.reorderNewColIndex,this.scrollColumnList)}};b.prototype.getHeaderRect=function(){return{top:0,right:0,bottom:0,left:0,height:0,width:0,x:0,y:0}};b.prototype.resetReorderColumnSettings=function(){this.reorderColumn=this.reorderColumnObj=null;this.startColumnReorder=
this.columnReorderActive=!1};b.prototype.restoreColumnOrder=function(){if(0<this.originalScrollColumnList.length)for(var a=this.scrollColumnList.length=0;a<this.originalScrollColumnList.length;a++)this.scrollColumnList.push(this.originalScrollColumnList[a])};b.prototype.getColumnIndexFromScrollList=function(a){for(var b=-1,e=0;e<this.scrollColumnList.length;e++)if(this.scrollColumnList[e].data==a){b=e;break}return b};b.prototype.moveObject=function(a,b,e){this.isIndexInRange(a,e)&&this.isIndexInRange(b,
e)&&e.splice(b,0,e.splice(a,1)[0])};b.prototype.scrollPos=function(a){a&&(this.currentScrollPos={x:Math.max(0,Math.min(a.x,this.maxScrollPos.x)),y:Math.max(0,Math.min(a.y,this.maxScrollPos.y))});return{x:Math.floor(this.currentScrollPos.x),y:Math.floor(this.currentScrollPos.y)}};b.prototype.changeHorizontalScrollPos=function(a){this.blockHoverRect.top=-9999999;this.currentScrollPos.x=Math.max(0,Math.min(a,this.maxScrollPos.x));this.currentScrollPos.x!=this.prevScrollPos.x&&(this.updateRange(),this.scrollPosChanged.emit({value:this.scrollPos()}),
this.prevScrollPos.x=this.currentScrollPos.x)};b.prototype.changeVerticalScrollPos=function(a){this.blockHoverRect.top=-9999999;this.currentScrollPos.y=Math.max(0,Math.min(a,this.maxScrollPos.y));this.currentScrollPos.y!=this.prevScrollPos.y&&(this.updateView(),this.scrollPosChanged.emit({value:this.scrollPos()}),this.prevScrollPos.y=this.currentScrollPos.y)};b.prototype.gridMouseWheel=function(a){a.preventDefault();this.hideCalendar();this.hideDropList();if(this.isEnabled){this.hoverRow=null;var b=
Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),e=5;switch(this.mouseWheelSpeed){case integralui_core_1.IntegralUISpeedMode.VerySlow:e=15;break;case integralui_core_1.IntegralUISpeedMode.Slow:e=9;break;case integralui_core_1.IntegralUISpeedMode.Fast:e=3;break;case integralui_core_1.IntegralUISpeedMode.VeryFast:e=1}this.isVerScrollVisible()&&(e=Math.floor(this.clientRect.height/e),this.mouseWheelSpeed==integralui_core_1.IntegralUISpeedMode.VerySlow&&0<this.avgRowHeight&&(e=this.avgRowHeight),this.changeVerticalScrollPos(this.currentScrollPos.y+
e*b*-1))}a.stopPropagation()};b.prototype.isVerScrollVisible=function(){return this.isEnabled&&this.options.showScroll.vertical&&0<this.scrollSize.height?!0:!1};b.prototype.isHorScrollVisible=function(){return this.isEnabled&&this.options.showScroll.horizontal&&0<this.scrollSize.width?!0:!1};b.prototype.onVerticalScrollStart=function(a){this.hoverRow=null;this.isScrollActive=!0};b.prototype.onVerticalScrollEnd=function(a){this.isScrollActive=!1};b.prototype.onVerticalScrollChanged=function(a){this.changeVerticalScrollPos(a.value)};
b.prototype.onHorizontalScrollStart=function(a){this.hoverRow=null;this.isScrollActive=!0};b.prototype.onHorizontalScrollEnd=function(a){this.isScrollActive=!1;this.refresh()};b.prototype.onHorizontalScrollChanged=function(a){this.currentScrollPos.x=a.value;this.scrollPosChanged.emit({value:this.scrollPos()});var b=this,e=setTimeout(function(){b.updateRange();clearTimeout(e)},1)};b.prototype.updateView=function(a){this.currentIndex=0<this.avgRowHeight?Math.floor(this.currentScrollPos.y/this.avgRowHeight):
0;this.currentIndex!=this.prevIndex&&(this.updateScrollRowList(a),this.prevIndex=this.currentIndex)};b.prototype.processScroll=function(a,b,e){if(this.isEnabled)if(this.isVerScrollVisible()){var c=this.commonService.getShiftPos();a=this.commonService.getMousePos(a);a.x-=c.x;a.y-=c.y;c=this.commonService.getPageRect(this.elemRef.nativeElement.firstElementChild);b=c.top+this.currentHeaderHeight+(b?b:0)+25;e=c.bottom-this.currentFooterHeight-(e?e:0)-25;this.isHorScrollVisible()&&(e-=16);a.y<b&&0<this.currentScrollPos.y?
this.startScrollTimer(!1):a.y>e&&this.currentScrollPos.y<this.maxScrollPos.y?this.startScrollTimer(!0):this.stopScrollTimer()}else this.stopScrollTimer()};b.prototype.startScrollTimer=function(a,b){var c=this;c.removeDropMark();c.isScrollTimerActive||(c.accelerator=.5,c.scrollCount=0,c.isScrollTimerActive=!0,c.scrollTimerID=setInterval(function(){c.scrollTimerElapsed(a)},b?b:100))};b.prototype.stopScrollTimer=function(){this.scrollTimerID&&(clearInterval(this.scrollTimerID),this.scrollTimerID=null);
this.accelerator=.5;this.scrollCount=0;this.isScrollTimerActive=!1};b.prototype.scrollTimerElapsed=function(a){var b=this.currentScrollPos;0===this.scrollCount&&(this.scrollCount=5);this.scrollCount+=5;this.accelerator+=.5;var e=this.scrollCount+=Math.floor(this.accelerator);this.currentScrollPos.y=a?this.currentScrollPos.y+e>this.maxScrollPos.y?this.maxScrollPos.y:this.currentScrollPos.y+e:0>this.currentScrollPos.y-e?0:this.currentScrollPos.y-e;(0>=b.y||this.currentScrollPos.y<b.y)&&this.stopScrollTimer()};
b.prototype.scrollTo=function(a){a&&(a=this.getRowCurrentIndex(a),0<=a&&this.scrollPos({x:this.currentScrollPos.x,y:this.avgRowHeight*(a+1-this.visibleRange/2)}),this.updateLayout())};b.prototype.findRowById=function(a){return this.dataService.findObjectById(a,this.rowDataKey)};b.prototype.findRowByText=function(a){return this.dataService.findObjectByText(a,this.rowDataKey)};b.prototype.clearSelection=function(){this.clearPrevSelection();this.refresh()};b.prototype.processColumnSelection=function(a,
b,e){if(b)0!=b[this.options.columnFields.canSelect]&&(a=!0,this.currentSelectedColumn&&(a=!this.commonService.isEqual(this.currentSelectedColumn[this.options.columnFields.id],b[this.options.columnFields.id])),e={cancel:!1,obj:b},this.beforeSelect.emit(e),a&&1!=e.cancel&&(this.currentSelectedColumn&&(this.currentSelectedColumn[this.options.columnFields.selected]=!1,this.refresh(this.currentSelectedColumn)),this.currentSelectedColumn=b,b[this.options.columnFields.selected]=!0,this.refresh(b),this.callAfterSelectEvent(b)));
else return this.currentSelectedColumn};b.prototype.clearComponentSelection=function(){this.rowList.forEach(function(a){return a.state&=~integralui_core_1.IntegralUIObjectState.selected})};b.prototype.clearPrevSelection=function(a){for(var b=0;b<this.currentSelectedRows.length;b++)a&&!this.commonService.isEqual(this.currentSelectedRows[b][this.options.rowFields.id],a[this.options.rowFields.id])?this.currentSelectedRows[b][this.options.rowFields.selected]=!1:a||(this.currentSelectedRows[b][this.options.rowFields.selected]=
!1);this.currentSelectedRows.length=0;a&&this.isRowEnabled(a)&&this.currentSelectedRows.push(a)};b.prototype.isRowInSelectionList=function(a){var b=!1,e=this.currentSelectedRows;if(a&&e)for(var d=0;d<e.length;d++)if(this.commonService.isEqual(e[d][this.options.rowFields.id],a[this.options.rowFields.id])){b=!0;break}return b};b.prototype.processRowSelection=function(a,b,e){if(b&&this.selectionMode!=integralui_core_1.IntegralUISelectionMode.None&&0!=b[this.options.rowFields.canSelect]){var c=0<this.currentSelectedRows.length;
if(this.isRowEnabled(b)){var f=this.currentSelectedRow,h=!0;f&&(h=a&&(a.ctrlKey||a.metaKey)||!this.commonService.isEqual(f[this.options.rowFields.id],b[this.options.rowFields.id])||0==f[this.options.rowFields.selected]);var g={cancel:!1,obj:b};this.beforeSelect.emit(g);if(1!=g.cancel)if(g=a&&(a.shiftKey||a.ctrlKey||a.metaKey)?!0:!1,h){this.selectionMode==integralui_core_1.IntegralUISelectionMode.MultiExtended&&(h=!this.isRowInSelectionList(b)||!g||a&&a.shiftKey);h&&(this.selectionMode==integralui_core_1.IntegralUISelectionMode.One?
this.clearPrevSelection():a&&a.shiftKey?this.clearPrevSelection():g||this.selectionMode==integralui_core_1.IntegralUISelectionMode.MultiSimple||1!=this.currentSelectedRows.length&&this.isRowInSelectionList(b)||this.clearPrevSelection());this.currentSelectedRow=b;if(a&&a.shiftKey&&this.selectionMode!=integralui_core_1.IntegralUISelectionMode.One){if(this.shiftFirstSelectedRow||(this.shiftFirstSelectedRow=f),a=this.getRowCurrentIndex(this.shiftFirstSelectedRow),e=this.getRowCurrentIndex(b),a>e&&(c=
a,a=e,e=c),this.isIndexInRange(a,this.currentRowList)&&this.isIndexInRange(e,this.currentRowList))for(;a<=e;a++)0!=this.currentRowList[a].data[this.options.rowFields.canSelect]&&(this.currentRowList[a].data[this.options.rowFields.selected]=!0,this.currentSelectedRows.push(this.currentRowList[a].data))}else g||this.selectionMode==integralui_core_1.IntegralUISelectionMode.MultiSimple?(a=null==b[this.options.rowFields.selected]||"undefined"==b[this.options.rowFields.selected]?!1:b[this.options.rowFields.selected],
b[this.options.rowFields.selected]=!a,b[this.options.rowFields.selected]?this.isRowInSelectionList(b)||this.currentSelectedRows.push(b):this.currentSelectedRows=this.currentSelectedRows.filter(function(a){return a!=b})):(b[this.options.rowFields.selected]=!0,this.isRowInSelectionList(b)||this.currentSelectedRows.push(b)),this.shiftFirstSelectedRow=null;this.callAfterSelectEvent(b);this.refresh()}else g||this.selectionMode==integralui_core_1.IntegralUISelectionMode.MultiSimple?(a=null===b[this.options.rowFields.selected]||
"undefined"==b[this.options.rowFields.selected]?!1:b[this.options.rowFields.selected],e&&"undefined"!=e&&(a=e),b[this.options.rowFields.selected]=!a,b[this.options.rowFields.selected]?this.isRowInSelectionList(b)||this.currentSelectedRows.push(b):this.currentSelectedRows=this.currentSelectedRows.filter(function(a){return a!=b}),this.shiftFirstSelectedRow=null,this.callAfterSelectEvent(b),this.refresh()):g||this.selectionMode&integralui_core_1.IntegralUISelectionMode.MultiSimple||1!=this.currentSelectedRows.length&&
this.isRowInSelectionList(b)||(this.shiftFirstSelectedRow=null,this.clearPrevSelection(b),this.refresh(),c&&this.selectionChanged.emit(null))}else this.clearPrevSelection(),this.currentSelectedRow=null,this.refresh(),c&&this.selectionChanged.emit(null)}};b.prototype.selectRows=function(a){if(a&&Array.isArray(a)){for(var b=this.currentSelectedRows.length=0;b<a.length;b++)a[b][this.options.rowFields.selected]=!0,this.currentSelectedRows.push(a[b]);0<a.length?(this.currentSelectedRow=a[a.length-1],this.callAfterSelectEvent(this.currentSelectedRow)):
this.currentSelectedRow=null;this.refresh()}};b.prototype.updateRowSelection=function(a,b){var c=a&&(a.shiftKey||a.ctrlKey||a.metaKey)?!0:!1;this.selectionMode==integralui_core_1.IntegralUISelectionMode.MultiExtended&&0!=b[this.options.rowFields.canSelect]&&0<this.currentSelectedRows.length&&!a.shiftKey&&!c&&1==a.which&&(c=this.currentSelectedRows.length,this.clearPrevSelection(),this.currentSelectedRow=b,b[this.options.rowFields.selected]=!0,this.currentSelectedRows.push(b),1<c&&this.callAfterSelectEvent(b),
this.refresh())};b.prototype.sort=function(a,b,e){this.sortColumn=a;this.sortComparer=e;this.options.sorting=b;this.updateLayout();this.change.emit({type:"sorting"})};b.prototype.getCellIndexInCollection=function(a,b,e){var c=-1;if(a)for(var f=0;f<a.length;f++)if(void 0==a[f][this.options.cellFields.cid]){c=b;break}else if(a[f][this.options.cellFields.cid]==e){c=f;break}return c};b.prototype.isSortingAllowed=function(){return this.options.sorting==integralui_core_1.IntegralUISortOrder.Ascending||
this.options.sorting==integralui_core_1.IntegralUISortOrder.Descending};b.prototype.isSortingColumn=function(a){return a&&a==this.sortColumn?!0:!1};b.prototype.applySorting=function(a){var b=this;if(a&&(!b.sortColumn||0!=b.sortColumn[b.options.columnFields.visible])){var e=b.getColumnCurrentIndex(b.sortColumn),d=0<=e?e:b.options.expandColIndex;if(d<b.currentColumnList.length){var f=b.currentColumnList[d].data[b.options.columnFields.id];b.sortColumn&&b.sortColumn[b.options.columnFields.comparer]?a.sort(b.sortColumn[b.options.columnFields.comparer]):
b.sortComparer?a.sort(b.sortComparer):b.isSortingAllowed()&&a.sort(function(a,c){var e=null,g=null;if(a[b.options.rowFields.cells]){var h=b.getCellIndexInCollection(a[b.options.rowFields.cells],d,f);0<=h&&((e=a[b.options.rowFields.cells][h][b.options.cellFields.value])||(e=a[b.options.rowFields.cells][h][b.options.cellFields.text]),b.commonService.isObject(e)&&(e=e.value?e.value:e.text))}c[b.options.rowFields.cells]&&(h=b.getCellIndexInCollection(c[b.options.rowFields.cells],d,f),0<=h&&((g=c[b.options.rowFields.cells][h][b.options.cellFields.value])||
(g=c[b.options.rowFields.cells][h][b.options.cellFields.text]),b.commonService.isObject(g)&&(g=g.value?g.value:g.text)));e=void 0!=e?e:null;g=void 0!=g?g:null;switch(b.options.sorting){case integralui_core_1.IntegralUISortOrder.Ascending:if(e<g)return-1;if(e>g)return 1;break;case integralui_core_1.IntegralUISortOrder.Descending:if(e>g)return-1;if(e<g)return 1;break;default:return 0}})}}};b.prototype.getColumnInlineStyle=function(a){var b={header:"",footer:""};a&&(b={header:this.commonService.isFieldAvailable(a.header,
""),footer:this.commonService.isFieldAvailable(a.footer,"")});return b};b.prototype.getRowInlineStyle=function(a,b){var c=a||{};b&&(c.display="none");return c};b.prototype.columnTouchStart=function(a,b){this.isEnabled&&this.processColumnSelection(a,b.data);a.stopPropagation()};b.prototype.rowTouchStart=function(a,b){this.isEnabled&&this.processRowSelection(a,b.data)};b.prototype.ctrlTouchStart=function(a){a.preventDefault();this.isEnabled&&(a=this.commonService.getTouchData(a))&&0<a.length&&(this.touchStartPos=
{x:a[0].pageX,y:a[0].pageY})};b.prototype.ctrlTouchEnd=function(a){var b=this;if(b.isEnabled){(a=b.commonService.getTouchData(a))&&0<a.length&&(b.touchEndPos={x:a[0].pageX,y:a[0].pageY});var e=b.touchEndPos.x-b.touchStartPos.x,d=b.touchEndPos.y-b.touchStartPos.y,f=!1,h=!1,g=b.touchStartPos,k=b.currentScrollPos.x,l=b.currentScrollPos.y,m=setInterval(function(){var a=b.currentScrollPos;-20>e?(g.x-=30,g.x>b.touchEndPos.x?a.x+=30:(a.x=k-e,f=!0)):20<e?(g.x+=30,g.x<b.touchEndPos.x?a.x-=30:(a.x=k-e,f=!0)):
f=!0;-20>d?(g.y-=25,g.y>b.touchEndPos.y?a.y+=25:(a.y=l-d,h=!0)):20<d?(g.y+=25,g.y<b.touchEndPos.y?a.y-=25:(a.y=l-d,h=!0)):h=!0;b.scrollPos(a);f&&h&&clearInterval(m)},5);b.touchStartPos=b.touchEndPos}};__decorate([core_1.Input(),__metadata("design:type",Object)],b.prototype,"appRef",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean)],b.prototype,"autoUpdate",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,
"allowColumnReorder",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"allowDrag",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"allowDrop",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"allowFilter",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",
[Boolean])],b.prototype,"allowFocus",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"autoSizeColumns",null);__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],b.prototype,"columns",null);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],b.prototype,"dataFields",null);__decorate([core_1.Input(),__metadata("design:type",Object),
__metadata("design:paramtypes",[Object])],b.prototype,"focusedCell",null);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"footerHeight",void 0);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"gridLines",null);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"headerHeight",void 0);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"mouseWheelSpeed",void 0);__decorate([core_1.Input(),
__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],b.prototype,"paging",null);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"rowHeight",void 0);__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],b.prototype,"rows",null);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],b.prototype,"selectedColumn",null);__decorate([core_1.Input(),__metadata("design:type",
Object),__metadata("design:paramtypes",[Object])],b.prototype,"selectedRow",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"selectionMode",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"showExpandBox",null);__decorate([core_1.Input(),__metadata("design:type",Boolean)],b.prototype,"showHoverRow",void 0);__decorate([core_1.Input(),__metadata("design:type",
Object),__metadata("design:paramtypes",[Object])],b.prototype,"showScroll",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"sorting",null);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"afterSelect",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"beforeEdit",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],
b.prototype,"beforeSelect",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"beforeUpdate",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"cellClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"cellDblClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"cellHover",void 0);__decorate([core_1.Output(),__metadata("design:type",
core_1.EventEmitter)],b.prototype,"cellRightClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"cellValueChanging",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"cellValueChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"change",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnAdding",void 0);
__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnAdded",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnDblClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnHover",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],
b.prototype,"columnRightClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnOrderChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnRemoving",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnRemoved",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnsCleared",void 0);__decorate([core_1.Output(),
__metadata("design:type",core_1.EventEmitter)],b.prototype,"columnSizeChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragEnd",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragEnter",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragDrop",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragDropComplete",
void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragLeave",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragOver",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"dragStart",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"keyDown",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],
b.prototype,"keyPress",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"keyUp",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"pageChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowAdding",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowAdded",void 0);__decorate([core_1.Output(),__metadata("design:type",
core_1.EventEmitter)],b.prototype,"rowClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowDblClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowHover",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowRemoving",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowRemoved",void 0);__decorate([core_1.Output(),
__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowRightClick",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"rowsCleared",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"loadComplete",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"scrollPosChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,
"selectionChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"updateComplete",void 0);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"dragMode",void 0);__decorate([core_1.HostListener("document:keydown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowKeyDown",null);__decorate([core_1.HostListener("document:keyup",["$event"]),
__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowKeyUp",null);return b=__decorate([core_1.Component({selector:"iui-basegrid",template:"",providers:[integralui_data_service_1.IntegralUIDataService]}),__metadata("design:paramtypes",[integralui_data_service_1.IntegralUIDataService,integralui_dragdrop_service_1.IntegralUIDragDropService,core_1.ElementRef,core_1.Renderer,integralui_common_service_1.IntegralUICommonService,
integralui_filter_service_1.IntegralUIFilterService,core_1.ChangeDetectorRef,core_1.ComponentFactoryResolver])],b)}(integralui_core_1.IntegralUIBaseComponent);exports.IntegralUIBaseGrid=IntegralUIBaseGrid;