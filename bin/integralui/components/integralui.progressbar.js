/*
  filename: integralui.progressbar.js
  version : 1.3.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),forms_1=require("@angular/forms"),i0=require("@angular/core"),i1=require("../services/integralui.common.service"),i2=require("@angular/common");
function IntegralUIProgressBar_div_2_Template(d,b){d&1&&i0.\u0275\u0275element(0,"div",1);if(d&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275property("ngClass",a.getContentClass())("ngStyle",a.getProgressFadingStyle())}}
var IntegralUIProgressBar=function(d){function b(a,b){var c=d.call(this,a,b)||this;c.elemRef=a;c.commonService=b;c.ctrlPadding={top:0,right:0,bottom:0,left:0};c.currentOrientation=integralui_core_1.IntegralUIOrientation.Horizontal;c.contentSize={width:0,height:0};c.fadingSize={width:0,height:0};c.orientationChanged=new core_1.EventEmitter;c.delayTimeout=null;return c}__extends(b,d);Object.defineProperty(b.prototype,"orientation",{get:function(){return this.currentOrientation},set:function(a){this.currentOrientation!=
a&&(this.currentOrientation=a,this.updateLayout(),this.orientationChanged.emit(null))},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.generalClassName="iui-progressbar";this.contentClassName=this.generalClassName+"-content";this.initStyle()};b.prototype.ngAfterViewInit=function(){this.updateLayout()};b.prototype.ngOnDestroy=function(){this.removeDelayTimeout()};b.prototype.ngAfterContentChecked=function(){1==this.autoUpdate&&(this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,
height:this.elemRef.nativeElement.firstElementChild.clientHeight},this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),this.prevClientRect.height=this.clientRect.height))};b.prototype.animateProgress=function(){var a=this,c=a.currentOrientation==integralui_core_1.IntegralUIOrientation.Horizontal?100>a.currentValue?Math.floor(a.clientRect.width*a.currentValue/100):
a.clientRect.width:100>a.currentValue?Math.floor(a.clientRect.height*a.currentValue/100):a.clientRect.height;if(a.allowAnimation){var b=setInterval(function(){a.currentOrientation==integralui_core_1.IntegralUIOrientation.Horizontal?a.contentSize.width<c?a.contentSize.width+=3:(a.contentSize.width=c,clearInterval(b)):a.contentSize.height<c?a.contentSize.height+=3:(a.contentSize.height=c,clearInterval(b))},1);a.removeDelayTimeout();a.delayTimeout=setTimeout(function(){var b=setInterval(function(){a.currentOrientation==
integralui_core_1.IntegralUIOrientation.Horizontal?a.fadingSize.width>c?a.fadingSize.width-=3:(a.fadingSize.width=c,clearInterval(b)):a.fadingSize.height>c?a.fadingSize.height-=3:(a.fadingSize.height=c,clearInterval(b))},1);clearTimeout(a.delayTimeout)},500)}else a.currentOrientation==integralui_core_1.IntegralUIOrientation.Horizontal?a.contentSize.width=c:a.contentSize.height=c};b.prototype.removeDelayTimeout=function(){this.delayTimeout&&clearTimeout(this.delayTimeout)};b.prototype.processValueChange=
function(){this.updateLayout()};b.prototype.updateLayout=function(){var a=this,b=setTimeout(function(){a.ctrlPadding=a.commonService.getPadding(a.elemRef.nativeElement.firstElementChild);a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth-(a.ctrlPadding.left+a.ctrlPadding.right),height:a.elemRef.nativeElement.firstElementChild.clientHeight-(a.ctrlPadding.top+a.ctrlPadding.bottom)};a.animateProgress();clearTimeout(b)},1)};b.prototype.getControlStyle=function(){var a={};0<this.ctrlSize.width&&
(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};b.prototype.getProgressStyle=function(){var a={"z-index":2};this.currentOrientation==integralui_core_1.IntegralUIOrientation.Horizontal?a.width=this.contentSize.width+"px":(a.position="absolute",a.bottom="-1px",a.height=this.contentSize.height+"px");return a};b.prototype.getProgressFadingStyle=function(){var a={opacity:"0.25",position:"absolute","z-index":1};this.currentOrientation==integralui_core_1.IntegralUIOrientation.Horizontal?
(a.left=this.ctrlPadding.left+"px",a.top=this.ctrlPadding.top+"px",a.width=this.fadingSize.width+"px"):(a.left=this.ctrlPadding.left+"px",a.bottom=this.ctrlPadding.bottom-1+"px",a.height=this.fadingSize.height+"px");return a};b.\u0275fac=function(a){return new (a||b)(i0.\u0275\u0275directiveInject(i0.ElementRef),i0.\u0275\u0275directiveInject(i1.IntegralUICommonService))};b.\u0275cmp=i0.\u0275\u0275defineComponent({type:b,selectors:[["iui-progressbar"]],inputs:{autoUpdate:"autoUpdate",controlStyle:"controlStyle",
data:"data",enabled:"enabled",name:"name",size:"size",state:"state",value:"value",orientation:"orientation"},outputs:{valueChanged:"valueChanged",orientationChanged:"orientationChanged"},features:[i0.\u0275\u0275ProvidersFeature([{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return b}),multi:!0}]),i0.\u0275\u0275InheritDefinitionFeature],decls:3,vars:5,consts:[["draggable","true",3,"ngClass","ngStyle","dragstart"],[3,"ngClass","ngStyle"],[3,"ngClass","ngStyle",4,"ngIf"]],
template:function(a,b){a&1&&(i0.\u0275\u0275elementStart(0,"div",0),i0.\u0275\u0275listener("dragstart",function(a){return b.preventDragStart(a)}),i0.\u0275\u0275element(1,"div",1),i0.\u0275\u0275template(2,IntegralUIProgressBar_div_2_Template,1,2,"div",2),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",b.getControlClass())("ngStyle",b.getControlStyle()),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngClass",b.getContentClass())("ngStyle",b.getProgressStyle()),i0.\u0275\u0275advance(1),
i0.\u0275\u0275property("ngIf",b.allowAnimation))},directives:[i2.NgClass,i2.NgStyle,i2.NgIf],encapsulation:2});return b}(integralui_core_1.IntegralUIBaseValueComponent);exports.IntegralUIProgressBar=IntegralUIProgressBar;
(function(){i0.\u0275setClassMetadata(IntegralUIProgressBar,[{type:core_1.Component,args:[{selector:"iui-progressbar",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()" draggable="true" (dragstart)="preventDragStart($event)">\n\t\t\t<div [ngClass]="getContentClass()" [ngStyle]="getProgressStyle()"></div>\n\t\t\t<div *ngIf="allowAnimation" [ngClass]="getContentClass()" [ngStyle]="getProgressFadingStyle()"></div>\n\t\t</div>\n\t',inputs:"autoUpdate controlStyle data enabled name size state value".split(" "),
outputs:["valueChanged"],providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return IntegralUIProgressBar}),multi:!0}],encapsulation:core_1.ViewEncapsulation.None}]}],function(){return[{type:i0.ElementRef},{type:i1.IntegralUICommonService}]},{orientation:[{type:core_1.Input}],orientationChanged:[{type:core_1.Output}]})})();