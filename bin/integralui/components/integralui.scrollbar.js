/*
  filename: integralui.scrollbar.js
  version : 1.5.0
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return function(c,a){function b(){this.constructor=c}e(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),IntegralUIScrollBar=function(e){function c(a,b,c){var d=e.call(this,c)||this;d.elemRef=a;d.elemRenderer=b;d.commonService=c;d.currentMaxValue=0;d.currentMinValue=0;d.currentValue=0;d.currentSplitterDistance={x:0,y:0};d.emptySpace=0;d.maxPos={x:0,y:0};d.scrollPos={top:0,right:0,bottom:0,left:0};d.scrollSize={width:0,height:0};d.thumbSize={width:0,
height:0};d.thumbPos={x:2,y:20};d.smallChange=0;d.largeChangeValue=0;d.orientation=integralui_core_1.IntegralUIOrientation.Vertical;d.scrollStart=new core_1.EventEmitter;d.scrollEnd=new core_1.EventEmitter;d.valueChanged=new core_1.EventEmitter;d.thumbStartPos={x:0,y:0};d.isThumbActive=!1;d.prevPos={x:0,y:0};d.scrollInterval=null;d.scrollTimeout=null;return d}__extends(c,e);Object.defineProperty(c.prototype,"height",{set:function(a){this.scrollSize.height!=a&&0<=a&&(this.scrollSize.height=a,this.updateLayout())},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"largeChange",{set:function(a){this.largeChangeValue!=a&&0<=a&&(this.largeChangeValue=a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"max",{get:function(){return this.currentMaxValue},set:function(a){this.currentMaxValue!=a&&(this.currentMaxValue=0>=a?1:a,this.currentValue>this.currentMaxValue&&(this.currentValue=this.currentMaxValue),this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"min",{get:function(){return this.currentMinValue},set:function(a){this.currentMinValue!=a&&0<=a&&(this.currentMinValue=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"position",{set:function(a){this.scrollPos=a?{top:this.commonService.isFieldAvailable(a.top,0),right:this.commonService.isFieldAvailable(a.right,0),bottom:this.commonService.isFieldAvailable(a.bottom,0),left:this.commonService.isFieldAvailable(a.left,0)}:{top:0,right:0,bottom:0,left:0}},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"value",{get:function(){return this.currentValue},set:function(a){this.currentValue!=a&&(this.currentValue=a<this.currentMinValue?this.currentMinValue:a>this.currentMaxValue?this.currentMaxValue:a,this.updateLayout(),this.valueChanged.emit({value:this.currentValue}))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{set:function(a){this.scrollSize.width!=a&&0<=a&&(this.scrollSize.width=a,this.updateLayout())},enumerable:!0,
configurable:!0});c.prototype.ngOnInit=function(){this.generalClassName="iui-scrollbar";this.initStyle()};c.prototype.ngAfterViewInit=function(){};c.prototype.ngAfterContentInit=function(){var a=this,b=setTimeout(function(){a.updateLayout();clearTimeout(b)},1)};c.prototype.ngOnDestroy=function(){this.clearScrolling()};c.prototype.isVertical=function(){return this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?!0:!1};c.prototype.getSize=function(){return{width:this.elemRef.nativeElement.firstElementChild.offsetWidth,
height:this.elemRef.nativeElement.firstElementChild.offsetHeight}};c.prototype.setScrollSize=function(a){this.scrollSize=a};c.prototype.updateLayout=function(){if(this.orientation==integralui_core_1.IntegralUIOrientation.Horizontal){0==this.largeChangeValue&&(this.largeChangeValue=this.scrollSize.width);var a=this.scrollSize.width-2;var b=a/(this.currentMaxValue+this.largeChangeValue);b*=this.largeChangeValue;0>=this.currentMaxValue?b=a:7>b&&(b=7);this.thumbSize.width=b;this.emptySpace=a-b;0<this.currentMaxValue&&
(this.thumbPos.x=2+this.currentValue*this.emptySpace/this.currentMaxValue)}else 0==this.largeChangeValue&&(this.largeChangeValue=this.scrollSize.height),a=this.scrollSize.height-2,b=a/(this.currentMaxValue+this.largeChangeValue),b*=this.largeChangeValue,0>=this.currentMaxValue?b=a:7>b&&(b=7),this.thumbSize.height=b,this.emptySpace=a-b,0<this.currentMaxValue&&(this.thumbPos.y=2+this.currentValue*this.emptySpace/this.currentMaxValue)};c.prototype.thumbMouseDown=function(a){if(this.isEnabled){var b=
this.commonService.getShiftPos();this.thumbStartPos={x:a.pageX-b.x,y:a.pageY-b.y};this.isThumbActive=!0;this.prevPos={x:this.value,y:this.value};this.scrollStart.emit({value:this.currentValue})}a.stopPropagation()};c.prototype.onWindowMouseMove=function(a){if(this.isEnabled&&1==a.buttons&&this.isThumbActive){var b=this.commonService.getShiftPos(),c=a.pageX-b.x;a=a.pageY-b.y;b=0;this.orientation==integralui_core_1.IntegralUIOrientation.Horizontal?0<this.emptySpace&&(b=this.prevPos.x+(c-this.thumbStartPos.x)*
this.currentMaxValue/this.emptySpace):0<this.emptySpace&&(b=this.prevPos.y+(a-this.thumbStartPos.y)*this.currentMaxValue/this.emptySpace);this.value=b}};c.prototype.onWindowMouseUp=function(a){this.isEnabled&&(this.isThumbActive=!1,this.prevPos.y=this.currentValue,this.clearScrolling(),this.scrollEnd.emit({value:this.currentValue}))};c.prototype.changeScrollPos=function(a){if(this.isEnabled){var b=this;b.processLargeChange(a);b.clearScrolling();b.scrollTimeout=setTimeout(function(){b.scrollInterval=
setInterval(function(){b.currentValue>b.currentMinValue&&b.currentValue<b.currentMaxValue?b.processLargeChange(a):b.clearScrolling()},100);clearTimeout(b.scrollTimeout)},250)}};c.prototype.processLargeChange=function(a){switch(this.isVertical()?a.offsetY<this.thumbPos.y?1:a.offsetY>this.thumbPos.y+this.thumbSize.height?2:-1:a.offsetX<this.thumbPos.x?1:a.offsetX>this.thumbPos.x+this.thumbSize.width?2:-1){case 1:this.value-=this.largeChangeValue;break;case 2:this.value+=this.largeChangeValue}};c.prototype.clearScrolling=
function(){this.scrollTimeout&&clearTimeout(this.scrollTimeout);this.scrollInterval&&clearInterval(this.scrollInterval);this.scrollInterval=this.scrollTimeout=null};c.prototype.getScrollBarStyle=function(){return this.orientation==integralui_core_1.IntegralUIOrientation.Horizontal?{bottom:this.scrollPos.bottom+"px",left:0,width:this.scrollSize.width+"px"}:{top:this.scrollPos.top+"px",right:0,height:this.scrollSize.height+"px"}};c.decorators=[{type:core_1.Component,args:[{selector:"iui-scrollbar",
template:'\n\t\t<div *ngIf="isVertical()" class="iui-scrollbar-vertical" [ngStyle]="getScrollBarStyle()" (mousedown)="changeScrollPos($event)">\n\t\t\t<div class="iui-scroll-button-thumb-vertical" [ngStyle]="{ top: thumbPos.y + \'px\', height: thumbSize.height + \'px\' }" (mousedown)="thumbMouseDown($event)"></div>\n\t\t</div>\n\t\t<div *ngIf="!isVertical()" class="iui-scrollbar-horizontal" [ngStyle]="getScrollBarStyle()" (mousedown)="changeScrollPos($event)">\n\t\t\t<div class="iui-scroll-button-thumb-horizontal" [ngStyle]="{ left: thumbPos.x + \'px\', width: thumbSize.width + \'px\' }" (mousedown)="thumbMouseDown($event)"></div>\n\t\t</div>\n\t',
inputs:["controlStyle","data","enabled","name","state"],encapsulation:core_1.ViewEncapsulation.None}]}];c.ctorParameters=function(){return[{type:core_1.ElementRef},{type:core_1.Renderer},{type:integralui_common_service_1.IntegralUICommonService}]};c.propDecorators={height:[{type:core_1.Input}],largeChange:[{type:core_1.Input}],max:[{type:core_1.Input}],min:[{type:core_1.Input}],orientation:[{type:core_1.Input}],position:[{type:core_1.Input}],value:[{type:core_1.Input}],width:[{type:core_1.Input}],
scrollStart:[{type:core_1.Output}],scrollEnd:[{type:core_1.Output}],valueChanged:[{type:core_1.Output}],onWindowMouseMove:[{type:core_1.HostListener,args:["document:mousemove",["$event"]]}],onWindowMouseUp:[{type:core_1.HostListener,args:["document:mouseup",["$event"]]}]};return c}(integralui_core_1.IntegralUIBaseComponent);exports.IntegralUIScrollBar=IntegralUIScrollBar;