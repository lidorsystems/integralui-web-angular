/*
  filename: integralui.grid.js
  version : 3.3.211
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var p=function(b,a){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return p(b,a)};return function(b,a){function d(){this.constructor=b}p(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),__decorate=this&&this.__decorate||function(p,b,a,d){var c=arguments.length,f=3>c?b:null===d?d=Object.getOwnPropertyDescriptor(b,a):d,e;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(p,b,a,d);else for(var h=p.length-1;0<=h;h--)if(e=p[h])f=(3>c?e(f):3<c?e(b,a,f):e(b,a))||f;return 3<c&&f&&Object.defineProperty(b,a,f),f},__metadata=this&&this.__metadata||function(p,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(p,b)};Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_base_grid_1=require("./integralui.base.grid"),integralui_common_service_1=require("../services/integralui.common.service"),integralui_data_service_1=require("../services/integralui.data.service"),integralui_dragdrop_service_1=require("../services/integralui.dragdrop.service"),integralui_filter_service_1=require("../services/integralui.filter.service"),integralui_scrollbar_1=require("./integralui.scrollbar"),
IntegralUIGrid=function(p){function b(a,d,c,f,b,h,g,m,n){var e=p.call(this,a,d,c,f,b,h,g)||this;e.dataService=a;e.dragDropService=d;e.elemRef=c;e.elemRenderer=f;e.commonService=b;e.filterService=h;e.changeRef=g;e.cmpResolver=m;e.baseService=n;e.fullList=[];e.expandTimeout=null;e.expandRow=null;e.horScrollOrientation=integralui_core_1.IntegralUIOrientation.Horizontal;e.isGroupPanelHovered=!1;e.isThereChildRows=!1;e.dataGroups=[];e.groupList=[];e.activeGroups=[];e.groupExpandList=[];e.isGroupListItemSelected=
!1;e.groupPanelSize={width:0,height:0};e.groupPanelHeight=0;e.dragGroupSettings={display:"none",top:0,left:0,label:""};e.groupReorderMargin=50;e.reorderGroupWidth=50;e.updateTimer=null;e.templateList=[];e.refreshTimer=null;e.tRef=null;e.autoExpand=!1;e.afterCollapse=new core_1.EventEmitter;e.afterExpand=new core_1.EventEmitter;e.beforeCollapse=new core_1.EventEmitter;e.beforeExpand=new core_1.EventEmitter;e.groupAdding=new core_1.EventEmitter;e.groupAdded=new core_1.EventEmitter;e.groupRemoving=new core_1.EventEmitter;
e.groupRemoved=new core_1.EventEmitter;e.groupOrderChanged=new core_1.EventEmitter;e.groupReorderActive=!1;e.hoverGroup=null;e.reorderGroup=null;e.dragGroupElemSize={width:0,height:0};e.groupCoordinates=[];e.reorderGroupPos=-1;e.updateGrouping(e.grouping);return e}__extends(b,p);Object.defineProperty(b.prototype,"expandColumnIndex",{get:function(){return this.expandColIndex},set:function(a){if(this.expandColIndex!=a){this.expandColIndex=a;if(a=this.getExpandingColumn())this.currentExpandColumnID=
a[this.options.columnFields.id];this.updateLayout()}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"expandColumnID",{get:function(){return this.currentExpandColumnID},set:function(a){this.currentExpandColumnID!=a&&(this.currentExpandColumnID=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"grouping",{get:function(){return this.options.grouping},set:function(a){this.updateGrouping(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"groups",{get:function(){return this.dataGroups},set:function(a){this.dataGroups=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indent",{get:function(){return this.options.indent},set:function(a){this.options.indent!=a&&(this.options.indent=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showHeader",{get:function(){return this.isHeaderVisible},set:function(a){this.isHeaderVisible!=a&&(this.isHeaderVisible=a,this.updateLayout())},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"showFooter",{get:function(){return this.isFooterVisible},set:function(a){this.isFooterVisible!=a&&(this.isFooterVisible=a,this.updateLayout())},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.baseService.setComponent(this);this.updateData();this.generalClassName="iui-grid";this.columnClassName=this.generalClassName+"-column";this.columnHeaderClassName=this.columnClassName+"-header";this.columnBodyClassName=this.columnClassName+
"-body";this.columnFooterClassName=this.columnClassName+"-footer";this.rowClassName=this.generalClassName+"-row";this.cellBorderClassName="iui-grid-lines-both";this.cellClassName=this.rowClassName+"-cell";this.expandBoxClassName=this.generalClassName+"-expand-box";this.gridLinesClassName=this.generalClassName+"-lines";this.sortingClassName="iui-sort";this.initStyle();this.createScrollRowList()};b.prototype.updateData=function(){this.dataService.init([{data:this.columns,fields:this.options.columnFields,
key:this.columnDataKey},{data:this.rows,fields:this.options.rowFields,key:this.rowDataKey}])};b.prototype.initStyle=function(){this.defaultStyle={general:{disabled:this.generalClassName+"-disabled",focused:this.generalClassName+"-focused",normal:this.generalClassName,hovered:this.generalClassName+"-hovered",selected:this.generalClassName+"-selected"},column:{header:{cell:this.columnHeaderClassName+"-cell",disabled:this.columnHeaderClassName+"-disabled",normal:this.columnHeaderClassName,hovered:this.columnHeaderClassName+
"-hovered",selected:this.columnHeaderClassName+"-selected"},body:{cell:this.columnBodyClassName+"-cell",disabled:this.columnBodyClassName+"-disabled",normal:this.columnBodyClassName,hovered:this.columnBodyClassName+"-hovered",selected:this.columnBodyClassName+"-selected"},footer:{cell:this.columnFooterClassName+"-cell",disabled:this.columnFooterClassName+"-disabled",normal:this.columnFooterClassName,hovered:this.columnFooterClassName+"-hovered",selected:this.columnFooterClassName+"-selected"},sorting:{normal:{ascending:this.sortingClassName+
"-ascending",descending:this.sortingClassName+"-descending"},selected:{ascending:this.sortingClassName+"-ascending-selected",descending:this.sortingClassName+"-descending-selected"}}},row:{general:{disabled:this.rowClassName+"-disabled",focused:this.rowClassName+"-focused",normal:this.rowClassName,hovered:this.rowClassName+"-hovered",selected:this.rowClassName+"-selected"},expandBox:{general:this.expandBoxClassName,load:this.expandBoxClassName+"-load",expanded:this.expandBoxClassName+"-open",collapsed:this.expandBoxClassName+
"-close"},cell:{disabled:this.cellClassName+"-disabled",focused:this.cellClassName+"-focused",normal:this.cellClassName,hovered:this.cellClassName+"-hovered",selected:this.cellClassName+"-selected"}},gridLines:{none:this.gridLinesClassName+"-none",horizontal:this.gridLinesClassName+"-horizontal",vertical:this.gridLinesClassName+"-vertical",both:this.gridLinesClassName+"-both"}};this.updateStyle(this.controlStyle);this.refresh()};b.prototype.ngAfterViewInit=function(){var a=this,d=setTimeout(function(){var c=
a.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUITComponent);c&&a.contentRef&&(a.tRef=a.contentRef.createComponent(c));clearTimeout(d)},100);a.updateLayout()};b.prototype.ngAfterContentInit=function(){this.templateList=this.templates.toArray();this.isSelectedTemplatePresent=this.isHoverTemplatePresent=!1;for(var a=0;a<this.templateList.length;a++)if(this.templateList[a].settings)switch(this.templateList[a].settings.type){case "header":this.headerData.push(this.templateList[a].getTemplate());
break;case "row":this.rowData.push(this.templateList[a].getTemplate());break;case "row-hover":this.rowHoverData.push(this.templateList[a].getTemplate());this.isHoverTemplatePresent=!0;break;case "row-select":this.rowSelectData.push(this.templateList[a].getTemplate());this.isSelectedTemplatePresent=!0;break;case "cell":this.cellData.push(this.templateList[a].getTemplate());break;case "footer":this.footerData.push(this.templateList[a].getTemplate())}};b.prototype.ngOnDestroy=function(){this.expandTimeout&&
clearTimeout(this.expandTimeout);this.removeCalendar();this.removeDropList();this.removeDropMark();this.resetLayoutTimer();this.tRef&&this.tRef.destroy()};b.prototype.ngAfterContentChecked=function(){1==this.autoUpdate&&(this.groupPanelHeight=this.groupingPanelElem?this.groupingPanelElem.nativeElement.offsetHeight:0,this.groupPanelSize.height=this.groupingPanelElem?this.groupingPanelElem.nativeElement.offsetHeight:0,this.paginatorHeight=this.paginatorElem?this.paginatorElem.nativeElement.offsetHeight:
0,this.paginatorPos.top=this.elemRef.nativeElement.firstElementChild.clientHeight-this.paginatorHeight+1,this.horScrollElemPos.bottom=0<this.paginatorHeight?this.paginatorHeight-1:0,this.cornerScrollElemPos.bottom=0<this.paginatorHeight?this.paginatorHeight-1:0,this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight-this.groupPanelHeight-this.paginatorHeight},this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),
this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),this.prevClientRect.height=this.clientRect.height))};b.prototype.updateDataFields=function(a){a?(this.updateColumnFields(a.column),this.updateGroupFields(a.group),this.updateRowFields(a.row),this.updateCellFields(a.cell)):(this.updateColumnFields(),this.updateGroupFields(),this.updateRowFields(),this.updateCellFields())};b.prototype.updateGroupFields=function(a){this.options.groupFields=
a?{id:a.id?a.id:"id",cells:a.cells?a.cells:"cells",cid:a.cid?a.cid:"cid",expanded:a.expanded?a.expanded:"expanded",rows:a.rows?a.rows:"rows",text:a.text?a.text:"text"}:{id:"id",cid:"cid",cells:"cells",expanded:"expanded",rows:"rows",text:"text"}};b.prototype.updateScrollColumnList=function(){this.updateScrollNormalColumnList();this.updateScrollLeftColumnList();this.updateScrollRightColumnList()};b.prototype.updateScrollNormalColumnList=function(){for(var a=this.scrollColumnList.length=0;a<this.completeColumnList.length;a++){for(var d=
{columns:[]},c=0;c<this.completeColumnList[a].length;c++){var f=this.completeColumnList[a][c];if(0==a&&c>=this.viewIndexRange.left&&c<=this.viewIndexRange.right||0<a)f={clickPos:{x:0,y:0},colSpan:0<f.colSpan?f.colSpan:1,data:f.data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",headerHeight:0<this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(f.data[this.options.columnFields.style]),location:{top:0,left:0},position:"relative",rowSpan:0<f.rowSpan?
f.rowSpan:1,style:{}},this.updateColumnStyle(f),d.columns.push(f)}this.scrollColumnList.push(d)}this.scrollFooterList.length=0;a=this.getColumnListInRange();for(c=0;c<a.length;c++)a[c].isVisible&&(f={clickPos:{x:0,y:0},data:a[c].data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",headerHeight:0<this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(a[c].data[this.options.columnFields.style]),location:{top:0,left:0},position:"relative",style:{}},this.updateColumnStyle(f),
this.scrollFooterList.push(f))};b.prototype.updateScrollLeftColumnList=function(){for(var a=this.scrollLeftColumnList.length=0;a<this.completeLeftColumnList.length;a++){for(var d={columns:[]},c=0;c<this.completeLeftColumnList[a].length;c++){var f=this.completeLeftColumnList[a][c];f={clickPos:{x:0,y:0},colSpan:0<f.colSpan?f.colSpan:1,data:f.data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",headerHeight:0<this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(f.data[this.options.columnFields.style]),
location:{top:0,left:0},position:"relative",rowSpan:0<f.rowSpan?f.rowSpan:1,style:{}};this.updateColumnStyle(f);d.columns.push(f)}this.scrollLeftColumnList.push(d)}this.scrollLeftFooterList.length=0;a=this.getColumnListInRange("left");for(c=0;c<a.length;c++)a[c].isVisible&&(f={clickPos:{x:0,y:0},data:a[c].data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",headerHeight:0<this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(a[c].data[this.options.columnFields.style]),
location:{top:0,left:0},position:"relative",style:{}},this.updateColumnStyle(f),this.scrollLeftFooterList.push(f))};b.prototype.updateScrollRightColumnList=function(){for(var a=this.scrollRightColumnList.length=0;a<this.completeRightColumnList.length;a++){for(var d={columns:[]},c=0;c<this.completeRightColumnList[a].length;c++){var f=this.completeRightColumnList[a][c];f={clickPos:{x:0,y:0},colSpan:0<f.colSpan?f.colSpan:1,data:f.data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",headerHeight:0<
this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(f.data[this.options.columnFields.style]),location:{top:0,left:0},position:"relative",rowSpan:0<f.rowSpan?f.rowSpan:1,style:{}};this.updateColumnStyle(f);d.columns.push(f)}this.scrollRightColumnList.push(d)}this.scrollRightFooterList.length=0;a=this.getColumnListInRange("right");for(c=0;c<a.length;c++)a[c].isVisible&&(f={clickPos:{x:0,y:0},data:a[c].data,footerHeight:0<this.footerHeight?this.footerHeight+"px":"auto",
headerHeight:0<this.headerHeight?this.headerHeight+"px":"auto",inlineStyle:this.getColumnInlineStyle(a[c].data[this.options.columnFields.style]),location:{top:0,left:0},position:"relative",style:{}},this.updateColumnStyle(f),this.scrollRightFooterList.push(f))};b.prototype.updateScrollRowList=function(a){this.updateScrollNormalRowList(a);this.updateScrollLeftRowList(a);this.updateScrollRightRowList(a)};b.prototype.updateScrollNormalRowList=function(a){var d=this;this.isLayoutUpdating=!0;for(var c=
this.tabIndexCount=0,f=this.getColumnListInRange(),b=this.currentIndex;b<this.currentRowList.length&&b<this.currentIndex+this.visibleRange;b++){var h=this.currentRowList[b];if(!this.isDragHandleVisible||this.isDragHandleVisible&&this.dragRowList&&0<this.dragRowList.length&&h.data!=this.dragRowList[0].data){var g=this.createScrollObjFromRow(f,h.data,h,b);h=this.scrollRowList[c];h.isEmpty=!1;h.data=g.data;h.inlineStyle=g.inlineStyle;h.style=g.style;a||(h.draggable=g.draggable,h.indent=g.indent,h.isGroup=
g.isGroup);for(var m=0,n=0;n<g.cells.length;n++,m++){var k=g.cells[n],l=h.cells[n];l.isEmpty=!1;l.data=k.data;l.display=k.colID==this.currentExpandColumnID?"inline-block":"block";l.inlineStyle=k.inlineStyle;l.style=k.style;a||(l.align=k.align,l.colID=k.colID,l.colIndex=k.colIndex,l.editorClass=k.editorClass,l.editorList=k.editorList,l.editorSettings=k.editorSettings,l.editorStyle=k.editorStyle,l.editorType=k.editorType,l.editorValue=k.editorValue,l.expandBoxAllowed=k.expandBoxAllowed,l.height=k.height,
l.indent=k.indent,l.isEditorEnabled=k.isEditorEnabled,l.isEditorVisible=k.isEditorVisible,l.rowIndex=k.rowIndex,l.tabIndex=k.tabIndex,l.width=k.width)}for(g=m;g<h.cells.length;g++)this.resetCellObj(h.cells[g])}c++}for(b=c;b<this.scrollRowList.length&&b<this.visibleRange;b++)for(this.resetRowObj(this.scrollRowList[b]),n=0;n<this.scrollRowList[b].cells.length;n++)this.resetCellObj(this.scrollRowList[b].cells[n]);var p=setTimeout(function(){d.isLayoutUpdating=!1;clearTimeout(p)},100)};b.prototype.updateScrollLeftRowList=
function(a){var d=this;this.isLayoutUpdating=!0;for(var c=this.tabIndexCount=0,f=this.getColumnListInRange("left"),b=this.currentIndex;b<this.currentRowList.length&&b<this.currentIndex+this.visibleRange;b++){var h=this.currentRowList[b];if(!this.isDragHandleVisible||this.isDragHandleVisible&&this.dragRowList&&0<this.dragRowList.length&&h.data!=this.dragRowList[0].data){var g=this.createScrollLeftObjFromRow(f,h.data,h,b,"left");h=this.scrollLeftRowList[c];h.isEmpty=!1;h.data=g.data;h.inlineStyle=g.inlineStyle;
h.style=g.style;a||(h.draggable=g.draggable,h.indent=g.indent,h.isGroup=g.isGroup);for(var m=0,n=0;n<g.cells.length;n++,m++){var k=g.cells[n],l=h.cells[n];l.isEmpty=!1;l.data=k.data;l.display=k.colID==this.currentExpandColumnID?"inline-block":"block";l.inlineStyle=k.inlineStyle;l.style=k.style;a||(l.align=k.align,l.colID=k.colID,l.colIndex=k.colIndex,l.editorClass=k.editorClass,l.editorList=k.editorList,l.editorSettings=k.editorSettings,l.editorStyle=k.editorStyle,l.editorType=k.editorType,l.editorValue=
k.editorValue,l.expandBoxAllowed=k.expandBoxAllowed,l.indent=k.indent,l.isEditorEnabled=k.isEditorEnabled,l.isEditorVisible=k.isEditorVisible,l.rowIndex=k.rowIndex,l.tabIndex=k.tabIndex,l.width=k.width,l.height=k.height)}for(g=m;g<h.cells.length;g++)this.resetCellObj(h.cells[g])}c++}for(b=c;b<this.scrollLeftRowList.length&&b<this.visibleRange;b++)for(this.resetRowObj(this.scrollLeftRowList[b]),n=0;n<this.scrollLeftRowList[b].cells.length;n++)this.resetCellObj(this.scrollLeftRowList[b].cells[n]);var p=
setTimeout(function(){d.isLayoutUpdating=!1;clearTimeout(p)},100)};b.prototype.updateScrollRightRowList=function(a){var d=this;this.isLayoutUpdating=!0;for(var c=this.tabIndexCount=0,f=this.getColumnListInRange("right"),b=this.currentIndex;b<this.currentRowList.length&&b<this.currentIndex+this.visibleRange;b++){var h=this.currentRowList[b];if(!this.isDragHandleVisible||this.isDragHandleVisible&&this.dragRowList&&0<this.dragRowList.length&&h.data!=this.dragRowList[0].data){var g=this.createScrollRightObjFromRow(f,
h.data,h,b,"right");h=this.scrollRightRowList[c];h.isEmpty=!1;h.data=g.data;h.inlineStyle=g.inlineStyle;h.style=g.style;a||(h.draggable=g.draggable,h.indent=g.indent,h.isGroup=g.isGroup);for(var m=0,n=0;n<g.cells.length;n++,m++){var k=g.cells[n],l=h.cells[n];l.isEmpty=!1;l.data=k.data;l.display=k.colID==this.currentExpandColumnID?"inline-block":"block";l.inlineStyle=k.inlineStyle;l.style=k.style;a||(l.align=k.align,l.colID=k.colID,l.colIndex=k.colIndex,l.editorClass=k.editorClass,l.editorList=k.editorList,
l.editorSettings=k.editorSettings,l.editorStyle=k.editorStyle,l.editorType=k.editorType,l.editorValue=k.editorValue,l.expandBoxAllowed=k.expandBoxAllowed,l.indent=k.indent,l.isEditorEnabled=k.isEditorEnabled,l.isEditorVisible=k.isEditorVisible,l.rowIndex=k.rowIndex,l.tabIndex=k.tabIndex,l.width=k.width,l.height=k.height)}for(g=m;g<h.cells.length;g++)this.resetCellObj(h.cells[g])}c++}for(b=c;b<this.scrollRightRowList.length&&b<this.visibleRange;b++)for(this.resetRowObj(this.scrollRightRowList[b]),
n=0;n<this.scrollRightRowList[b].cells.length;n++)this.resetCellObj(this.scrollRightRowList[b].cells[n]);var p=setTimeout(function(){d.isLayoutUpdating=!1;clearTimeout(p)},100)};b.prototype.isRowGroup=function(a){var d=!1;if(a.cells&&0<a.cells.length){a=a.cells;for(var c=0;c<a.length;c++)if(a[c].isGroup){d=!0;break}}return d};b.prototype.createScrollObjFromRow=function(a,d,c,b,e){e=null;if(c=c?c:this.getObjFromRow(d))for(e={clickPos:{x:0,y:0},cells:[],data:c.data,draggable:this.isEnabled&&"group"!=
c.data.type?!0:!1,indent:c.indent,inlineStyle:this.getRowInlineStyle(c.data[this.options.rowFields.style],d.tagHide),isGroup:this.isRowGroup(d),style:{}},this.updateRowStyle(e),d=e.data[this.options.rowFields.cells],c=0;c<a.length;c++){var f=a[c].data;if(a[c].isVisible){var g=c,m=f[this.options.columnFields.id];m&&(g=this.getCellIndexById(d,c,m));this.tabIndexCount++;g=0<=g&&g<d.length?d[g]:{};f={align:this.getCellAlignment(f),colID:m,colIndex:a[c].colIndex,data:g,display:"block",editorClass:"",editorList:this.getCellEditorList(f),
editorSettings:this.getCellEditorSettings(f),editorStyle:"",editorType:this.getCellEditorType(f),editorValue:null,expandBoxAllowed:this.isExpandBoxAllowed(f),indent:this.getRowIndent(e,f),inlineStyle:g&&g[this.options.cellFields.style]?g[this.options.cellFields.style]:"",isEditorEnabled:this.isCellEditorEnabled(f,g),isEditorVisible:this.getCellEditorVisibility(f,g),isVisible:!0,rowIndex:void 0!=b?b-this.currentIndex:0,style:{content:"iui-grid-row-cell-content"},tabIndex:this.tabIndexCount,width:this.getCellWidth(e,
f),height:0<this.rowHeight?this.rowHeight+"px":"auto"};f.editorValue=this.getCellValue(f);f.editorClass=this.getCellEditorClass(f);f.editorStyle=this.getCellEditorStyle(f);e.cells.push(f)}}return e};b.prototype.createScrollLeftObjFromRow=function(a,d,c,f,b){b=null;if(c=c?c:this.getObjFromRow(d))for(b={clickPos:{x:0,y:0},cells:[],data:c.data,draggable:this.isEnabled&&"group"!=c.data.type?!0:!1,indent:c.indent,inlineStyle:this.getRowInlineStyle(c.data[this.options.rowFields.style],d.tagHide),isGroup:this.isRowGroup(d),
style:{}},this.updateRowStyle(b),d=b.data[this.options.rowFields.cells],c=0;c<a.length;c++){var e=a[c].data,g=c,m=e[this.options.columnFields.id];m&&(g=this.getCellIndexById(d,c,m));this.tabIndexCount++;g=0<=g&&g<d.length?d[g]:{};e={align:this.getCellAlignment(e),colID:m,colIndex:a[c].colIndex,data:g,display:"block",editorClass:"",editorList:this.getCellEditorList(e),editorSettings:this.getCellEditorSettings(e),editorStyle:"",editorType:this.getCellEditorType(e),editorValue:null,expandBoxAllowed:this.isExpandBoxAllowed(e),
indent:this.getRowIndent(b,e),inlineStyle:g&&g[this.options.cellFields.style]?g[this.options.cellFields.style]:"",isEditorEnabled:this.isCellEditorEnabled(e,g),isEditorVisible:this.getCellEditorVisibility(e,g),rowIndex:void 0!=f?f-this.currentIndex:0,style:{content:"iui-grid-row-cell-content"},tabIndex:this.tabIndexCount,width:this.getCellWidth(b,e),height:0<this.rowHeight?this.rowHeight+"px":"auto"};e.editorValue=this.getCellValue(e);e.editorClass=this.getCellEditorClass(e);e.editorStyle=this.getCellEditorStyle(e);
b.cells.push(e)}return b};b.prototype.createScrollRightObjFromRow=function(a,d,c,f,b){b=null;if(c=c?c:this.getObjFromRow(d))for(b={clickPos:{x:0,y:0},cells:[],data:c.data,draggable:this.isEnabled&&"group"!=c.data.type?!0:!1,indent:c.indent,inlineStyle:this.getRowInlineStyle(c.data[this.options.rowFields.style],d.tagHide),isGroup:this.isRowGroup(d),style:{}},this.updateRowStyle(b),d=b.data[this.options.rowFields.cells],c=0;c<a.length;c++){var e=a[c].data,g=c,m=e[this.options.columnFields.id];m&&(g=
this.getCellIndexById(d,c,m));this.tabIndexCount++;g=0<=g&&g<d.length?d[g]:{};e={align:this.getCellAlignment(e),colID:m,colIndex:a[c].colIndex,data:g,display:"block",editorClass:"",editorList:this.getCellEditorList(e),editorSettings:this.getCellEditorSettings(e),editorStyle:"",editorType:this.getCellEditorType(e),editorValue:null,expandBoxAllowed:this.isExpandBoxAllowed(e),indent:this.getRowIndent(b,e),inlineStyle:g&&g[this.options.cellFields.style]?g[this.options.cellFields.style]:"",isEditorEnabled:this.isCellEditorEnabled(e,
g),isEditorVisible:this.getCellEditorVisibility(e,g),rowIndex:void 0!=f?f-this.currentIndex:0,style:{content:"iui-grid-row-cell-content"},tabIndex:this.tabIndexCount,width:this.getCellWidth(b,e),height:0<this.rowHeight?this.rowHeight+"px":"auto"};e.editorValue=this.getCellValue(e);e.editorClass=this.getCellEditorClass(e);e.editorStyle=this.getCellEditorStyle(e);b.cells.push(e)}return b};b.prototype.updateScrollRowListDragOver=function(a){if(!a||this.isScrollTimerActive)this.removeEmptyRow(3),this.removeEmptyRow(2),
this.removeEmptyRow(1);else{var d=this.targetDropRow?this.getObjIndexFromScrollList(this.targetDropRow):-1,c=a?this.getObjIndexFromScrollList(a):-1,b=!1;if(c>=d&&2==this.targetDropPos&&(1==this.prevTargetDropPos||-1==this.prevTargetDropPos)||c>=d&&0==this.targetDropPos&&(2==this.prevTargetDropPos||-1==this.prevTargetDropPos)||c<=d&&1==this.targetDropPos&&(2==this.prevTargetDropPos||-1==this.prevTargetDropPos)||c<=d&&2==this.targetDropPos&&(0==this.prevTargetDropPos||-1==this.prevTargetDropPos)||c!=
d&&0==this.targetDropPos&&(0==this.prevTargetDropPos||-1==this.prevTargetDropPos))b=!0;this.prevTargetDropPos=this.targetDropPos;if(b){this.removeEmptyRow(2);if(d=this.getEmptyObj(1))d.status=2,d.isEmptyPrev=!0,d.isEmpty=!1;this.targetDropRow=a;this.removeEmptyRow(3);this.removeEmptyRow(1);if(this.targetDropRow&&(a=this.getObjIndexFromScrollList(this.targetDropRow),0<=a)){if(0==this.targetDropPos||2==this.targetDropPos)a+=1;this.scrollRowList.splice(Math.max(Math.min(a,this.scrollRowList.length),
0),0,{cells:[],draggable:!1,isEmpty:!0,status:1,style:{}})}}}};b.prototype.addColumnToCurrentList=function(a){if(this.isColumnVisible(a)&&(a.type="column",a[this.options.columnFields.id]||(a[this.options.columnFields.id]=this.commonService.getUniqueId()),0!=a[this.options.columnFields.visible])){var d=a[this.options.columnFields.filterParams];d=d?this.filterService.createTree(d.conditions,d.formula):null;switch(a[this.options.columnFields.fixed]){case "left":this.currentLeftColumnList.push({data:a,
filter:d});break;case "right":this.currentRightColumnList.push({data:a,filter:d});break;default:this.currentColumnList.push({data:a,filter:d})}}};b.prototype.updateCurrentColumnList=function(){this.currentColumnList.length=0;this.currentLeftColumnList.length=0;this.currentRightColumnList.length=0;this.flatCurrentColumnList.length=0;this.flatCurrentLeftColumnList.length=0;this.maxColumnLevels=this.flatCurrentRightColumnList.length=0;this.completeColumnList.length=0;this.completeLeftColumnList.length=
0;this.completeRightColumnList.length=0;this.flatCompleteColumnList.length=0;this.flatCompleteLeftColumnList.length=0;this.flatCompleteRightColumnList.length=0;var a=this.dataService.getList(null,this.columnDataKey);if(a){for(var d=0;d<a.length;d++)this.addColumnToCurrentList(a[d]);this.createFlatList(this.currentColumnList.map(function(a){return a.data}),this.options.columnFields.columns,this.flatCurrentColumnList);this.createFlatList(this.currentLeftColumnList.map(function(a){return a.data}),this.options.columnFields.columns,
this.flatCurrentLeftColumnList);this.createFlatList(this.currentRightColumnList.map(function(a){return a.data}),this.options.columnFields.columns,this.flatCurrentRightColumnList);this.updateColumnCompleteList()}};b.prototype.getGroup=function(a,d){var c=null,b=this.groupList;d&&(b=d[this.options.rowFields.rows]);if(b)for(var e=0;e<b.length;e++)if(b[e][this.options.rowFields.text]==a){c=b[e];break}return c};b.prototype.addRowToGroup=function(a){var d=a[this.options.rowFields.cells];if(d&&0<d.length){for(var c,
b=null,e=0;e<this.groups.length;e++){c=this.groups[e][this.options.groupFields.cid];var h=e;c&&(h=this.getCellIndexById(d,e,c));if(0<=h&&h<d.length){c=d[h][this.options.cellFields.text];if(!c||""==c){var g=d[h][this.options.cellFields.value];void 0!=g?(c=g.toString(),Array.isArray(g)&&0==g.length?c="undefined":0==g&&(c="undefined")):c="undefined"}g=d[h][this.options.cellFields.value];var m=this.getGroup(c,b);if(!m){m={};m[this.options.rowFields.text]=c;m[this.options.rowFields.gid]=this.groups[e][this.options.groupFields.id];
m[this.options.rowFields.allowDrag]=!1;var n=this.getExpandingColumn();n&&(m[this.options.rowFields.cells]=[{cid:n[this.options.columnFields.id],text:c,isGroup:!0,tag:d[h][this.options.cellFields.tag],value:g,valueID:d[h][this.options.cellFields.cid],related:d[h]}],m.type="group",m.tagHide=void 0!=d[h].tagHide?d[h].tagHide:!1,b?(m[this.options.rowFields.id]=b[this.options.rowFields.id]+"_"+m[this.options.rowFields.text],b[this.options.rowFields.rows]||(b[this.options.rowFields.rows]=[]),b[this.options.rowFields.rows].push(m)):
(m[this.options.rowFields.id]="GRP_"+m[this.options.rowFields.text],this.groupList.push(m)),m[this.options.rowFields.expanded]=this.isGroupExpandedFromRow(m),m[this.options.rowFields.cells][0][this.options.cellFields.expanded]=m[this.options.rowFields.expanded])}b=m}}b&&(b[this.options.rowFields.rows]||(b[this.options.rowFields.rows]=[]),b[this.options.rowFields.rows].push(a))}};b.prototype.updateGroupList=function(){this.groupList.length=0;this.activeGroups.length=0;if(0<this.groups.length){for(var a=
0;a<this.groups.length;a++)this.groups[a][this.options.groupFields.id]||(this.groups[a][this.options.groupFields.id]=this.commonService.getUniqueId()),this.activeGroups.push(this.groups[a]);var d=this.dataService.getList(null,this.rowDataKey);if(d)for(a=0;a<d.length;a++)this.addRowToGroup(d[a])}this.groupAggregation(this.groupList)};b.prototype.groupAggregation=function(a){var d=0,c=this.getExpandingColumn();c&&(d=c[this.options.columnFields.id]);for(c=0;c<a.length;c++){var b=a[c];if("group"==b.type){var e=
this.getCellByColumnId(b[this.options.rowFields.cells],d);if(e)for(var h=0;h<this.flatCurrentColumnList.length;h++){var g=this.flatCurrentColumnList[h],m=g[this.options.columnFields.id];(m=void 0!=m?m:h)&&(g=g[this.options.columnFields.aggregation])&&g.enabled&&g.callback&&(g=g.callback(b,m,e),void 0!=g&&(m==d?(e.isModified=!0,e.value=g):b[this.options.rowFields.cells].push({cid:m,isGroup:!0,value:g})))}b[this.options.rowFields.rows]&&this.groupAggregation(b[this.options.rowFields.rows])}}};b.prototype.createGroupExpandList=
function(){this.groupExpandList.length=0;for(var a=this.getFullList(),d=0;d<a.length;d++)"group"==a[d].type&&this.groupExpandList.push({id:a[d][this.options.rowFields.id],expanded:this.isRowExpanded(a[d])})};b.prototype.updateExpandStatus=function(){this.createGroupExpandList()};b.prototype.updateGrouping=function(a){this.options.grouping=a?{dropdown:{appRef:this.isEnabled?this.appRef:null,items:this.commonService.isFieldAvailable(a.items,[])},enabled:this.commonService.isFieldAvailable(a.enabled,
!1),showAddButton:this.commonService.isFieldAvailable(a.showAddButton,!1),showColumns:this.commonService.isFieldAvailable(a.showColumns,!1),showPanel:this.commonService.isFieldAvailable(a.showPanel,!0)}:{dropdown:{appRef:this.appRef,items:[]},enabled:!1,showAddButton:!1,showColumns:!1,showPanel:!0}};b.prototype.getGroupExpandObj=function(a){return this.commonService.getObjFromListById(this.groupExpandList,a)};b.prototype.updateGroupExpandValue=function(a,d){var c=this.commonService.getObjFromListById(this.groupExpandList,
a);c&&(c.expanded=d)};b.prototype.updateCurrentRowList=function(){this.currentRowList.length=0;if(this.options.paging.enabled){if(1<=this.currentPageNumber&&this.currentPageNumber<=this.pageList.length)for(var a=0;a<this.pageList[this.currentPageNumber-1].length;a++)this.currentRowList.push(this.pageList[this.currentPageNumber-1][a])}else{this.isThereChildRows=!1;var d=this.dataService.getList(null,this.rowDataKey);0<this.groups.length&&(d=this.groupList);if(d)for(this.applySorting(d),a=0;a<d.length;a++)this.addChildRows(d[a],
0,null,!1)}};b.prototype.updatePageList=function(){this.pageNumber=0;this.pageRowCount=this.pageList.length=0;this.isThereChildRows=!1;var a=this.dataService.getList(null,this.rowDataKey);0<this.groups.length&&(a=this.groupList);if(a&&0<a.length){this.applySorting(a);this.pageList.push([]);for(var d=0;d<a.length;d++)this.addChildRows(a[d],0,null,!1);0<this.pageList.length&&0==this.pageList[this.pageList.length-1].length&&this.pageList.splice(this.pageList.length-1,1)}};b.prototype.addChildRows=function(a,
d,c,b){var f=!0;if(!a.tagHide&&!a[this.options.rowFields.rows])return f=this.addRowToCurrentList(a,d,c,b);a.tagHide||(f=this.addRowToCurrentList(a,d,c,b));if(f){c=0;var h;if("group"==a.type&&(b||this.isRowExpanded(a))||1==a[this.options.rowFields.hasChildren]&&(b||this.isRowExpanded(a))){var g=a[this.options.rowFields.rows];if(g){this.applySorting(g);for(var m=0;m<g.length;m++)(h=this.addChildRows(g[m],d+this.options.indent,a[this.options.rowFields.id],b))&&c++}}b||this.isThereChildRows||!(0<c||!this.isRowExpanded(a)&&
a[this.options.rowFields.rows]&&0<a[this.options.rowFields.rows].length&&this.isThereVisibleChildren(a))||(this.isThereChildRows=!0)}return f};b.prototype.addRowToCurrentList=function(a,d,c,b){a.type||(a.type="row");a[this.options.rowFields.id]||(a[this.options.rowFields.id]=this.commonService.getUniqueId());c&&(a[this.options.rowFields.pid]=c);c=!0;var f=a[this.options.rowFields.cells];if(f&&0<f.length){c=this.isRowAllowed(a,b);for(var h=0;h<f.length;h++)f[h].type="cell",f[h][this.options.cellFields.rid]=
a[this.options.rowFields.id]}c&&(b?this.fullList.push(a):this.options.paging.enabled?this.onlyCurrentPage?this.currentPageList.push({data:a,indent:d}):(a[this.options.rowFields.pid]||this.pageRowCount++,this.pageRowCount>this.options.paging.pageSize&&(this.pageRowCount=1,this.pageNumber++,this.pageList.push([])),this.pageList[this.pageNumber].push({data:a,indent:d})):this.currentRowList.push({data:a,indent:d}));return c};b.prototype.getFullList=function(){return this.fullList};b.prototype.updateFullList=
function(){this.fullList.length=0;var a=this.dataService.getList(null,this.rowDataKey);0<this.groups.length&&(a=this.groupList);if(a)for(var d=0;d<a.length;d++)this.addChildRows(a[d],0,null,!0);this.createGroupExpandList()};b.prototype.loadData=function(a,d,c,b){this.processLoadData(a,d,c,b)};b.prototype.expandOnDelay=function(a){var d=this;0!=d.autoExpand&&(d.expandRow!=a&&(d.expandTimeout&&clearTimeout(d.expandTimeout),d.expandTimeout=setTimeout(function(){d.expandTimeout&&d.expand(a);clearTimeout(d.expandTimeout)},
500)),d.expandRow=a)};b.prototype.rowDragStart=function(a,d,c){this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle?this.rowDragStartHandle(a,d,c):this.rowDragStartPopup(a,d)};b.prototype.rowDragStartHandle=function(a,d,c){if(this.isEnabled){var b=this.rowElems.toArray();if(b&&0<=c&&c<b.length){c=this.commonService.getPageRect(b[c].nativeElement);b=this.commonService.getShiftPos();var e=this.commonService.getMousePos(a);e.x-=b.x;e.y-=b.y;this.dragHandleShiftPos.y=e.y-c.top}this.dragRowList=
[];c=this.getColumnListInRange();for(b=0;b<this.currentSelectedRows.length;b++)(e=this.createScrollObjFromRow(c,this.currentSelectedRows[b]))&&this.dragRowList.push(e);this.isDragHandleVisible=!0;this.targetDropRow=d.data;this.targetDropPos=0;this.removeEmptyRow(3);this.removeEmptyRow(1);c=this.getObjIndexFromScrollList(this.targetDropRow);0<=c&&this.scrollRowList.splice(Math.max(Math.min(c+1,this.scrollRowList.length),0),0,{cells:[],draggable:!1,isEmpty:!0,status:3,style:{}});this.processDragStart(a,
d.data);this.hoverRow=null;var h=this;setTimeout(function(){for(var a=0;a<h.dragRowList.length;a++){var d=h.getObjIndexFromScrollList(h.dragRowList[a].data);0<=d&&h.scrollRowList.splice(d,1)}},1)}a.stopPropagation()};b.prototype.rowDragStartPopup=function(a,d){this.isEnabled&&this.processDragStart(a,d.data);a.stopPropagation()};b.prototype.rowDragOver=function(a,d,c,b){this.isEnabled&&(b=this.getRowElems(b))&&(b=b.toArray())&&0<=c&&c<b.length&&(c=this.commonService.getPageRect(b[c].nativeElement),
c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top},this.expandOnDelay(d.data),this.processScroll(a,this.groupPanelHeight,this.paginatorHeight),this.isScrollTimerActive||this.processDragOver(a,d,c,!0));a.stopPropagation()};b.prototype.rowDragDrop=function(a,d){this.isEnabled&&(this.expandRow=null,this.expandTimeout&&clearTimeout(this.expandTimeout),this.processDragDrop(a,d));a.stopPropagation()};b.prototype.isParentOf=function(a,d){var c=this.dataService.getParent(d);return a&&d&&c&&this.commonService.isEqual(a[this.options.rowFields.id],
c[this.options.rowFields.id])?!0:!1};b.prototype.isChildOf=function(a,d){var c=!1;if(a&&d){var b=d[this.options.rowFields.rows];if(b&&0<b.length)for(var e=0;e<b.length;e++){if(this.commonService.isEqual(a[this.options.rowFields.id],b[e][this.options.rowFields.id])){c=!0;break}else c=this.isChildOf(a,b[e]);if(c)break}}return c};b.prototype.processDataDrop=function(a,d,c){a="copy"==c.action;"copy"!=c.action&&c.sourceCtrl&&c.sourceCtrl.removeRow&&(a=c.sourceCtrl.removeRow(d));if(a)switch(c.dropPos){case 0:c.target&&
"group"==c.target.type&&(this.processDataDropAtTargetGroup(d,c.target),this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle?c.target.rows&&0<c.target.rows.length?(c=this.rows.indexOf(c.target.rows[0]),0<=c?this.insertRowAt(d,c):this.addRow(d)):this.addRow(d):this.addRow(d));break;case 1:this.processDataDropAtTargetRow(d,c.target,c.dropPos);break;case 2:this.processDataDropAtTargetRow(d,c.target,c.dropPos);break;default:this.addRow(d)}};b.prototype.processDataDropAtTargetGroup=function(a,
d){var c=d[this.options.rowFields.cells];if(a[this.options.rowFields.cells]&&c&&0<c.length){var b=this.getCellByColumnId(a[this.options.rowFields.cells],c[0].valueID);b&&(b[this.options.cellFields.text]=c[0][this.options.cellFields.text],b[this.options.cellFields.value]=c[0][this.options.cellFields.value])}(c=this.getRowParent(d))&&this.processDataDropAtTargetGroup(a,c)};b.prototype.processDataDropAtTargetRow=function(a,d,c){for(var b=0;b<this.groups.length;b++){var e=this.groups[b][this.options.groupFields.cid],
h=this.getCellByColumnId(a[this.options.rowFields.cells],e);e=this.getCellByColumnId(d[this.options.rowFields.cells],e);h&&e&&(h[this.options.cellFields.text]=e[this.options.cellFields.text],h[this.options.cellFields.value]=e[this.options.cellFields.value])}switch(c){case 1:this.insertRowBefore(a,d);break;case 2:this.insertRowAfter(a,d)}};b.prototype.getFirstGroupChildRow=function(a){return a&&a.rows&&0<a.rows.length?"group"==a.rows[0].type?this.getFirstGroupChildRow(a.rows[0]):a.rows[0]:null};b.prototype.updateDragHandlePos=
function(a){if(this.dragHandlePos){var d=this.commonService.getShiftPos();a=this.commonService.getMousePos(a);a.x-=d.x;a.y-=d.y;d=this.commonService.getPageRect(this.elemRef.nativeElement);a.y-=d.y+this.groupPanelHeight+this.currentHeaderHeight+this.dragHandleShiftPos.y;this.dragHandlePos.top=a.y}};b.prototype.openDropDown=function(a,d,c,b,e){var f=this.getRowElems(e);e=this.getCellElems(e);if(!this.isPopupDelayed&&f&&e&&(f=f.toArray(),e=e.toArray(),this.commonService.isIndexInRange(c,f)&&this.commonService.isIndexInRange(b,
e)))switch(d.editorType){case integralui_core_1.IntegralUIEditorType.Color:this.showPopup(a,d,f[c],e[b]);break;case integralui_core_1.IntegralUIEditorType.Date:this.showPopup(a,d,f[c],e[b]);break;case integralui_core_1.IntegralUIEditorType.DropList:this.showPopup(a,d,f[c],e[b])}a.stopPropagation()};b.prototype.collapse=function(a){this.toggle(a,!1)};b.prototype.expand=function(a){this.toggle(a,!0)};b.prototype.toggle=function(a,d){if(this.isEnabled)if(a){if((a[this.options.rowFields.hasChildren]||
a[this.options.rowFields.rows]&&0!=a[this.options.rowFields.rows].length)&&!(d&&0!=a[this.options.rowFields.expanded]||!1===d&&0==a[this.options.rowFields.expanded])){var c=void 0!==d?d:!1!==a[this.options.rowFields.expanded]?!0:!1,b={cancel:!1,row:a};void 0!==d?d?this.beforeExpand.emit(b):this.beforeCollapse.emit(b):c?this.beforeCollapse.emit(b):this.beforeExpand.emit(b);1!=b.cancel&&(c=void 0!=d?d:!c,c!=a[this.options.rowFields.expanded]&&(a[this.options.rowFields.expanded]=c,this.updateExpandingCell(a,
c),"group"==a.type&&this.updateGroupExpandValue(a[this.options.rowFields.id],c),this.updateCurrentLayout(!1,!0)),this.isRowExpanded(a)?this.afterExpand.emit({row:a}):this.afterCollapse.emit({row:a}))}}else{c=this.getFullList();for(b=0;b<c.length;b++)c[b][this.options.rowFields.expanded]=d,this.updateExpandingCell(c[b],d),"group"==c[b].type&&this.updateGroupExpandValue(c[b][this.options.rowFields.id],d);this.updateCurrentLayout(!1,!0)}};b.prototype.findGroupById=function(a){var d=null;if(this.groups)for(var c=
0;c<this.groups.length;c++)if(this.groups[c][this.options.groupFields.id]==a){d=this.groups[c];break}return d};b.prototype.findColumnById=function(a){return this.dataService.findObjectById(a,this.columnDataKey)};b.prototype.getCellIndexById=function(a,d,c){var b=-1;if(a){d=this.getColumnRealIndex(d);for(var e=0;e<a.length;e++)if(void 0==a[e][this.options.cellFields.cid]){b=d;break}else if(a[e][this.options.cellFields.cid]==c){b=e;break}}return b};b.prototype.getColumnElems=function(a){switch(a){case "left":return this.columnLeftElems;
case "right":return this.columnRightElems}return this.columnElems};b.prototype.getColumnFromCell=function(a,d){var c=null;if(a[this.options.cellFields.cid])for(var b=0;b<this.flatCurrentColumnList.length;b++){if(this.flatCurrentColumnList[b][this.options.columnFields.id]==a[this.options.cellFields.cid]){c=this.flatCurrentColumnList[b];break}}else 0<=d&&d<this.flatCurrentColumnList.length&&(c=this.flatCurrentColumnList[d]);return c};b.prototype.getCellAlignment=function(a){return a?a[this.options.columnFields.contentAlignment]:
""};b.prototype.getColumnAlignment=function(a,d){return a?d?a[this.options.columnFields.footerAlignment]:a[this.options.columnFields.headerAlignment]:""};b.prototype.getCellElems=function(a){switch(a){case "left":return this.cellLeftElems;case "right":return this.cellRightElems}return this.cellElems};b.prototype.getRowElems=function(a){switch(a){case "left":return this.rowLeftElems;case "right":return this.rowRightElems}return this.rowElems};b.prototype.isGroupExpandedFromRow=function(a){return(a=
this.getGroupExpandObj(a[this.options.rowFields.id]))?a.expanded:!0};b.prototype.isGroupExpanded=function(a){return a?a[this.options.groupFields.expanded]||void 0===a[this.options.groupFields.expanded]?!0:!1:!0};b.prototype.isRowExpanded=function(a){return a?a[this.options.rowFields.expanded]||void 0===a[this.options.rowFields.expanded]?!0:!1:!0};b.prototype.isThereVisibleChildren=function(a){var d=!1;if(a&&this.isRowGroup(a)&&(a=a[this.options.rowFields.rows])&&0<a.length)for(var c=0;c<a.length;c++)if(this.isRowAllowed(a[c])&&
!this.isRowFixed(a[c])){d=!0;break}return d};b.prototype.getGroupTextFromColumn=function(a){var d="";a&&((d=a[this.options.columnFields.groupText])&&""!=d||(d=a[this.options.columnFields.headerText]));return d};b.prototype.getGroupText=function(a){var d="",c=this.getColumnById(a.cid);c?d=this.getGroupTextFromColumn(c):this.options.grouping&&this.options.grouping.dropdown&&this.options.grouping.dropdown.items&&(a=this.commonService.getObjFromListById(this.options.grouping.dropdown.items,a.cid))&&(d=
a.text);return d};b.prototype.updateDragGroupElem=function(a,d){var c=this.commonService.getPadding(this.groupingPanelElem.nativeElement),b=this.commonService.getPageRect(this.groupingPanelElem.nativeElement),e=this.commonService.getShiftPos(),h=this.commonService.getMousePos(a);h.x-=b.left+e.x;h.y-=b.top+e.y;this.dragGroupElemSize.width=this.dragGroupElem.nativeElement.offsetWidth;b=h.x-this.dragGroupElemSize.width/2;this.dragGroupSettings.top=c.top;this.dragGroupSettings.left=b;this.dragGroupSettings.display=
"block";this.dragGroupSettings.label=d};b.prototype.groupPanelDragEnter=function(a){this.dropMark(a)};b.prototype.groupPanelMouseEnter=function(a){this.isEnabled&&(this.isGroupPanelHovered=!0,1==a.which&&this.columnReorderActive&&this.reorderColumn?(this.restoreColumnOrder(),this.dragGroupSettings.display="none",this.dragGroupSettings.label=this.reorderColumn[this.options.columnFields.headerText],this.groupReorderActive=!0,this.reorderGroup=null,this.dropMark(a)):this.changeCursor());a.stopPropagation()};
b.prototype.groupPanelMouseMove=function(a){if(this.isEnabled&&1==a.which&&(this.columnReorderActive&&this.reorderColumn||this.groupReorderActive&&this.reorderGroup)){this.isGroupPanelHovered=!0;var d=this.commonService.getPageRect(this.groupingPanelElem.nativeElement),c=this.commonService.getShiftPos(),b=this.commonService.getMousePos(a);b.x-=d.left+c.x;b.y-=d.top+c.y;d="";this.reorderColumn?d=this.getGroupTextFromColumn(this.reorderColumn):this.reorderGroup&&(d=this.getGroupText(this.reorderGroup));
this.updateDragGroupElem(a,d);this.dropMark(a);this.changeCursor();this.reorderGroup&&this.groups.indexOf(this.reorderGroup)}a.stopPropagation()};b.prototype.groupPanelMouseLeave=function(a){this.isGroupPanelHovered=!1;this.dragGroupSettings.display="none"};b.prototype.checkColumnPresence=function(a){for(var d=!1,c=0;c<this.groups.length;c++)if(this.groups[c].cid==a){d=!0;break}return d};b.prototype.groupPanelMouseUp=function(a){if(this.isEnabled&&1==a.which&&(this.columnReorderActive&&this.reorderColumn||
this.groupReorderActive&&this.reorderGroup)){if(this.groupReorderActive&&this.reorderGroup){var d=this.groups.indexOf(this.reorderGroup),c=this.groups.indexOf(this.hoverGroup);d!=c&&(this.moveObject(d,c,this.groups),this.updateLayout(),this.groupOrderChanged.emit(null))}else{d=this.reorderColumn[this.options.columnFields.id];var b={cid:d};this.hoverGroup?(c=this.groups.indexOf(this.hoverGroup),0<=c&&!this.checkColumnPresence(d)&&(this.groups.splice(c,0,b),this.updateLayout(),this.groupOrderChanged.emit(null))):
this.checkColumnPresence(d)||this.addGroup(b)&&this.groupOrderChanged.emit(null)}this.resetReorderColumnSettings();this.hoverGroup=null;this.dropMark(a);this.dragGroupSettings.display="none";this.changeCursor();a.stopPropagation()}};b.prototype.groupMouseEnter=function(a,d){this.isEnabled&&1==a.which&&(this.hoverGroup=d,a.stopPropagation())};b.prototype.groupMouseLeave=function(a,d){this.isEnabled&&1==a.which&&(this.hoverGroup=null,a.stopPropagation())};b.prototype.groupMouseDown=function(a,d){this.isEnabled&&
1==a.which&&1<this.groups.length&&(this.groupReorderActive=!0,this.reorderGroup=d,this.updateDragGroupElem(a,this.getGroupText(this.reorderGroup)));a.stopPropagation()};b.prototype.groupButtonMouseDown=function(a,d){this.isEnabled&&1==a.which&&this.removeGroup(d);a.stopPropagation()};b.prototype.addGroup=function(a){var d=!1,c={cancel:!1,group:a};this.groupAdding.emit(c);1!=c.cancel&&(this.groups.push(a),this.updateLayout(),this.groupAdded.emit({group:a}),d=!0);return d};b.prototype.removeGroup=function(a){var d=
this.groups.indexOf(a);if(0<=d){var c={cancel:!1,group:a};this.groupRemoving.emit(c);1!=c.cancel&&(this.groups.splice(d,1),this.updateLayout(),this.groupRemoved.emit({group:a}))}};b.prototype.groupListItemSelected=function(a){this.checkColumnPresence(a.id)||this.addGroup({cid:a.id});this.isGroupListItemSelected=!0};b.prototype.groupListMouseDown=function(a){this.isGroupListItemSelected||a.stopPropagation()};b.prototype.onAddGroupDropDownOpen=function(a){this.isGroupListItemSelected=!1};b.prototype.columnMouseDown=
function(a,d){if(this.isEnabled){var c=this.getColumnList(d.data[this.options.columnFields.fixed]),b=this.isColumnFixed(d.data);switch(a.which){case 1:if(0<=this.resizeColumnIndex&&this.resizeColumnIndex<c.length){var e=this.commonService.getShiftPos();this.columnStartPos={x:a.pageX-e.x,y:a.pageY-e.y};this.isColumnResizing=!0;this.resizeColumn=c[this.resizeColumnIndex].data}else this.processColumnSelection(a,d.data),b||0==d.data[this.options.columnFields.allowDrag]||(this.startColumnReorder=!0);break;
case 2:this.processColumnSelection(a,d.data)}this.prevClickedObj&&(this.prevClickedObj.isClicked=!1);if(c=this.getColumnElems(d.data[this.options.columnFields.fixed]))c=c.toArray(),e=this.getColumnCurrentIndex(d.data),b=b?e:e-this.viewIndexRange.left,0<=b&&b<c.length&&(b=c[b].nativeElement,d.isClicked=!0,d.clickPos=this.commonService.getClientPos(a,b));this.prevClickedObj=d}};b.prototype.columnMouseUp=function(a,d){};b.prototype.columnMouseMove=function(a,d){if(this.isEnabled&&!this.isScrollActive){this.resizeColumnIndex=
-1;var c=this.isColumnFixed(d.data);if(!this.startColumnReorder||this.columnReorderActive||c)if(this.columnReorderActive)this.changeCursor();else{var b=this.getColumnElems(d.data[this.options.columnFields.fixed]);if(b){var e=b.toArray();b=this.getColumnCurrentIndex(d.data);var h=c?b:b-this.viewIndexRange.left;if(0<=h&&h<e.length){e=e[h].nativeElement;h=this.commonService.getShiftPos();var g=this.commonService.getPageRect(e);e=a.pageX-h.x;h=a.pageY-h.y;var m={top:g.top,right:g.right,bottom:g.bottom,
left:g.right-10};g={top:g.top,right:g.left+10,bottom:g.bottom,left:g.left};var n=this.getColumnAllowResize(d.data),k=this.isColumnFixed(d.data,"right");n.right&&this.commonService.checkHit(e,h,m)?this.resizeColumnIndex=!c&&this.isAutoSizeColumnsActive?this.getNextFlatColumnIndex(d.data,d.data[this.options.columnFields.fixed],!0):k?b+1:b:n.left&&this.commonService.checkHit(e,h,g)&&(this.resizeColumnIndex=!c&&this.isAutoSizeColumnsActive?0<this.getColumnIndexFromList(d.data)&&(!d.data[this.options.columnFields.pid]||
0<=this.getPrevFlatColumnIndex(d.data,d.data[this.options.columnFields.fixed],!0))?this.getColumnIndexFromList(d.data):-1:k?b:b-1);this.isColumnWidthFixed(d.data)?this.resizeColumnIndex=-1:k&&(c=this.getColumnList("right"),this.resizeColumnIndex>=c.length&&(this.resizeColumnIndex=-1));this.changeCursor()}else this.ctrlCursor="default"}}else this.columnReorderActive=!0,this.reorderColumn=d.data,this.reorderColumnObj=d,this.reorderColumnStartPos.left=a.pageX,this.reorderColumnCurrentPos.left=a.pageX}else this.changeCursor()};
b.prototype.columnMouseEnter=function(a,b){!this.isEnabled||this.isScrollActive||this.isColumnResizing||this.columnReorderActive||(this.blockHoverRect.top=-9999999,this.hoverColumn=b.data,this.resizeColumnIndex=-1,this.updateColumnStyle(b),this.columnHover.emit({column:this.hoverColumn}))};b.prototype.columnMouseLeave=function(a,b){!this.isEnabled||this.isScrollActive||this.isColumnResizing||this.columnReorderActive||(this.hoverColumn=null,this.resizeColumnIndex=-1,this.changeCursor(),this.updateColumnStyle(b),
this.dropMark(a))};b.prototype.footerMouseEnter=function(a,b){this.blockHoverRect.top=-9999999};b.prototype.gridMouseMove=function(a){this.isDragActive||0==this.dragStartPos.x||0==this.dragStartPos.y||(this.dragEndPos=this.commonService.getMousePos(a));this.isGridHovered=!1;this.hoverRow||(this.blockHoverRect.top=-9999999);this.isEnabled&&1==a.which&&this.columnReorderActive&&this.reorderColumn&&(this.isGridHovered=!0,this.reorderColumnCurrentPos.left=a.pageX,a.stopPropagation())};b.prototype.gridMouseUp=
function(a){if(1==a.which)if(this.isDragActive)this.ctrlDragDrop(a);else if(this.reorderColumn&&0<=this.reorderNewColIndex&&this.reorderNewColIndex<this.originalScrollColumnList.length){a=this.columns.indexOf(this.reorderColumn);var b=this.columns.indexOf(this.originalScrollColumnList[this.reorderNewColIndex].data);b!=a&&(this.moveObject(a,b,this.columns),this.columnOrderChanged.emit({column:this.reorderColumn}),this.updateLayout())}this.resetReorderColumnSettings()};b.prototype.gridMouseEnter=function(a){this.isEnabled&&
(1==a.which&&this.isDragActive&&this.ctrlDragEnter(a),this.state|=integralui_core_1.IntegralUIObjectState.hovered)};b.prototype.gridMouseLeave=function(a){this.hoverColumn=this.hoverRow=null;this.isGridHovered=!1;this.isEnabled&&1==a.which&&(this.isDragActive&&this.ctrlDragLeave(a),this.columnReorderActive&&this.restoreColumnOrder());this.blockHoverRect.top=-9999999;this.state&=~integralui_core_1.IntegralUIObjectState.hovered};b.prototype.rowMouseEnter=function(a,b){if(this.isEnabled&&!this.isScrollActive&&
!this.isColumnResizing&&!this.columnReorderActive&&!this.isDragHandleVisible){this.hoverRow=b.data;this.hoverRowObj=b;var c=this.getRowScrollIndex(b.data);this.isIndexInRange(c,this.scrollRowList)&&this.updateRowStyle(this.scrollRowList[c]);this.isIndexInRange(c,this.scrollLeftRowList)&&this.updateRowStyle(this.scrollLeftRowList[c]);this.isIndexInRange(c,this.scrollRightRowList)&&this.updateRowStyle(this.scrollRightRowList[c]);var d=this.rowElems.toArray();if(d&&0<d.length&&this.isIndexInRange(c,
d)){var e=this.commonService.getPageRect(this.elemRef.nativeElement.firstElementChild);c=this.commonService.getPageRect(d[c].nativeElement);this.blockHoverRect.top=c.top-e.top-1}this.rowHover.emit({row:this.hoverRow})}};b.prototype.rowMouseLeave=function(a,b){!this.isEnabled||this.isScrollActive||this.isColumnResizing||this.columnReorderActive||this.clearHoverRow(b.data)};b.prototype.clearHoverRow=function(a){a=a?a:this.hoverRow;this.hoverRow=null;a&&(a=this.getRowScrollIndex(a),this.isIndexInRange(a,
this.scrollRowList)&&this.updateRowStyle(this.scrollRowList[a]),this.isIndexInRange(a,this.scrollLeftRowList)&&this.updateRowStyle(this.scrollLeftRowList[a]),this.isIndexInRange(a,this.scrollRightRowList)&&this.updateRowStyle(this.scrollRightRowList[a]))};b.prototype.rowMouseMove=function(a,b,c){if(1==a.which&&this.dragMode==integralui_core_1.IntegralUIDragDropDisplayMode.Handle){var d=this.dragDropService.getData();this.isDragActive||(this.isDragActive=d.sourceCtrl!=this&&d.source?!0:!1);if(this.isDragActive)this.dragMode==
integralui_core_1.IntegralUIDragDropDisplayMode.Handle&&(this.dragRowList=d.handle),this.rowDragOver(a,b,c);else if(d=Math.abs(this.dragEndPos.y-this.dragStartPos.y),3<=Math.abs(this.dragEndPos.x-this.dragStartPos.x)||3<=d)this.isDragActive=!0,this.rowDragStart(a,b,c)}};b.prototype.resetReorderColumnSettings=function(){this.reorderColumn=this.reorderColumnObj=null;this.groupReorderActive=this.startColumnReorder=this.columnReorderActive=!1;this.reorderGroup=null};b.prototype.processLeftArrowKey=function(a){var b=
this.getColumnFromCell(a.data,a.colIndex);if(b&&this.getColumnIndex(b)==this.expandColIndex&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length&&(b=this.scrollRowList[a.rowIndex].data,this.isRowExpanded(b)&&this.isThereVisibleChildren(b)))return this.collapse(b),a;if(a=this.getPrevCell(this.isKeyPressed?this.currentFocusCell:a))this.updateFocusCell(a),this.isFirstCell(a)&&this.scrollPos({x:this.currentScrollPos.x-2*a.width,y:this.currentScrollPos.y}),this.refresh();return a};b.prototype.processRightArrowKey=
function(a){var b=this.getColumnFromCell(a.data,a.colIndex);if(b&&this.getColumnIndex(b)==this.expandColIndex&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length&&(b=this.scrollRowList[a.rowIndex].data,!this.isRowExpanded(b)&&this.isThereVisibleChildren(b)))return this.expand(b),a;(a=this.getNextCell(this.isKeyPressed?this.currentFocusCell:a))&&!a.isEmpty&&(this.isLastCell(a)&&this.scrollPos({x:this.currentScrollPos.x+2*a.width,y:this.currentScrollPos.y}),this.currentScrollPos.x+2*a.width>=this.maxScrollPos.x&&
this.scrollPos({x:this.maxScrollPos.x,y:this.currentScrollPos.y}),this.updateFocusCell(a),this.refresh());return a&&!a.isEmpty?a:null};b.prototype.updateRange=function(a){this.viewIndexRange={left:0,middle:999,right:999};this.updateLeftBlockSize();this.updateRightBlockSize();this.fixedLeftViewIndexRange=0<this.completeLeftColumnList.length?this.completeLeftColumnList[0].length:0;this.fixedRightViewIndexRange=0<this.completeRightColumnList.length?this.completeRightColumnList[0].length:0;var b=!1,c=
!1,f=!1,e=this.currentScrollPos.x+this.clientRect.width-this.leftBlockSize.width,h=2*e,g=0;if(0<this.completeColumnList.length){for(var m=this.completeColumnList[0].length,n=0;n<m;n++){var k=this.completeColumnList[0][n].data;g+=this.getColumnWidth(k)+this.columnPadding.left+this.columnPadding.right+6;!b&&g>=this.currentScrollPos.x&&(this.viewIndexRange.left=n,b=!0);!c&&g>=e&&(this.viewIndexRange.middle=n,c=!0);!f&&g>=h&&(this.viewIndexRange.right=n,f=!0);if(b&&f)break}c||(this.viewIndexRange.middle=
m);f||(this.viewIndexRange.right=m);for(n=g=0;n<m&&n<this.viewIndexRange.left;n++)k=this.completeColumnList[0][n].data,g+=this.getColumnWidth(k)+this.columnPadding.left+this.columnPadding.right+6}this.initialContentLeftPos=this.currentScrollPos.x-g;this.contentLeftPos=this.initialContentLeftPos-this.leftBlockSize.width;this.numVisibleCells=this.getColumnListInRange().length;a||this.updateScrollColumnList();this.updateScrollRowList()};b.prototype.updateCurrentLayout=function(a,b){var c=this;c.resetLayoutTimer();
c.options.paging.enabled&&(c.updatePageList(),c.updatePageNumber());c.updateCurrentRowList();c.updateRange(b);a&&c.updateFullList();c.updateScrollSize();c.updateColumnWidth();c.updateScrollSize();c.updateTimer=setTimeout(function(){c.updateBlockSize();c.updateSelectContentPos();clearTimeout(c.updateTimer)},1)};b.prototype.updateBlockSize=function(){this.blockSize={width:this.bodyElem.nativeElement.offsetWidth,height:this.bodyElem.nativeElement.offsetHeight}};b.prototype.updateLeftBlockSize=function(){var a=
{width:this.bodyLeftElem?this.bodyLeftElem.nativeElement.offsetWidth:0,height:this.clientRect.height-this.currentHeaderHeight-this.currentFooterHeight};this.isHorScrollVisible()&&(a.height-=16);this.leftBlockSize=a};b.prototype.updateRightBlockSize=function(){var a={width:this.bodyRightElem?this.bodyRightElem.nativeElement.offsetWidth:0,height:this.clientRect.height-this.currentHeaderHeight-this.currentFooterHeight};this.isHorScrollVisible()&&(a.height-=16);this.rightBlockSize=a};b.prototype.resetLayoutTimer=
function(){this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=null};b.prototype.updateExpandingColumn=function(){if(void 0!=this.currentExpandColumnID){var a=this.findColumnById(this.currentExpandColumnID);a=this.getColumnIndex(a);this.expandColIndex=0<=a?a:0}else this.updateExpandingColumnID()};b.prototype.updateLayout=function(){var a=this;a.isUpdateActive=!0;a.allowUpdate&&(a.beforeUpdate.emit(null),a.resetLayoutTimer(),a.clearHoverRow(),a.updateTimer=setTimeout(function(){a.addCalendar();
a.addColorPopup();a.addDropList();a.updateCurrentColumnList();a.updateExpandingColumn();a.updateGroupList();a.options.paging.enabled&&a.updatePageList();a.updateCurrentRowList();a.updateFullList();a.getNumScrollColumns()<a.getNumVisibleColumns()&&a.updateScrollNormalRowListLimit(a.getNumVisibleColumns()-a.getNumScrollColumns());a.getNumScrollColumns("left")<a.getNumVisibleColumns("left")&&a.updateScrollLeftRowListLimit(a.getNumVisibleColumns("left")-a.getNumScrollColumns("left"));a.getNumScrollColumns("right")<
a.getNumVisibleColumns("right")&&a.updateScrollRightRowListLimit(a.getNumVisibleColumns("right")-a.getNumScrollColumns("right"));a.groupPanelHeight=a.groupingPanelElem?a.groupingPanelElem.nativeElement.offsetHeight:0;a.groupPanelSize.height=a.groupingPanelElem?a.groupingPanelElem.nativeElement.offsetHeight:0;a.paginatorHeight=a.paginatorElem?a.paginatorElem.nativeElement.offsetHeight:0;a.paginatorPos.top=a.elemRef.nativeElement.firstElementChild.clientHeight-a.paginatorHeight+1;a.horScrollElemPos.bottom=
0<a.paginatorHeight?a.paginatorHeight-1:0;a.cornerScrollElemPos.bottom=0<a.paginatorHeight?a.paginatorHeight-1:0;a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth,height:a.elemRef.nativeElement.firstElementChild.clientHeight-a.groupPanelHeight-a.paginatorHeight};if(a.groupingPanelElem){var b=a.commonService.getBorderWidth(a.groupingPanelElem.nativeElement),c=a.commonService.getPadding(a.groupingPanelElem.nativeElement);a.groupPanelSize.width=a.clientRect.width-(c.left+c.right)-
(b.left+b.right)}a.updateRange();var f=setTimeout(function(){a.columnPadding={top:0,right:0,bottom:0,left:0};var b=[];a.columnElems&&a.showHeader?b=a.columnElems.toArray():a.footerElems&&a.showFooter?b=a.footerElems.toArray():a.cellElems&&(b=a.cellElems.toArray());b&&0<b.length&&(a.columnPadding=a.commonService.getPadding(b[0].nativeElement.firstElementChild));a.currentHeaderHeight=a.headerElem?a.headerElem.nativeElement.offsetHeight:0;a.currentFooterHeight=a.footerElem?a.footerElem.nativeElement.offsetHeight:
0;a.updateVisibleRange();a.updateRange();var c=setTimeout(function(){a.blockMarginTop=a.currentHeaderHeight;a.updateBlockSize();a.checkForSelectionChange();if(a.rowElems){var b=a.rowElems.toArray();a.avgRowHeight=0;if(b&&0<b.length){for(var d=0,e=0,f=0;f<b.length&&f<a.currentRowList.length;f++)e+=b[f].nativeElement.offsetHeight,d++;0<d&&(a.avgRowHeight=Math.floor(e/d))}}a.updateScrollSize();a.updateColumnWidth();a.updateScrollSize();a.updateSelectContentPos();a.animateColumnSize.height=a.currentHeaderHeight;
a.animateRowSize.width=a.allColWidth<a.clientRect.width?a.allColWidth:a.clientRect.width;a.animateRowSize.height=a.avgRowHeight;a.updateComplete.emit(null);a.isUpdateActive=!1;clearTimeout(c)},1);clearTimeout(f)},1);clearTimeout(a.updateTimer)},100))};b.prototype.updateVisibleRange=function(){this.visibleRange=1;var a=this.rowElems.toArray();if(a&&0<a.length){for(var b=0,c=0,f=0;f<a.length&&f<this.currentRowList.length;f++)c+=a[f].nativeElement.offsetHeight,b++;0<b&&(a=Math.floor(c/b),0<a&&(this.visibleRange=
Math.floor((this.clientRect.height-(this.currentHeaderHeight+this.currentFooterHeight))/a)+1))}};b.prototype.updateScrollSize=function(){this.updateLeftBlockSize();this.updateRightBlockSize();for(var a=this.allColWidth=0;a<this.currentColumnList.length;a++)this.allColWidth+=this.getColumnWidth(this.currentColumnList[a].data)+this.columnPadding.left+this.columnPadding.right+6;this.scrollSize={width:this.allColWidth-this.clientRect.width+this.leftBlockSize.width+this.rightBlockSize.width,height:this.avgRowHeight*
this.currentRowList.length-this.clientRect.height+this.currentHeaderHeight+this.currentFooterHeight+this.avgRowHeight};this.isVerScrollVisible()&&(this.scrollSize.width+=16);this.isHorScrollVisible()&&(this.scrollSize.height+=16);this.scrollSize.width=0<this.scrollSize.width?this.scrollSize.width:0;this.scrollSize.height=0<this.scrollSize.height?this.scrollSize.height:0;this.maxScrollPos={x:this.scrollSize.width,y:this.scrollSize.height};this.currentScrollPos.x>this.maxScrollPos.x&&this.changeHorizontalScrollPos(this.maxScrollPos.x);
this.currentScrollPos.y>this.maxScrollPos.y&&this.changeVerticalScrollPos(this.maxScrollPos.y);this.scrollBarSize={width:this.isVerScrollVisible()?this.clientRect.width-20:this.clientRect.width-4,height:this.isHorScrollVisible()?this.clientRect.height-20:this.clientRect.height-4};this.scrollLargeChange={x:this.scrollBarSize.width,y:this.scrollBarSize.height-this.currentHeaderHeight-this.currentFooterHeight};this.contentLeftPos=this.initialContentLeftPos-this.leftBlockSize.width;this.blockHoverRect=
{height:this.avgRowHeight-2,left:0,top:-9999999,width:this.clientRect.width-2};var b=this.avgRowHeight-2,c=this.clientRect.width-2;0!=this.scrollSize.width||this.isThereFixedColumns("right")?this.isVerScrollVisible()&&(this.blockHoverRect.width-=17,c-=17):(this.blockHoverRect.width=this.allColWidth+this.leftBlockSize.width-2,c=this.blockHoverRect.width);this.blockSelectRect.map(function(a){a.width=c;a.height=b})};b.prototype.updateSelectContentPos=function(){var a=this;a.blockSelectRect.length=0;
if(a.isSelectedTemplatePresent){var b=a.commonService.getPageRect(a.elemRef.nativeElement.firstElementChild),c=a.getRowElems();a.blockSelectHeight=a.avgRowHeight-2;a.currentSelectedRows.map(function(d){var e=a.getRowScrollIndex(d);d={height:a.blockSelectHeight,left:0,top:-9999999,width:a.clientRect.width-2};0!=a.scrollSize.width||a.isThereFixedColumns("right")?a.isVerScrollVisible()&&(d.width-=17):d.width=a.allColWidth+a.leftBlockSize.width-2;c&&0<=e&&e<c.length?(e=a.commonService.getPageRect(c[e].nativeElement),
d.top=e.top-b.top-1):d.top=-9999999;a.blockSelectRect.push(d)})}};b.prototype.onWindowMouseMove=function(a){if(this.isEnabled&&(1!=a.buttons&&(this.clearDragDropSettings(),this.resetReorderColumnSettings()),1==a.buttons&&this.isColumnResizing)){var b=this.commonService.getShiftPos();a={x:a.pageX-b.x,y:a.pageY-b.y};if(this.resizeColumn){var c;if(this.isAutoSizeColumnsActive)if(b=a.x-this.columnStartPos.x,0>b){if(c=this.getPrevFlatColumn(this.resizeColumn,this.resizeColumn[this.options.columnFields.fixed],
!0)){var f=this.getColumnWidth(c)+b;var e=this.getColumnWidth(c,"min");f>e?(this.setColumnWidth(c,f),this.updateCellWidth(c),this.updateChildColumnsWidth(c,f,b),c=this.getColumnWidth(this.resizeColumn)-b,this.setColumnWidth(this.resizeColumn,c),this.updateCellWidth(this.resizeColumn),this.updateChildColumnsWidth(this.resizeColumn,c,-b)):(this.setColumnWidth(c,e),this.updateCellWidth(c))}}else{if(c=this.getColumnWidth(this.resizeColumn)-b,f=this.getColumnWidth(this.resizeColumn,"min"),c=c>f?c:f,c>
f&&(this.setColumnWidth(this.resizeColumn,c),this.updateCellWidth(this.resizeColumn),this.updateChildColumnsWidth(this.resizeColumn,c,-b),c=this.getPrevFlatColumn(this.resizeColumn,this.resizeColumn[this.options.columnFields.fixed],!0)))f=this.getColumnWidth(c)+b,this.setColumnWidth(c,f),this.updateCellWidth(c),this.updateChildColumnsWidth(c,f,b)}else b=a.x-this.columnStartPos.x,c=this.getColumnWidth(this.resizeColumn),this.isColumnFixed(this.resizeColumn,"right")?c-=b:c+=b,c=0<c?c:0,this.setColumnWidth(this.resizeColumn,
c),this.updateCellWidth(this.resizeColumn),this.updateChildColumnsWidth(this.resizeColumn,c,b);this.updateScrollSize()}this.columnStartPos=a}};b.prototype.onWindowMouseUp=function(a){this.isEnabled&&this.isColumnResizing&&(this.updateColumnWidth(this.resizeColumn),this.isColumnResizing=!1,this.columnSizeChanged.emit({column:this.resizeColumn}),this.updateRange());this.removeDropMark();this.clearDragDropSettings();this.resetReorderColumnSettings();this.hoverGroup=this.hoverColumn=this.clickedCell=
null;this.resizeColumnIndex=-1;this.changeCursor();this.isScrollActive=this.isCtrlDragEntered=!1;this.isEnabled&&this.refresh()};b.prototype.onWindowTouchEnd=function(a){this.isEnabled&&(this.hideCalendar(),this.hideColorPopup(),this.hideDropList())};b.prototype.getRowLevel=function(a){var b=0;for(a=this.getRowParent(a);a;)b++,a=this.getRowParent(a);return b};b.prototype.getRowParent=function(a){var b=null;if(a)for(var c=0;c<this.fullList.length;c++)if(this.fullList[c][this.options.rowFields.id]==
a[this.options.rowFields.pid]){b=this.fullList[c];break}return b};b.prototype.getPrevRow=function(a){var b=null;if(a){var c=this.rows,f=this.getRowParent(a);f&&(c=f[this.options.rowFields.rows]);a=c.indexOf(a);a=0<a?a-1:-1;0<=a&&(b=c[a])}return b};b.prototype.getNextRow=function(a){var b=null;if(a){var c=this.rows,f=this.getRowParent(a);f&&(c=f[this.options.rowFields.rows]);a=c.indexOf(a);a=a<c.length-1?a+1:-1;0<=a&&(b=c[a])}return b};b.prototype.moveRow=function(a,b,c,f){if(a){this.allowUpdate=!1;
var d=-1;switch(b){case integralui_core_1.IntegralUIMoveDirection.At:d=f;break;case integralui_core_1.IntegralUIMoveDirection.Down:f=this.getRowCurrentIndex(a)+1;f<this.currentRowList.length&&(c=this.currentRowList[f].data);break;case integralui_core_1.IntegralUIMoveDirection.First:d=0;break;case integralui_core_1.IntegralUIMoveDirection.Left:c=this.getRowParent(a);break;case integralui_core_1.IntegralUIMoveDirection.Right:c=this.getPrevRow(a);break;case integralui_core_1.IntegralUIMoveDirection.Up:f=
this.getRowCurrentIndex(a)-1,0<=f&&(c=this.currentRowList[f].data)}if(Array.isArray(a)){f=[];for(var h=0;h<a.length;h++){for(var g=!1,m=this.getRowParent(a[h]);m;){if(0<=a.indexOf(m)){g=!0;break}m=this.getRowParent(m)}g||f.push(a[h])}if(0<f.length)if(a=this.getRowCurrentIndex(f[0]),h=this.getRowCurrentIndex(f[f.length-1]),a<=h)for(h=0;h<f.length;h++)this.moveRowAt(f[h],c,b,d);else for(h=f.length-1;0<=h;h--)this.moveRowAt(f[h],c,b,d)}else this.moveRowAt(a,c,b,d);this.allowUpdate=!0;this.updateCurrentLayout(!0);
this.change.emit({type:"move-row"})}};b.prototype.moveRowAt=function(a,b,c,f){b&&this.removeRow(a)&&(c==integralui_core_1.IntegralUIMoveDirection.First||c==integralui_core_1.IntegralUIMoveDirection.Right||c==integralui_core_1.IntegralUIMoveDirection.Last||c==integralui_core_1.IntegralUIMoveDirection.At?this.insertRowAt(a,f,b):c==integralui_core_1.IntegralUIMoveDirection.Before?this.insertRowBefore(a,b):(c==integralui_core_1.IntegralUIMoveDirection.After||c==integralui_core_1.IntegralUIMoveDirection.Left)&&
this.insertRowAfter(a,b))};b.prototype.beginLoad=function(a){a&&(0>this.options.loadRows.indexOf(a)&&this.options.loadRows.push(a),this.refresh())};b.prototype.endLoad=function(a){a=this.options.loadRows.indexOf(a);0<=a&&this.options.loadRows.splice(a,1);this.updateCurrentLayout(!0)};b.prototype.isRowLoading=function(a){return 0<=this.options.loadRows.indexOf(a)?!0:!1};b.prototype.getColumnOpacity=function(a){return 1};b.prototype.getHeaderRect=function(){return this.headerRowElem?this.commonService.getPageRect(this.headerRowElem.nativeElement):
{top:0,right:0,bottom:0,left:0,height:0,width:0,x:0,y:0}};b.prototype.scrollTo=function(a){if(a){this.suspendLayout();for(var b=this.getRowParent(a);null!=b;)this.expand(b),b=this.getRowParent(b);this.resumeLayout();var c=this,f=setTimeout(function(){var b=c.getRowCurrentIndex(a);0<=b&&(c.scrollPos({x:c.currentScrollPos.x,y:c.avgRowHeight*(b+1-c.visibleRange/2)}),c.updateLayout());clearTimeout(f)},150)}};b.prototype.rowMouseDown=function(a,b,c){this.isEnabled&&(this.hideColorPopup(),this.processRowSelection(a,
b.data),1==a.which&&!this.isDragActive&&this.isDragAllowed(b.data)&&(this.dragStartPos=this.commonService.getMousePos(a),this.dragEndPos=this.commonService.getMousePos(a),this.dragHandlePos={top:-9999999,left:0}),this.prevClickedObj&&(this.prevClickedObj.isClicked=!1),b.isClicked=!0,b.clickPos=this.commonService.getClientPos(a,this.elemRef.nativeElement.firstElementChild),b.clickPos.x-=this.leftBlockSize.width,this.prevClickedObj=b,this.updateSelectContentPos());a.stopPropagation()};b.prototype.rowMouseUp=
function(a,b){this.isEnabled&&(this.isDragActive&&this.rowDragDrop(a,b),this.updateRowSelection(a,b.data),this.updateSelectContentPos())};b.prototype.getControlStyle=function(){var a={cursor:this.ctrlCursor};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};b.prototype.updateColumnStyle=function(a){if(a&&!a.isEmpty){a.style={header:[],footer:[],sorting:[]};a.inlineStyle=this.getColumnInlineStyle(a.data[this.options.columnFields.style]);
a.style.header.push(this.columnHeaderClassName);a.style.header.push(this.options.currentStyle.column.header.normal);this.isScrollActive||(a.data==this.selectedColumn?a.style.header.push(this.options.currentStyle.column.header.selected):a.data==this.hoverColumn&&a.style.header.push(this.options.currentStyle.column.header.hovered));a.style.footer.push(this.columnFooterClassName);a.style.footer.push(this.options.currentStyle.column.footer.normal);this.isScrollActive||(a.data==this.selectedColumn?a.style.footer.push(this.options.currentStyle.column.footer.selected):
a.data==this.hoverColumn&&a.style.footer.push(this.options.currentStyle.column.footer.hovered));switch(this.gridLines){case integralui_base_grid_1.IntegralUIGridLines.None:a.style.header.push(this.options.currentStyle.gridLines.none);a.style.footer.push(this.options.currentStyle.gridLines.none);break;case integralui_base_grid_1.IntegralUIGridLines.Horizontal:a.style.header.push(this.options.currentStyle.gridLines.horizontal);a.style.footer.push(this.options.currentStyle.gridLines.horizontal);break;
case integralui_base_grid_1.IntegralUIGridLines.Vertical:a.style.header.push(this.options.currentStyle.gridLines.vertical);a.style.footer.push(this.options.currentStyle.gridLines.vertical);break;default:a.style.header.push(this.options.currentStyle.gridLines.both),a.style.footer.push(this.options.currentStyle.gridLines.both)}if(this.isSortingAllowed()&&this.isSortingColumn(a.data))switch(this.options.sorting){case integralui_core_1.IntegralUISortOrder.Ascending:a.style.sorting.push(this.options.currentStyle.column.sorting.normal.ascending);
a.data==this.selectedColumn&&a.style.sorting.push(this.options.currentStyle.column.sorting.selected.ascending);break;case integralui_core_1.IntegralUISortOrder.Descending:a.style.sorting.push(this.options.currentStyle.column.sorting.normal.descending),a.data==this.selectedColumn&&a.style.sorting.push(this.options.currentStyle.column.sorting.selected.descending)}}};b.prototype.updateRowStyle=function(a){if(a&&!a.isEmpty&&!a.status){a.style={row:[],expandBox:[],cell:[]};a.inlineStyle=this.getRowInlineStyle(a.data[this.options.rowFields.style],
a.hide);a.style.row.push(this.rowClassName);a.style.row.push(this.options.currentStyle.row.general.normal);a.style.cell.push(this.cellClassName);a.style.cell.push(this.options.currentStyle.row.cell.normal);this.isRowEnabled(a.data)?this.isRowSelected(a.data)?(a.style.row.push(this.options.currentStyle.row.general.selected),a.style.cell.push(this.options.currentStyle.row.cell.selected)):this.isRowHovered(a.data)&&(a.style.row.push(this.options.currentStyle.row.general.hovered),a.style.cell.push(this.options.currentStyle.row.cell.hovered)):
(a.style.row.push(this.options.currentStyle.row.general.disabled),a.style.cell.push(this.options.currentStyle.row.cell.disabled));switch(this.gridLines){case integralui_base_grid_1.IntegralUIGridLines.None:a.style.cell.push(this.options.currentStyle.gridLines.none);break;case integralui_base_grid_1.IntegralUIGridLines.Horizontal:a.style.cell.push(this.options.currentStyle.gridLines.horizontal);break;case integralui_base_grid_1.IntegralUIGridLines.Vertical:a.style.cell.push(this.options.currentStyle.gridLines.vertical);
break;default:a.style.cell.push(this.options.currentStyle.gridLines.both)}(this.isThereChildRows||a.data[this.options.rowFields.hasChildren])&&a.style.expandBox.push(this.options.currentStyle.row.expandBox.general);if(a.data[this.options.rowFields.hasChildren]&&(this.isThereVisibleChildren(a.data)||!a.data[this.options.rowFields.rows]||a.data[this.options.rowFields.rows]&&0==a.data[this.options.rowFields.rows].length)||this.isThereVisibleChildren(a.data))this.isRowLoading(a.data)?a.style.expandBox.push(this.options.currentStyle.row.expandBox.load):
!1!==a.data[this.options.rowFields.expanded]?a.style.expandBox.push(this.options.currentStyle.row.expandBox.collapsed):a.style.expandBox.push(this.options.currentStyle.row.expandBox.expanded);for(var b=0;b<a.cells.length;b++){var c=a.cells[b];c.style=this.options.allowFocus&&this.currentFocusCell&&c.data==this.currentFocusCell.data?{content:"iui-grid-row-cell-content iui-grid-row-cell-content-focused"}:{content:"iui-grid-row-cell-content"}}}};b.prototype.getColumnStyle=function(a){return a?{header:this.getColumnHeaderStyle(a.header),
body:this.getColumnBodyStyle(a.body),footer:this.getColumnFooterStyle(a.footer),sorting:this.getColumnSortingStyle(a.sorting)}:this.getDefaultColumnStyle()};b.prototype.getColumnHeaderStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnHeaderClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnHeaderClassName+"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,this.columnHeaderClassName),
hovered:this.commonService.isFieldAvailable(a.hovered,this.columnHeaderClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.columnHeaderClassName+"-selected")}:this.getDefaultColumnHeaderStyle()};b.prototype.getColumnBodyStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnBodyClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnBodyClassName+"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,
this.columnBodyClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.columnBodyClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.columnBodyClassName+"-selected")}:this.getDefaultColumnBodyStyle()};b.prototype.getColumnFooterStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnFooterClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnFooterClassName+
"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,this.columnFooterClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.columnFooterClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.columnFooterClassName+"-selected")}:this.getDefaultColumnFooterStyle()};b.prototype.getColumnSortingStyle=function(a){return a?{normal:this.getColumnSortingNormalStyle(a.normal),selected:this.getColumnSortingSelectedStyle(a.selected)}:this.getDefaultColumnSortingStyle()};
b.prototype.getColumnSortingNormalStyle=function(a){return this.commonService.isString(a)?a:a?{ascending:this.commonService.isFieldAvailable(a.ascending,this.sortingClassName+"-ascending"),descending:this.commonService.isFieldAvailable(a.descending,this.sortingClassName+"-descending")}:{ascending:this.defaultStyle.column.sorting.normal.ascending,descending:this.defaultStyle.column.sorting.normal.descending}};b.prototype.getColumnSortingSelectedStyle=function(a){return this.commonService.isString(a)?
a:a?{ascending:this.commonService.isFieldAvailable(a.ascending,this.sortingClassName+"-ascending-selected"),descending:this.commonService.isFieldAvailable(a.descending,this.sortingClassName+"-descending-selected")}:{ascending:this.defaultStyle.column.sorting.selected.ascending,descending:this.defaultStyle.column.sorting.selected.descending}};b.prototype.getRowStyle=function(a){return a?{general:this.getRowGeneralStyle(a.general),expandBox:this.getRowExpandBoxStyle(a.expandBox),cell:this.getRowCellStyle(a.cell)}:
this.getDefaultRowStyle()};b.prototype.getRowGeneralStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.disabled,this.rowClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.focused,this.rowClassName+"-focused"),normal:this.commonService.isFieldAvailable(a.normal,this.rowClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.rowClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.rowClassName+
"-selected")}:this.getDefaultRowGeneralStyle()};b.prototype.getRowExpandBoxStyle=function(a){return this.commonService.isString(a)?a:a?{general:this.commonService.isFieldAvailable(a.disabled,this.expandBoxClassName),load:this.commonService.isFieldAvailable(a.focused,this.expandBoxClassName+"-load"),expanded:this.commonService.isFieldAvailable(a.normal,this.expandBoxClassName+"-open"),collapsed:this.commonService.isFieldAvailable(a.hovered,this.expandBoxClassName+"-close")}:this.getDefaultRowExpandBoxStyle()};
b.prototype.getRowCellStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.disabled,this.cellClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.focused,this.cellClassName+"-focused"),normal:this.commonService.isFieldAvailable(a.normal,this.cellClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.cellClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.cellClassName+"-selected")}:
this.getDefaultRowCellStyle()};b.prototype.getGridLinesStyle=function(a){return a?{none:this.commonService.isFieldAvailable(a.none,this.gridLinesClassName+"-none"),horizontal:this.commonService.isFieldAvailable(a.horizontal,this.gridLinesClassName+"-horizontal"),vertical:this.commonService.isFieldAvailable(a.vertical,this.gridLinesClassName+"-vertical"),both:this.commonService.isFieldAvailable(a.both,this.gridLinesClassName+"-both")}:this.getDefaultGridLinesStyle()};b.prototype.getDefaultGridStyle=
function(){return{general:this.getDefaultGeneralStyle(),column:this.getDefaultColumnStyle(),row:this.getDefaultRowStyle(),gridLines:this.getDefaultGridLinesStyle()}};b.prototype.getDefaultColumnStyle=function(){return{header:this.getDefaultColumnHeaderStyle(),body:this.getDefaultColumnBodyStyle(),footer:this.getDefaultColumnFooterStyle(),sorting:this.getDefaultColumnSortingStyle()}};b.prototype.getDefaultColumnHeaderStyle=function(){return{cell:this.defaultStyle.column.header.cell,disabled:this.defaultStyle.column.header.disabled,
normal:this.defaultStyle.column.header.normal,hovered:this.defaultStyle.column.header.hovered,selected:this.defaultStyle.column.header.selected}};b.prototype.getDefaultColumnBodyStyle=function(){return{cell:this.defaultStyle.column.body.cell,disabled:this.defaultStyle.column.body.disabled,normal:this.defaultStyle.column.body.normal,hovered:this.defaultStyle.column.body.hovered,selected:this.defaultStyle.column.body.selected}};b.prototype.getDefaultColumnFooterStyle=function(){return{cell:this.defaultStyle.column.footer.cell,
disabled:this.defaultStyle.column.footer.disabled,normal:this.defaultStyle.column.footer.normal,hovered:this.defaultStyle.column.footer.hovered,selected:this.defaultStyle.column.footer.selected}};b.prototype.getDefaultColumnSortingStyle=function(){return{normal:{ascending:this.defaultStyle.column.sorting.normal.ascending,descending:this.defaultStyle.column.sorting.normal.descending},selected:{ascending:this.defaultStyle.column.sorting.selected.ascending,descending:this.defaultStyle.column.sorting.selected.descending}}};
b.prototype.getDefaultRowStyle=function(){return{general:this.getDefaultRowGeneralStyle(),expandBox:this.getDefaultRowExpandBoxStyle(),cell:this.getDefaultRowCellStyle()}};b.prototype.getDefaultRowGeneralStyle=function(){return{disabled:this.defaultStyle.row.general.disabled,focused:this.defaultStyle.row.general.focused,normal:this.defaultStyle.row.general.normal,hovered:this.defaultStyle.row.general.hovered,selected:this.defaultStyle.row.general.selected}};b.prototype.getDefaultRowExpandBoxStyle=
function(){return{general:this.defaultStyle.row.expandBox.general,load:this.defaultStyle.row.expandBox.load,expanded:this.defaultStyle.row.expandBox.expanded,collapsed:this.defaultStyle.row.expandBox.collapsed}};b.prototype.getDefaultRowCellStyle=function(){return{disabled:this.defaultStyle.row.cell.disabled,focused:this.defaultStyle.row.cell.focused,normal:this.defaultStyle.row.cell.normal,hovered:this.defaultStyle.row.cell.hovered,selected:this.defaultStyle.row.cell.selected}};b.prototype.getDefaultGridLinesStyle=
function(){return{none:this.defaultStyle.gridLines.none,horizontal:this.defaultStyle.gridLines.horizontal,vertical:this.defaultStyle.gridLines.vertical,both:this.defaultStyle.gridLines.both}};b.prototype.updateStyle=function(a){this.options.currentStyle=a?{general:this.getGeneralStyle(a.general),column:this.getColumnStyle(a.column),row:this.getRowStyle(a.row),gridLines:this.getGridLinesStyle(a.gridLines)}:this.getDefaultGridStyle()};b.prototype.resetRefresh=function(){this.refreshTimer&&clearTimeout(this.refreshTimer);
this.refreshTimer=null};b.prototype.refresh=function(a){this.resetRefresh();this.updateControlClass();for(a=0;a<this.scrollColumnList.length;a++)for(var b=0;b<this.scrollColumnList[a].columns.length;b++)this.updateColumnStyle(this.scrollColumnList[a].columns[b]);for(a=0;a<this.scrollLeftColumnList.length;a++)for(b=0;b<this.scrollLeftColumnList[a].columns.length;b++)this.updateColumnStyle(this.scrollLeftColumnList[a].columns[b]);for(a=0;a<this.scrollRightColumnList.length;a++)for(b=0;b<this.scrollRightColumnList[a].columns.length;b++)this.updateColumnStyle(this.scrollRightColumnList[a].columns[b]);
for(b=0;b<this.scrollFooterList.length;b++)this.updateColumnStyle(this.scrollFooterList[b]);for(b=0;b<this.scrollLeftFooterList.length;b++)this.updateColumnStyle(this.scrollLeftFooterList[b]);for(b=0;b<this.scrollRightFooterList.length;b++)this.updateColumnStyle(this.scrollRightFooterList[b]);for(a=0;a<this.scrollRowList.length;a++)this.updateRowStyle(this.scrollRowList[a]);for(a=0;a<this.scrollLeftRowList.length;a++)this.updateRowStyle(this.scrollLeftRowList[a]);for(a=0;a<this.scrollRightRowList.length;a++)this.updateRowStyle(this.scrollRightRowList[a])};
__decorate([core_1.ContentChildren(integralui_core_1.IntegralUITemplate),__metadata("design:type",core_1.QueryList)],b.prototype,"templates",void 0);__decorate([core_1.ViewChild("groupingPanel",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"groupingPanelElem",void 0);__decorate([core_1.ViewChild("dragGroup",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"dragGroupElem",void 0);__decorate([core_1.ViewChildren("headerCellElem",
{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"columnElems",void 0);__decorate([core_1.ViewChildren("headerLeftCellElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"columnLeftElems",void 0);__decorate([core_1.ViewChildren("headerRightCellElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"columnRightElems",void 0);__decorate([core_1.ViewChildren("footerCellElem",{read:core_1.ElementRef}),
__metadata("design:type",core_1.QueryList)],b.prototype,"footerElems",void 0);__decorate([core_1.ViewChildren("rowElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"rowElems",void 0);__decorate([core_1.ViewChildren("rowLeftElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"rowLeftElems",void 0);__decorate([core_1.ViewChildren("rowRightElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,
"rowRightElems",void 0);__decorate([core_1.ViewChildren("rowCellElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"cellElems",void 0);__decorate([core_1.ViewChildren("rowLeftCellElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"cellLeftElems",void 0);__decorate([core_1.ViewChildren("rowRightCellElem",{read:core_1.ElementRef}),__metadata("design:type",core_1.QueryList)],b.prototype,"cellRightElems",void 0);__decorate([core_1.ViewChild("header",
{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"headerElem",void 0);__decorate([core_1.ViewChild("headerRow",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"headerRowElem",void 0);__decorate([core_1.ViewChild("footer",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"footerElem",void 0);__decorate([core_1.ViewChild("body",{read:core_1.ElementRef,"static":!1}),
__metadata("design:type",core_1.ElementRef)],b.prototype,"bodyElem",void 0);__decorate([core_1.ViewChild("bodyLeft",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"bodyLeftElem",void 0);__decorate([core_1.ViewChild("bodyRight",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"bodyRightElem",void 0);__decorate([core_1.ViewChild("verScroll",{"static":!1}),__metadata("design:type",integralui_scrollbar_1.IntegralUIScrollBar)],
b.prototype,"verScrollCmp",void 0);__decorate([core_1.ViewChild("horScroll",{"static":!1}),__metadata("design:type",integralui_scrollbar_1.IntegralUIScrollBar)],b.prototype,"horScrollCmp",void 0);__decorate([core_1.ViewChild("contentBlock",{read:core_1.ViewContainerRef,"static":!1}),__metadata("design:type",core_1.ViewContainerRef)],b.prototype,"contentRef",void 0);__decorate([core_1.ViewChild("paginator",{read:core_1.ElementRef,"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,
"paginatorElem",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean)],b.prototype,"autoExpand",void 0);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"expandColumnIndex",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"expandColumnID",null);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],b.prototype,
"grouping",null);__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],b.prototype,"groups",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"indent",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],b.prototype,"showHeader",null);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],
b.prototype,"showFooter",null);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"afterCollapse",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"afterExpand",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"beforeCollapse",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"beforeExpand",void 0);__decorate([core_1.Output(),
__metadata("design:type",core_1.EventEmitter)],b.prototype,"groupAdding",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"groupAdded",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"groupRemoving",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"groupRemoved",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"groupOrderChanged",
void 0);__decorate([core_1.HostListener("document:mousemove",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowMouseMove",null);__decorate([core_1.HostListener("document:mouseup",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowMouseUp",null);__decorate([core_1.HostListener("document:touchend",["$event"]),
__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowTouchEnd",null);return b=__decorate([core_1.Component({selector:"iui-grid",template:'\n\t\t<div [ngClass]="getControlClass()" (DOMMouseScroll)="gridMouseWheel($event)" (mousewheel)="gridMouseWheel($event)" (mouseenter)="gridMouseEnter($event)" (mousemove)="gridMouseMove($event)" (mouseup)="gridMouseUp($event)" (mouseleave)="gridMouseLeave($event)" [ngStyle]="getControlStyle()" (dragenter)="ctrlDragEnter($event)" (dragleave)="ctrlDragLeave($event)" (dragover)="ctrlDragOver($event)" (drop)="ctrlDragDrop($event)" (dragend)="ctrlDragEnd($event)" (scroll)="onGridScroll($event)" (touchstart)="ctrlTouchStart($event)" (touchend)="ctrlTouchEnd($event)">\n\t\t\t<div *ngIf="grouping.enabled" class="iui-grid-grouping-panel" (dragenter)="groupPanelDragEnter($event)" (mouseenter)="groupPanelMouseEnter($event)" (mousemove)="groupPanelMouseMove($event)" (mouseleave)="groupPanelMouseLeave($event)" (mouseup)="groupPanelMouseUp($event)" [ngStyle]="{ width: groupPanelSize.width + \'px\' }" #groupingPanel>\n\t\t\t\t<span *ngFor="let group of activeGroups; let i = index" (mouseenter)="groupMouseEnter($event, group)" (mouseleave)="groupMouseLeave($event, group)">\n\t\t\t\t\t<div class="iui-grid-grouping-panel-item" [ngClass]="{ \'iui-grid-grouping-marker\': i < activeGroups.length - 1 }" [ngStyle]="{ \'margin-left\': group==hoverGroup ? groupReorderMargin + \'px\' : \'3px\', display: group == reorderGroup ? \'none\' : \'inline-block\' }">\n\t\t\t\t\t\t<p class="iui-grid-grouping-panel-item-label" (mousedown)="groupMouseDown($event, group)">{{getGroupText(group)}}</p>\n\t\t\t\t\t\t<span class="iui-grid-grouping-panel-item-button" (mousedown)="groupButtonMouseDown($event, group)"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t\t<div *ngIf="!groupReorderActive" class="iui-grid-grouping-panel-toolbar">\n\t\t\t\t\t<div class="iui-grid-grouping-panel-toolbar-button-add" [iuiDropDown]="options.grouping.dropdown" (dropDownOpen)="onAddGroupDropDownOpen($event)">\n\t\t\t\t\t\t<span></span>\n                        <ng-template let-obj [iuiTemplate]="{ type: \'dropdown\' }">\n                            <ul *ngIf="isEnabled" class="iui-grid-grouping-panel-dropdown-list" (mousedown)="groupListMouseDown($event)">\n                                <li *ngFor="let item of options.grouping.dropdown.items" (mousedown)="groupListItemSelected(item)">\n                                    <span class="iui-grid-grouping-panel-dropdown-list-checkbox" [ngClass]="{ \'iui-grid-grouping-panel-dropdown-list-checkbox-true\': checkColumnPresence(item.id) }"></span>\n                                    <span>{{item.text}}</span>\n                                </li>\n                            </ul>\n                        </ng-template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div *ngIf="activeGroups.length==0" class="iui-grid-grouping-panel-item" style="margin-left:-9999999px;">\n\t\t\t\t\t<p class="iui-grid-grouping-panel-item-label">Empty Group</p>\n\t\t\t\t\t<span class="iui-grid-grouping-panel-item-button"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="iui-grid-grouping-panel-item" style="position:absolute;pointer-events:none;" [ngStyle]="{ display: dragGroupSettings.display, top: dragGroupSettings.top + \'px\', left: dragGroupSettings.left + \'px\' }" #dragGroup>\n\t\t\t\t\t<p class="iui-grid-grouping-panel-item-label">{{dragGroupSettings.label}}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div *ngIf="showHeader" class="iui-grid-block iui-grid-block-top" [ngStyle]="{ left: -contentLeftPos + \'px\', top: groupPanelHeight + \'px\' }" #header>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr *ngFor="let columnRow of scrollColumnList" style="position:relative;" #headerRow>\n\t\t\t\t\t\t<td *ngFor="let column of columnRow.columns" [attr.colspan]="column.colSpan" [attr.rowspan]="column.rowSpan" [ngClass]="column.style.header" (mousemove)="columnMouseMove($event, column)" (mousedown)="columnMouseDown($event, column)" (mouseup)="columnMouseUp($event, column)" (mouseenter)="columnMouseEnter($event, column)" (mouseleave)="columnMouseLeave($event, column)" (click)="columnClickEvent($event, column)" (dblclick)="columnDblClickEvent($event, column)" (contextmenu)="columnRightClickEvent($event, column)" (touchstart)="columnTouchStart($event, column)" [ngStyle]="column.inlineStyle.header" #headerCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.headerHeight, opacity: getColumnOpacity(column), \'text-align\': getColumnAlignment(column.data), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span *ngIf="isSortingColumn(column.data)" [ngClass]="column.style.sorting" data-element="sort-button"></span>\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="headerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ height: animateColumnSize.height + \'px\', width: column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-left\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ left: column.clickPos.x + \'px\', height: animateColumnSize.height + \'px\', width: getColumnWidth(column.data) - column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-right\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\x3c!-- <td *ngIf="reorderColumnObj && !isGroupPanelHovered && isGridHovered" [ngClass]="reorderColumnObj.style.header" [ngStyle]="{ position: \'absolute\', top:0, left: reorderColumnObjPos.left + \'px\', \'pointer-events\': \'none\', \'z-index\': 999 }">\n\t\t\t\t\t\t\t<div [ngStyle]="{ opacity: \'0.5\', \'text-align\': getColumnAlignment(reorderColumnObj.data), width: getColumnWidth(reorderColumnObj.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="headerData[0]" [iuiTemplateOutletContext]="{$implicit: (reorderColumnObj.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> --\x3e\n\t\t\t\t\t\t<td rowspan="1" style="padding: 8px;opacity:0;">_</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="showHeader && isThereFixedColumns(\'left\')" class="iui-grid-block iui-grid-block-top-left" [ngStyle]="{ left: 0, top: groupPanelHeight + \'px\' }" #header>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr style="position:relative;" *ngFor="let columnRow of scrollLeftColumnList" #headerRow>\n\t\t\t\t\t\t<td *ngFor="let column of columnRow.columns" [attr.colspan]="column.colSpan" [attr.rowspan]="column.rowSpan" [ngClass]="column.style.header" (mousemove)="columnMouseMove($event, column)" (mousedown)="columnMouseDown($event, column)" (mouseup)="columnMouseUp($event, column)" (mouseenter)="columnMouseEnter($event, column)" (mouseleave)="columnMouseLeave($event, column)" (click)="columnClickEvent($event, column)" (dblclick)="columnDblClickEvent($event, column)" (contextmenu)="columnRightClickEvent($event, column)" (touchstart)="columnTouchStart($event, column)" [ngStyle]="column.inlineStyle.header" #headerLeftCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.headerHeight, opacity: getColumnOpacity(column), \'text-align\': getColumnAlignment(column.data), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span *ngIf="isSortingColumn(column.data)" [ngClass]="column.style.sorting" data-element="sort-button"></span>\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="headerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ height: animateColumnSize.height + \'px\', width: column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-left\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ left: column.clickPos.x + \'px\', height: animateColumnSize.height + \'px\', width: getColumnWidth(column.data) - column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-right\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="showHeader && isThereFixedColumns(\'right\')" class="iui-grid-block iui-grid-block-top-right" [ngStyle]="{ right: getBlockRightPos() + \'px\', top: groupPanelHeight + \'px\' }" #header>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr style="position:relative;" *ngFor="let columnRow of scrollRightColumnList" #headerRow>\n\t\t\t\t\t\t<td *ngFor="let column of columnRow.columns" [attr.colspan]="column.colSpan" [attr.rowspan]="column.rowSpan" [ngClass]="column.style.header" (mousemove)="columnMouseMove($event, column)" (mousedown)="columnMouseDown($event, column)" (mouseup)="columnMouseUp($event, column)" (mouseenter)="columnMouseEnter($event, column)" (mouseleave)="columnMouseLeave($event, column)" (click)="columnClickEvent($event, column)" (dblclick)="columnDblClickEvent($event, column)" (contextmenu)="columnRightClickEvent($event, column)" (touchstart)="columnTouchStart($event, column)" [ngStyle]="column.inlineStyle.header" #headerRightCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.headerHeight, opacity: getColumnOpacity(column), \'text-align\': getColumnAlignment(column.data), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span *ngIf="isSortingColumn(column.data)" [ngClass]="column.style.sorting" data-element="sort-button"></span>\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="headerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ height: animateColumnSize.height + \'px\', width: column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-left\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t        <span *ngIf="allowAnimation && column.isClicked" class="iui-grid-column-animate-select-block" [ngStyle]="{ left: column.clickPos.x + \'px\', height: animateColumnSize.height + \'px\', width: getColumnWidth(column.data) - column.clickPos.x + \'px\' }">\n\t\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-column-animate-select iui-grid-column-animate-select-right\': column.isClicked }" [ngStyle]="{ height: animateColumnSize.height + \'px\' }"></span>\n\t\t\t\t\t        </span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div class="iui-grid-block" [ngStyle]="{ \'margin-top\': blockMarginTop + groupPanelHeight + \'px\', height: blockSize.height + \'px\' }" (scroll)="onContentScroll($event)" #contentBlock style="overflow: visible;">\n\t\t\t\t<table cellpadding="0" cellspacing="0" style="position:absolute;" [ngStyle]="{ left: -contentLeftPos + \'px\' }" #body>\n\t\t\t\t\t<span [ngClass]="{ \'iui-grid-row-animate\': true, \'iui-grid-row-animate-enter-suspended\': allowAnimation && row.data == hoverRow }" *ngFor="let row of scrollRowList | slice:0:visibleRange; let i = index">\n\t\t\t\t\t\t<tr [ngClass]="row.style.row" (mouseenter)="rowMouseEnter($event, row)" (mouseleave)="rowMouseLeave($event, row)" (mousedown)="rowMouseDown($event, row, i)" (mousemove)="rowMouseMove($event, row, i)" (mouseup)="rowMouseUp($event, row)" [iuiDraggable]="row.draggable" (dragstart)="rowDragStart($event, row)" (dragover)="rowDragOver($event, row, i)" (drop)="rowDragDrop($event, row)" (click)="rowClickEvent($event, row)" (dblclick)="rowDblClickEvent($event, row)" (contextmenu)="rowRightClickEvent($event, row)" (touchstart)="rowTouchStart($event, row)" [ngStyle]="row.inlineStyle" #rowElem>\n\t\t\t\t\t\t\t<td [ngClass]="row.style.cell" *ngFor="let cell of row.cells | slice:0:numVisibleCells; let j = index" (mouseenter)="cellMouseEnter($event, cell)" (mouseleave)="cellMouseLeave($event)" (mousedown)="cellMouseDown($event, cell)" (click)="cellClickEvent($event, cell)" (mouseup)="cellMouseUp($event, cell, i, j)" (dblclick)="cellDblClickEvent($event, cell)" (contextmenu)="cellRightClickEvent($event, cell)" (touchend)="cellTouchEnd($event, cell, i, j)" [ngStyle]="cell.inlineStyle" #rowCellElem>\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.indent + \'px\', \'text-align\': cell.align, width: cell.width + \'px\', height: cell.height }" tabindex="{{cell.tabIndex}}" [iuiFocus]="isCellFocused(cell)" (focus)="cellGotFocus(cell)" (blur)="cellLostFocus(cell)" (keydown)="cellKeyDown($event, cell)" (keypress)="cellKeyPress($event, cell)" (keyup)="cellKeyUp($event, cell)">\n\t\t\t\t\t\t\t\t\t<span *ngIf="showExpandBox && cell.expandBoxAllowed" [ngClass]="row.style.expandBox" (mousedown)="expandBoxMouseDown($event, row.data)" (mouseup)="expandBoxMouseUp($event, row.data)" (touchstart)="expandBoxTouchStart($event, row.data)"></span>\n\t\t\t                        <span *ngIf="cell.isEditorVisible" [ngSwitch]="cell.editorType" [ngClass]="{ \'iui-editor-disabled\': !cell.isEditorEnabled }">\n\t\t\t                            \x3c!-- CHECKBOX --\x3e\n\t\t\t                            <div *ngSwitchCase="2" align="center">\n\t\t\t                                <span class="{{cell.editorClass}}"></span>\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                            \x3c!-- COLORPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="3" style="position: relative" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t                                <span class="iui-editor-color-background" [ngStyle]="{ background: getEditorColorValue(cell) }"></span>\n\t\t\t\t\t\t\t                <span class="iui-editor-label iui-editor-color-value">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DATEPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="4" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DROPLIST --\x3e\n\t\t\t                            <span *ngSwitchCase="5" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- IMAGE --\x3e\n\t\t\t                            <div *ngSwitchCase="6" class="iui-editor-image">\n\t\t\t                            \t<img *ngFor="let item of cell.editorValue" [src]="item.src" />\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                        \t\x3c!-- LABEL --\x3e\n\t\t\t                            <span *ngSwitchCase="7" class="iui-editor-label">{{getCellText(cell)}}</span>\n\n\t\t\t                            \x3c!-- NUMERIC --\x3e\n\t\t\t\t\t                    <input *ngSwitchCase="9" class="iui-editor-numeric" type="number" [(ngModel)]="cell.data[getCellField(\'value\')]" (change)="editorNumericValueChange(cell, $event.target.value)" (mousedown)="editorMouseTouch($event, cell)" (touchstart)="editorMouseTouch($event, cell)" (DOMMouseScroll)="editorMouseWheel($event)" (mousewheel)="editorMouseWheel($event)" draggable="true" (dragstart)="editorPreventDragStart($event)" />\n\n\t\t\t                            \x3c!-- PROGRESS --\x3e\n\t\t\t\t\t\t\t\t\t\t<div *ngSwitchCase="10" class="iui-editor-progress">\n\t\t\t\t\t\t\t\t\t\t\t<div class="iui-editor-progress-content" [ngStyle]="getEditorProgressStyle(cell)"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- RATING --\x3e\n\t\t\t                            <div *ngSwitchCase="11" class="iui-editor-rating" align="center">\n\t\t\t                                <iui-rating [controlStyle]="cell.editorStyle" [(ngModel)]="cell.data[getCellField(\'value\')]" [enabled]="cell.isEditorEnabled" [division]="cell.editorSettings.division" [increment]="cell.editorSettings.increment" [max]="cell.editorSettings.max" [stepSize]="cell.editorSettings.stepSize" (valueChanged)="editorValueChanged($event, cell)"></iui-rating>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- TEXTBOX --\x3e\n\t\t\t                            <span *ngSwitchCase="13">\n\t\t\t\t\t\t                    <input class="iui-editor-textbox" *ngIf="cell == currentEditorCell" type="text" [(ngModel)]="cell.data[getCellField(\'text\')]" (keydown)="editorKeyDown($event)" [iuiFocus]="isEditorFocused" (focus)="selectTextBoxContent($event)" (blur)="editorLostFocus()" />\n\t\t\t\t\t\t\t                <span class="iui-editor-label" *ngIf="cell != currentEditorCell">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- CUSTOM --\x3e\n\t\t\t                            <span [ngStyle]="{ display: cell.display }">\n\t\t\t\t\t\t\t\t\t\t\t<span *ngSwitchDefault [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t                        </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t\t<td *ngIf="row.isEmptyPrev" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td *ngIf="row.isEmpty" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2, \'empty-bottom\': row.status == 3 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ height: animateRowSize.height + \'px\', width: row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-left\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ left: row.clickPos.x + \'px\', height: animateRowSize.height + \'px\', width: animateRowSize.width - row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-right\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf="isDragHandleVisible" class="iui-drag-handle" [ngStyle]="{ top: dragHandlePos.top + \'px\' }">\n\t\t\t\t\t\t<tr *ngFor="let dragRow of dragRowList" [ngClass]="dragRow.style.row">\n\t\t\t\t\t\t\t<td [ngClass]="dragRow.style.cell" *ngFor="let cell of dragRow.cells; let j = index" style="border-color:transparent">\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.expandBoxAllowed ? dragObjIndent + \'px\' : cell.indent + \'px\', \'text-align\': cell.align, width: cell.expandBoxAllowed ? cell.indent + cell.width - dragObjIndent - 2 + \'px\' : cell.width + \'px\', height: cell.height }">\n\t\t\t\t\t\t\t\t\t<span *ngIf="cell.expandBoxAllowed" [ngClass]="dragRow.style.expandBox"></span>\n\t\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</span>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="isThereFixedColumns(\'left\')" class="iui-grid-block-left" [ngStyle]="{ \'margin-top\': blockMarginTop + groupPanelHeight + \'px\', height: leftBlockSize.height + \'px\', width: leftBlockSize.width + \'px\' }" (scroll)="onContentScroll($event)" style="overflow: visible;">\n\t\t\t\t<table cellpadding="0" cellspacing="0" style="position:absolute;" [ngStyle]="{ left: 0 }" #bodyLeft>\n\t\t\t\t\t<span [ngClass]="{ \'iui-grid-row-animate\': true, \'iui-grid-row-animate-enter-suspended\': allowAnimation && row.data == hoverRow }" *ngFor="let row of scrollLeftRowList | slice:0:visibleRange; let i = index">\n\t\t\t\t\t\t<tr [ngClass]="row.style.row" (mouseenter)="rowMouseEnter($event, row)" (mouseleave)="rowMouseLeave($event, row)" (mousedown)="rowMouseDown($event, row, i)" (mousemove)="rowMouseMove($event, row, i)" (mouseup)="rowMouseUp($event, row)" [iuiDraggable]="row.draggable" (dragstart)="rowDragStart($event, row)" (dragover)="rowDragOver($event, row, i, \'left\')" (drop)="rowDragDrop($event, row)" (click)="rowClickEvent($event, row)" (dblclick)="rowDblClickEvent($event, row)" (contextmenu)="rowRightClickEvent($event, row)" (touchstart)="rowTouchStart($event, row)" [ngStyle]="row.inlineStyle" #rowLeftElem>\n\t\t\t\t\t\t\t<td [ngClass]="row.style.cell" *ngFor="let cell of row.cells | slice:0:fixedLeftViewIndexRange; let j = index" (mouseenter)="cellMouseEnter($event, cell)" (mouseleave)="cellMouseLeave($event)" (mousedown)="cellMouseDown($event, cell)" (click)="cellClickEvent($event, cell)" (mouseup)="cellMouseUp($event, cell, i, j, \'left\')" (dblclick)="cellDblClickEvent($event, cell)" (contextmenu)="cellRightClickEvent($event, cell)" (touchend)="cellTouchEnd($event, cell, i, j, \'left\')" [ngStyle]="cell.inlineStyle" #rowLeftCellElem>\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.indent + \'px\', \'text-align\': cell.align, width: cell.width + \'px\', height: cell.height }" tabindex="{{cell.tabIndex}}" [iuiFocus]="isCellFocused(cell)" (focus)="cellGotFocus(cell)" (blur)="cellLostFocus(cell)" (keydown)="cellKeyDown($event, cell)" (keypress)="cellKeyPress($event, cell)" (keyup)="cellKeyUp($event, cell)">\n\t\t\t\t\t\t\t\t\t<span *ngIf="showExpandBox && cell.expandBoxAllowed" [ngClass]="row.style.expandBox" (mousedown)="expandBoxMouseDown($event, row.data)" (mouseup)="expandBoxMouseUp($event, row.data)" (touchstart)="expandBoxTouchStart($event, row.data)"></span>\n\t\t\t                        <span *ngIf="cell.isEditorVisible" [ngSwitch]="cell.editorType" [ngClass]="{ \'iui-editor-disabled\': !cell.isEditorEnabled }">\n\t\t\t                            \x3c!-- CHECKBOX --\x3e\n\t\t\t                            <div *ngSwitchCase="2" align="center">\n\t\t\t                                <span class="{{cell.editorClass}}"></span>\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                            \x3c!-- COLORPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="3" style="position: relative" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t                                <span class="iui-editor-color-background" [ngStyle]="{ background: getEditorColorValue(cell) }"></span>\n\t\t\t\t\t\t\t                <span class="iui-editor-label iui-editor-color-value">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DATEPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="4" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DROPLIST --\x3e\n\t\t\t                            <span *ngSwitchCase="5" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- IMAGE --\x3e\n\t\t\t                            <div *ngSwitchCase="6" class="iui-editor-image">\n\t\t\t                            \t<img *ngFor="let item of cell.editorValue" [src]="item.src" />\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                        \t\x3c!-- LABEL --\x3e\n\t\t\t                            <span *ngSwitchCase="7" class="iui-editor-label">{{getCellText(cell)}}</span>\n\n\t\t\t                            \x3c!-- NUMERIC --\x3e\n\t\t\t\t\t                    <input *ngSwitchCase="9" class="iui-editor-numeric" type="number" [(ngModel)]="cell.data[getCellField(\'value\')]" (change)="editorNumericValueChange(cell, $event.target.value)" (mousedown)="editorMouseTouch($event, cell)" (touchstart)="editorMouseTouch($event, cell)" (DOMMouseScroll)="editorMouseWheel($event)" (mousewheel)="editorMouseWheel($event)" draggable="true" (dragstart)="editorPreventDragStart($event)" />\n\n\t\t\t                            \x3c!-- PROGRESS --\x3e\n\t\t\t\t\t\t\t\t\t\t<div *ngSwitchCase="10" class="iui-editor-progress">\n\t\t\t\t\t\t\t\t\t\t\t<div class="iui-editor-progress-content" [ngStyle]="getEditorProgressStyle(cell)"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- RATING --\x3e\n\t\t\t                            <div *ngSwitchCase="11" class="iui-editor-rating" align="center">\n\t\t\t                                <iui-rating [controlStyle]="cell.editorStyle" [(ngModel)]="cell.data[getCellField(\'value\')]" [enabled]="cell.isEditorEnabled" [division]="cell.editorSettings.division" [increment]="cell.editorSettings.increment" [max]="cell.editorSettings.max" [stepSize]="cell.editorSettings.stepSize" (valueChanged)="editorValueChanged($event, cell)"></iui-rating>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- TEXTBOX --\x3e\n\t\t\t                            <span *ngSwitchCase="13">\n\t\t\t\t\t\t                    <input class="iui-editor-textbox" *ngIf="cell == currentEditorCell" type="text" [(ngModel)]="cell.data[getCellField(\'text\')]" (keydown)="editorKeyDown($event)" [iuiFocus]="isEditorFocused" (focus)="selectTextBoxContent($event)" (blur)="editorLostFocus()" />\n\t\t\t\t\t\t\t                <span class="iui-editor-label" *ngIf="cell != currentEditorCell">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- CUSTOM --\x3e\n\t\t\t                            <span [ngStyle]="{ display: cell.display }">\n\t\t\t\t\t\t\t\t\t\t\t<span *ngSwitchDefault [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t                        </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t\t<td *ngIf="row.isEmptyPrev" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td *ngIf="row.isEmpty" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2, \'empty-bottom\': row.status == 3 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ height: animateRowSize.height + \'px\', width: row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-left\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ left: row.clickPos.x + \'px\', height: animateRowSize.height + \'px\', width: animateRowSize.width - row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-right\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf="isDragHandleVisible" class="iui-drag-handle" [ngStyle]="{ top: dragHandlePos.top + \'px\' }">\n\t\t\t\t\t\t<tr *ngFor="let dragRow of dragRowList" [ngClass]="dragRow.style.row">\n\t\t\t\t\t\t\t<td [ngClass]="dragRow.style.cell" *ngFor="let cell of dragRow.cells; let j = index" style="border-color:transparent">\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.expandBoxAllowed ? dragObjIndent + \'px\' : cell.indent + \'px\', \'text-align\': cell.align, width: cell.expandBoxAllowed ? cell.indent + cell.width - dragObjIndent - 2 + \'px\' : cell.width + \'px\', height: cell.height }">\n\t\t\t\t\t\t\t\t\t<span *ngIf="cell.expandBoxAllowed" [ngClass]="dragRow.style.expandBox"></span>\n\t\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</span>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="isThereFixedColumns(\'right\')" class="iui-grid-block-right" [ngStyle]="{ \'margin-top\': blockMarginTop + groupPanelHeight + \'px\', height: rightBlockSize.height + \'px\', right: getBlockRightPos() + \'px\', width: rightBlockSize.width + \'px\' }" (scroll)="onContentScroll($event)" style="overflow: visible;">\n\t\t\t\t<table cellpadding="0" cellspacing="0" style="position:absolute;" #bodyRight>\n\t\t\t\t\t<span [ngClass]="{ \'iui-grid-row-animate\': true, \'iui-grid-row-animate-enter-suspended\': allowAnimation && row.data == hoverRow }" *ngFor="let row of scrollRightRowList | slice:0:visibleRange; let i = index">\n\t\t\t\t\t\t<tr [ngClass]="row.style.row" (mouseenter)="rowMouseEnter($event, row)" (mouseleave)="rowMouseLeave($event, row)" (mousedown)="rowMouseDown($event, row, i)" (mousemove)="rowMouseMove($event, row, i)" (mouseup)="rowMouseUp($event, row)" [iuiDraggable]="row.draggable" (dragstart)="rowDragStart($event, row)" (dragover)="rowDragOver($event, row, i, \'right\')" (drop)="rowDragDrop($event, row)" (click)="rowClickEvent($event, row)" (dblclick)="rowDblClickEvent($event, row)" (contextmenu)="rowRightClickEvent($event, row)" (touchstart)="rowTouchStart($event, row)" [ngStyle]="row.inlineStyle" #rowRightElem>\n\t\t\t\t\t\t\t<td [ngClass]="row.style.cell" *ngFor="let cell of row.cells | slice:0:fixedRightViewIndexRange; let j = index" (mouseenter)="cellMouseEnter($event, cell)" (mouseleave)="cellMouseLeave($event)" (mousedown)="cellMouseDown($event, cell)" (click)="cellClickEvent($event, cell)" (mouseup)="cellMouseUp($event, cell, i, j, \'right\')" (dblclick)="cellDblClickEvent($event, cell)" (contextmenu)="cellRightClickEvent($event, cell)" (touchend)="cellTouchEnd($event, cell, i, j, \'right\')" [ngStyle]="cell.inlineStyle" #rowRightCellElem>\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.indent + \'px\', \'text-align\': cell.align, width: cell.width + \'px\', height: cell.height }" tabindex="{{cell.tabIndex}}" [iuiFocus]="isCellFocused(cell)" (focus)="cellGotFocus(cell)" (blur)="cellLostFocus(cell)" (keydown)="cellKeyDown($event, cell)" (keypress)="cellKeyPress($event, cell)" (keyup)="cellKeyUp($event, cell)">\n\t\t\t\t\t\t\t\t\t<span *ngIf="showExpandBox && cell.expandBoxAllowed" [ngClass]="row.style.expandBox" (mousedown)="expandBoxMouseDown($event, row.data)" (mouseup)="expandBoxMouseUp($event, row.data)" (touchstart)="expandBoxTouchStart($event, row.data)"></span>\n\t\t\t                        <span *ngIf="cell.isEditorVisible" [ngSwitch]="cell.editorType" [ngClass]="{ \'iui-editor-disabled\': !cell.isEditorEnabled }">\n\t\t\t                            \x3c!-- CHECKBOX --\x3e\n\t\t\t                            <div *ngSwitchCase="2" align="center">\n\t\t\t                                <span class="{{cell.editorClass}}"></span>\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                            \x3c!-- COLORPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="3" style="position: relative" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t                                <span class="iui-editor-color-background" [ngStyle]="{ background: getEditorColorValue(cell) }"></span>\n\t\t\t\t\t\t\t                <span class="iui-editor-label iui-editor-color-value">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DATEPICKER --\x3e\n\t\t\t                            <span *ngSwitchCase="4" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{cell.editorValue}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- DROPLIST --\x3e\n\t\t\t                            <span *ngSwitchCase="5" (click)="editorClick($event)">\n\t\t\t\t\t\t\t                <div class="iui-editor-dropdown-button" [ngClass]="{ \'iui-editor-dropdown-button-hover\': cell == hoverCell }"><span></span></div>\n\t\t\t\t\t\t\t                <span class="iui-editor-label">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- IMAGE --\x3e\n\t\t\t                            <div *ngSwitchCase="6" class="iui-editor-image">\n\t\t\t                            \t<img *ngFor="let item of cell.editorValue" [src]="item.src" />\n\t\t\t\t\t\t\t            </div>\n\n\t\t\t                        \t\x3c!-- LABEL --\x3e\n\t\t\t                            <span *ngSwitchCase="7" class="iui-editor-label">{{getCellText(cell)}}</span>\n\n\t\t\t                            \x3c!-- NUMERIC --\x3e\n\t\t\t\t\t                    <input *ngSwitchCase="9" class="iui-editor-numeric" type="number" [(ngModel)]="cell.data[getCellField(\'value\')]" (change)="editorNumericValueChange(cell, $event.target.value)" (mousedown)="editorMouseTouch($event, cell)" (touchstart)="editorMouseTouch($event, cell)" (DOMMouseScroll)="editorMouseWheel($event)" (mousewheel)="editorMouseWheel($event)" draggable="true" (dragstart)="editorPreventDragStart($event)" />\n\n\t\t\t                            \x3c!-- PROGRESS --\x3e\n\t\t\t\t\t\t\t\t\t\t<div *ngSwitchCase="10" class="iui-editor-progress">\n\t\t\t\t\t\t\t\t\t\t\t<div class="iui-editor-progress-content" [ngStyle]="getEditorProgressStyle(cell)"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- RATING --\x3e\n\t\t\t                            <div *ngSwitchCase="11" class="iui-editor-rating" align="center">\n\t\t\t                                <iui-rating [controlStyle]="cell.editorStyle" [(ngModel)]="cell.data[getCellField(\'value\')]" [enabled]="cell.isEditorEnabled" [division]="cell.editorSettings.division" [increment]="cell.editorSettings.increment" [max]="cell.editorSettings.max" [stepSize]="cell.editorSettings.stepSize" (valueChanged)="editorValueChanged($event, cell)"></iui-rating>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t                            \x3c!-- TEXTBOX --\x3e\n\t\t\t                            <span *ngSwitchCase="13">\n\t\t\t\t\t\t                    <input class="iui-editor-textbox" *ngIf="cell == currentEditorCell" type="text" [(ngModel)]="cell.data[getCellField(\'text\')]" (keydown)="editorKeyDown($event)" [iuiFocus]="isEditorFocused" (focus)="selectTextBoxContent($event)" (blur)="editorLostFocus()" />\n\t\t\t\t\t\t\t                <span class="iui-editor-label" *ngIf="cell != currentEditorCell">{{getCellValue(cell)}}</span>\n\t\t\t                            </span>\n\n\t\t\t                            \x3c!-- CUSTOM --\x3e\n\t\t\t                            <span [ngStyle]="{ display: cell.display }">\n\t\t\t\t\t\t\t\t\t\t\t<span *ngSwitchDefault [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t                        </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t\t<td *ngIf="row.isEmptyPrev" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td *ngIf="row.isEmpty" colspan="999" style="pointer-events:none;">\n\t\t\t\t\t\t\t\t<div class="iui-grid-row-empty-content" [ngClass]="{ \'open-empty-bottom\': row.status == 1, \'close-empty-bottom\': row.status == 2, \'empty-bottom\': row.status == 3 }"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ height: animateRowSize.height + \'px\', width: row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-left\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t        <span *ngIf="allowAnimation && row.isClicked" class="iui-grid-row-animate-select-block" [ngStyle]="{ left: row.clickPos.x + \'px\', height: animateRowSize.height + \'px\', width: animateRowSize.width - row.clickPos.x + \'px\' }">\n\t\t\t\t\t        <span [ngClass]="{ \'iui-grid-row-animate-select iui-grid-row-animate-select-right\': row.isClicked }" [ngStyle]="{ height: animateRowSize.height + \'px\' }"></span>\n\t\t\t\t        </span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf="isDragHandleVisible" class="iui-drag-handle" [ngStyle]="{ top: dragHandlePos.top + \'px\' }">\n\t\t\t\t\t\t<tr *ngFor="let dragRow of dragRowList" [ngClass]="dragRow.style.row">\n\t\t\t\t\t\t\t<td [ngClass]="dragRow.style.cell" *ngFor="let cell of dragRow.cells; let j = index" style="border-color:transparent">\n\t\t\t\t\t\t\t\t<div [ngClass]="cell.style.content" [ngStyle]="{ \'padding-left\': cell.expandBoxAllowed ? dragObjIndent + \'px\' : cell.indent + \'px\', \'text-align\': cell.align, width: cell.expandBoxAllowed ? cell.indent + cell.width - dragObjIndent - 2 + \'px\' : cell.width + \'px\', height: cell.height }">\n\t\t\t\t\t\t\t\t\t<span *ngIf="cell.expandBoxAllowed" [ngClass]="dragRow.style.expandBox"></span>\n\t\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="cellData[0]" [iuiTemplateOutletContext]="{$implicit: (cell.data)}"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</span>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="isHoverTemplatePresent && !isUpdateActive && isContentAllowed(hoverRowObj.data, \'hover\')" class="iui-grid-block iui-grid-block-hover" [ngStyle]="{ left: blockHoverRect.left + \'px\', top: blockHoverRect.top + \'px\', height: blockHoverRect.height + \'px\', width: blockHoverRect.width + \'px\' }">\n\t\t\t\t<div [ngStyle]="{ height: blockHoverRect.height + \'px\' }" (mousemove)="hoverBlockMouseMove($event)" (mouseleave)="hoverBlockMouseLeave($event)">\n\t\t\t\t\t<span [iuiTemplateOutlet]="rowHoverData[0]" [iuiTemplateOutletContext]="{$implicit: (hoverRowObj.data)}"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span *ngIf="isSelectedTemplatePresent && !isUpdateActive">\n\t\t\t\t<span *ngFor="let row of currentSelectedRows; let i = index">\n\t\t\t\t\t<div *ngIf="isContentAllowed(row, \'select\')" class="iui-grid-block iui-grid-block-select" [ngStyle]="getSelectBlockRect(i)">\n\t\t\t\t\t\t<div [ngStyle]="{ height: blockSelectHeight + \'px\' }">\n\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="rowSelectData[0]" [iuiTemplateOutletContext]="{$implicit: (row)}"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<div *ngIf="showFooter" class="iui-grid-block iui-grid-block-bottom" [ngStyle]="{ left: -contentLeftPos + \'px\', bottom: getBlockBottomPos() + \'px\' }" #footer>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td [ngClass]="column.style.footer" *ngFor="let column of scrollFooterList" [ngStyle]="column.inlineStyle.footer" (mouseenter)="footerMouseEnter($event, column)" #footerCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.footerHeight, \'text-align\': getColumnAlignment(column.data, true), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="footerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="showFooter && isThereFixedColumns(\'left\')" class="iui-grid-block iui-grid-block-bottom-left" [ngStyle]="{ left: 0, bottom: getBlockBottomPos() + \'px\' }" #footer>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td [ngClass]="column.style.footer" *ngFor="let column of scrollLeftFooterList" [ngStyle]="column.inlineStyle.footer" (mouseenter)="footerMouseEnter($event, column)" #footerLeftCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.footerHeight, \'text-align\': getColumnAlignment(column.data, true), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="footerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf="showFooter && isThereFixedColumns(\'right\')" class="iui-grid-block iui-grid-block-bottom-right" [ngStyle]="{ right: getBlockRightPos() + \'px\', bottom: getBlockBottomPos() + \'px\' }" #footer>\n\t\t\t\t<table cellpadding="0" cellspacing="0">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td [ngClass]="column.style.footer" *ngFor="let column of scrollRightFooterList" [ngStyle]="column.inlineStyle.footer" (mouseenter)="footerMouseEnter($event, column)" #footerRightCellElem>\n\t\t\t\t\t\t\t<div [ngStyle]="{ height: column.footerHeight, \'text-align\': getColumnAlignment(column.data, true), width: getColumnWidth(column.data) + \'px\' }">\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]="footerData[0]" [iuiTemplateOutletContext]="{$implicit: (column.data)}"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n            <iui-scrollbar *ngIf="isVerScrollVisible()" [enabled]="enabled" [value]="currentScrollPos.y" [max]="maxScrollPos.y" [largeChange]="scrollLargeChange.y" [height]="scrollBarSize.height" (valueChanged)="onVerticalScrollChanged($event)" (scrollStart)="onVerticalScrollStart($event)" (scrollEnd)="onVerticalScrollEnd($event)" (mouseenter)="scrollMouseEnter($event)" [position]="{ top: groupPanelHeight + 1 }" (scrollMouseDown)="scrollMouseDown($event)" #verScroll></iui-scrollbar>\n            <iui-scrollbar *ngIf="isHorScrollVisible()" [enabled]="enabled" [orientation]="horScrollOrientation" [value]="currentScrollPos.x" [max]="maxScrollPos.x" [width]="scrollBarSize.width" (valueChanged)="onHorizontalScrollChanged($event)" (scrollStart)="onHorizontalScrollStart($event)" (scrollEnd)="onHorizontalScrollEnd($event)" (mouseenter)="scrollMouseEnter($event)" [position]="{ bottom: horScrollElemPos.bottom }" (scrollMouseDown)="scrollMouseDown($event)" #horScroll></iui-scrollbar>\n            <div *ngIf="isVerScrollVisible() && isHorScrollVisible()" class="iui-scrollbar-corner" style="position:absolute;right:0;bottom:0;width:16px;height:16px;" [ngStyle]="{ bottom: cornerScrollElemPos.bottom + \'px\' }"></div>\n            <iui-paginator *ngIf="isPaginationEnabled()" (mouseenter)="paginatorMouseEnter($event)" align="center" style="position:absolute;top:0;width:100%" [ngStyle]="{ top: paginatorPos.top + \'px\' }" [maxPages]="getMaxPages()" [currentPage]="currentPageNumber" (pageChanged)="paginatorPageChanged($event)" #paginator></iui-paginator>\n\t\t</div>\n\t',
inputs:"allowDrag allowDrop allowFilter allowFocus appRef autoSizeColumns autoUpdate columns controlStyle data dataFields dragMode enabled focusedCell gridLines name rowHeight rows paging selectedColumn selectedRow selectionMode showScroll size sorting state".split(" "),outputs:"afterSelect beforeEdit beforeSelect beforeUpdate change columnAdding columnAdded columnClick columnRemoving columnRemoved columnsCleared columnOrderChanged columnSizeChanged dragEnter dragDrop dragDropComplete dragLeave dragOver keyDown keyPress keyUp loadComplete rowAdding rowAdded rowClick rowDblClick rowHover rowRemoving rowRemoved rowsCleared scrollPosChanged selectionChanged updateComplete".split(" "),
providers:[integralui_core_1.IntegralUIBaseService,integralui_data_service_1.IntegralUIDataService],encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[integralui_data_service_1.IntegralUIDataService,integralui_dragdrop_service_1.IntegralUIDragDropService,core_1.ElementRef,core_1.Renderer,integralui_common_service_1.IntegralUICommonService,integralui_filter_service_1.IntegralUIFilterService,core_1.ChangeDetectorRef,core_1.ComponentFactoryResolver,integralui_core_1.IntegralUIBaseService])],
b)}(integralui_base_grid_1.IntegralUIBaseGrid);exports.IntegralUIGrid=IntegralUIGrid;