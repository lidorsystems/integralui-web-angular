/*
  filename: integralui.groupbox.js
  version : 1.7.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return e(d,a)};return function(d,a){function b(){this.constructor=d}e(d,a);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),i0=require("@angular/core"),i1=require("../services/integralui.common.service"),i2=require("./integralui.core"),i3=require("@angular/common"),_c0=["control"],_c1=["content"],_c2=["header"],_c3=function(e,d){return{height:e,width:d}},_c4=function(e){return{"iui-groupbox-header-animate-select iui-groupbox-header-animate-select-left":e}},_c5=
function(e){return{height:e}};
function IntegralUIGroupBox_span_6_Template(e,d){e&1&&(i0.\u0275\u0275elementStart(0,"span",7),i0.\u0275\u0275element(1,"span",0),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction2(3,_c3,a.headerSize.height+"px",a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(6,_c4,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(8,_c5,a.headerSize.height+"px"))}}
var _c6=function(e,d,a){return{left:e,height:d,width:a}},_c7=function(e){return{"iui-groupbox-header-animate-select iui-groupbox-header-animate-select-right":e}};
function IntegralUIGroupBox_span_7_Template(e,d){e&1&&(i0.\u0275\u0275elementStart(0,"span",7),i0.\u0275\u0275element(1,"span",0),i0.\u0275\u0275elementEnd());if(e&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction3(3,_c6,a.clickPos.x+"px",a.headerSize.height+"px",a.headerSize.width-a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(7,_c7,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(9,
_c5,a.headerSize.height+"px"))}}var _c8=[[["iui-group-header"]],"*"],_c9=function(e,d,a,b){return{"border-width":e,display:d,height:a,opacity:b}},_c10=["iui-group-header","*"],IntegralUIGroupBoxTags=function(){function e(){}e.\u0275fac=function(d){return new (d||e)};e.\u0275dir=i0.\u0275\u0275defineDirective({type:e,selectors:[["iui-group-header"]]});return e}();exports.IntegralUIGroupBoxTags=IntegralUIGroupBoxTags;
(function(){i0.\u0275setClassMetadata(IntegralUIGroupBoxTags,[{type:core_1.Directive,args:[{selector:"iui-group-header"}]}],null,null)})();
var IntegralUIGroupBox=function(e){function d(a,b,d){var c=e.call(this,a)||this;c.commonService=a;c.cmpResolver=b;c.baseService=d;c.clickPos={x:0,y:0};c.expandState="none";c.isClicked=!1;c.isExpanded=!1;c.isSelected=!1;c.supressCallback=!1;c.contentHeight="0";c.contentDisplay="block";c.contentOpacity=1;c.headerSize={width:0,height:0};c.maxBlockHeight=0;c.parentCtrl=null;c.contentClassName="";c.headerClassName="";c.headerExpandBoxClassName="";c.contentClass=[];c.headerBlockClass=[];c.afterCollapse=
new core_1.EventEmitter;c.afterExpand=new core_1.EventEmitter;c.afterSelect=new core_1.EventEmitter;c.beforeCollapse=new core_1.EventEmitter;c.beforeExpand=new core_1.EventEmitter;c.beforeSelect=new core_1.EventEmitter;c.selectedChanged=new core_1.EventEmitter;return c}__extends(d,e);Object.defineProperty(d.prototype,"expanded",{get:function(){return this.isExpanded},set:function(a){if(this.isExpanded!=a){var b=this;if(b.callBeforeEvent(a)){b.expandState=a?"expand":"collapse";var c=setTimeout(function(){"collapse"==
b.expandState&&(b.expandState="none");clearTimeout(c)},300);b.isExpanded=a;b.header.animationState=b.isExpanded?"expand":"collapse";b.updateContentClass();b.toggleContent()}}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"selected",{get:function(){return this.isSelected},set:function(a){if(this.isSelected!=a){var b={cancel:!1,group:this.data};this.beforeSelect.emit(b);1!=b.cancel&&(this.isSelected=a,this.header&&(this.header.state=a?this.header.state|integralui_core_1.IntegralUIObjectState.selected:
this.header.state&~integralui_core_1.IntegralUIObjectState.selected),this.afterSelect.emit({group:this.data}),this.selectedChanged.emit({group:this.data}),this.updateHeaderBlockClass())}},enumerable:!0,configurable:!0});d.prototype.callBeforeEvent=function(a){var b=!0;this.parentCtrl&&this.parentCtrl.invokeEvent&&(b=this.parentCtrl.invokeEvent(a?"BEFORE_EXPAND":"BEFORE_COLLAPSE",this));b&&(b={cancel:!1,group:this.data},a?this.beforeExpand.emit(b):this.beforeCollapse.emit(b),b=!b.cancel);return b};
d.prototype.callAfterEvent=function(a,b){var c={group:this.data};a?this.afterExpand.emit(c):this.afterCollapse.emit(c);this.parentCtrl&&this.parentCtrl.invokeEvent&&this.parentCtrl.invokeEvent(a?"AFTER_EXPAND":"AFTER_COLLAPSE",this,b);return!0};d.prototype.ngOnInit=function(){this.parentCtrl=this.baseService.getComponent();this.generalClassName="iui-groupbox";this.headerClassName=this.generalClassName+"-header";this.headerExpandBoxClassName=this.headerClassName+"-expand-box";this.contentClassName=
this.generalClassName+"-content";this.defaultStyle={general:{disabled:this.generalClassName+"-disabled",focused:this.generalClassName+"-focused",normal:this.generalClassName,hovered:this.generalClassName+"-hovered",selected:this.generalClassName+"-selected"},header:{general:{disabled:this.headerClassName+"-disabled",focused:this.headerClassName+"-focused",normal:this.headerClassName,hovered:this.headerClassName+"-hovered",selected:this.headerClassName+"-selected"},expandBox:this.headerExpandBoxClassName},
content:{general:this.contentClassName,expanded:this.contentClassName+"-expand",collapsed:this.contentClassName+"-collapse"}};this.updateStyle(this.controlStyle);this.updateControlClass();this.updateContentClass();this.updateHeaderBlockClass()};d.prototype.ngAfterContentInit=function(){var a=this,b=setTimeout(function(){if(a.contentElem){var c=a.contentElem.nativeElement.firstElementChild.cloneNode(!0);c.style.position="absolute";c.style.top="-9999999px";a.controlElem.nativeElement.append(c);a.maxBlockHeight=
c.offsetHeight;c.remove()}a.headerSize={width:a.headerElem.nativeElement.firstElementChild.offsetWidth,height:a.headerElem.nativeElement.firstElementChild.offsetHeight};clearTimeout(b)},100)};d.prototype.ngOnDestroy=function(){};d.prototype.onHeaderClick=function(a){var b=this;if(b.isEnabled&&1==a.buttons){b.parentCtrl&&b.parentCtrl.invokeMethod?b.parentCtrl.invokeMethod("SELECT_GROUP",b):(b.selected=!b.selected,b.expanded=!b.expanded);b.isClicked=!0;b.clickPos=b.commonService.getClientPos(a,b.headerElem.nativeElement.firstElementChild);
var c=setTimeout(function(){b.isClicked=!1;clearTimeout(c)},500)}};d.prototype.collapse=function(){this.parentCtrl||(this.expanded=!1)};d.prototype.expand=function(){this.expanded=!0};d.prototype.toggle=function(){this.expanded=!this.expanded};d.prototype.toggleContent=function(){if(this.parentCtrl&&this.parentCtrl.invokeMethod)this.expanded?this.parentCtrl.invokeMethod("TOGGLE_GROUPS",this):this.parentCtrl.invokeMethod("COLLAPSE_GROUP",this);else{var a=this,b=0,c=0;if(a.expanded)if(a.contentDisplay=
"block",a.allowAnimation)var d=setInterval(function(){b<a.maxBlockHeight?(c=0==c?1:c+2,b+=c,a.contentHeight=b+"px"):(a.contentHeight="auto",a.expandState="none",a.callAfterEvent(!0),a.supressCallback=!1,clearInterval(d))},25);else a.contentHeight="auto",a.expandState="none",a.callAfterEvent(!0),a.supressCallback=!1;else if(a.maxBlockHeight=a.contentElem.nativeElement.offsetHeight,b=a.maxBlockHeight,a.allowAnimation)var e=setInterval(function(){0<b?(c=0==c?1:c+2,b-=c,a.contentHeight=b+"px"):(a.contentDisplay=
"none",a.contentHeight="0",a.expandState="none",a.callAfterEvent(),a.supressCallback=!1,clearInterval(e))},25);else a.contentDisplay="none",a.contentHeight="0",a.expandState="none",a.callAfterEvent(),a.supressCallback=!1}};d.prototype.getContentHeight=function(){return this.maxBlockHeight};d.prototype.setContentHeight=function(a){this.contentHeight=a};d.prototype.getControlStyle=function(){var a={};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+
"px");return a};d.prototype.updateContentClass=function(){this.contentClass.length=0;this.contentClass.push(this.options.currentStyle.content.general);0!=this.expanded?"expand"==this.expandState&&this.contentClass.push(this.options.currentStyle.content.expanded):"collapse"==this.expandState&&this.contentClass.push(this.options.currentStyle.content.collapsed)};d.prototype.getContentClass=function(){return this.contentClass};d.prototype.getContentStyle=function(a){return this.commonService.isString(a)?
a:a?{general:this.commonService.isFieldAvailable(a.general,this.contentClassName),expanded:this.commonService.isFieldAvailable(a.expanded,this.contentClassName+"-expand"),collapsed:this.commonService.isFieldAvailable(a.collapsed,this.contentClassName+"-collapse")}:{general:this.defaultStyle.content.general,expanded:this.defaultStyle.content.expanded,collapsed:this.defaultStyle.content.collapsed}};d.prototype.updateHeaderBlockClass=function(){this.headerBlockClass.length=0;this.headerBlockClass.push("iui-groupbox-header-block");
this.selected&&this.headerBlockClass.push("iui-groupbox-header-marker-down")};d.prototype.getHeaderBlockClass=function(){return this.headerBlockClass};d.prototype.getHeaderClass=function(){var a=this.headerClassName;return a=this.state&integralui_core_1.IntegralUIObjectState.disabled?a+(" "+this.options.currentStyle.header.disabled):this.state&integralui_core_1.IntegralUIObjectState.focused?a+(" "+this.options.currentStyle.header.focused):this.state&integralui_core_1.IntegralUIObjectState.selected?
a+(" "+this.options.currentStyle.header.selected):this.state&integralui_core_1.IntegralUIObjectState.hovered?a+(" "+this.options.currentStyle.header.hovered):a+(" "+this.options.currentStyle.header.normal)};d.prototype.getHeaderGeneralStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.hovered,this.headerClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.hovered,this.headerClassName+"-focused"),hovered:this.commonService.isFieldAvailable(a.hovered,
this.headerClassName+"-hovered"),normal:this.commonService.isFieldAvailable(a.normal,this.headerClassName),selected:this.commonService.isFieldAvailable(a.selected,this.headerClassName+"-selected")}:{disabled:this.defaultStyle.header.general.disabled,focused:this.defaultStyle.header.general.focused,hovered:this.defaultStyle.header.general.hovered,normal:this.defaultStyle.header.general.normal,selected:this.defaultStyle.header.general.selected}};d.prototype.getHeaderStyle=function(a){return a?{general:this.getHeaderGeneralStyle(a.general),
expandBox:this.commonService.isFieldAvailable(a.expandBox,this.headerExpandBoxClassName)}:{general:{disabled:this.defaultStyle.header.general.disabled,focused:this.defaultStyle.header.general.focused,hovered:this.defaultStyle.header.general.hovered,normal:this.defaultStyle.header.general.normal,selected:this.defaultStyle.header.general.selected},expandBox:this.defaultStyle.header.expandBox}};d.prototype.getCurrentHeaderStyle=function(){return this.options.currentStyle.header};d.prototype.setOpacity=
function(a){this.contentOpacity=a};d.prototype.updateStyle=function(a){this.options.currentStyle=a?{general:this.getGeneralStyle(a.general),header:this.getHeaderStyle(a.header),content:this.getContentStyle(a.content)}:{general:{disabled:this.defaultStyle.general.disabled,focused:this.defaultStyle.general.focused,hovered:this.defaultStyle.general.hovered,normal:this.defaultStyle.general.normal,selected:this.defaultStyle.general.selected},header:{general:{disabled:this.defaultStyle.header.general.disabled,
focused:this.defaultStyle.header.general.focused,hovered:this.defaultStyle.header.general.hovered,normal:this.defaultStyle.header.general.normal,selected:this.defaultStyle.header.general.selected},expandBox:this.defaultStyle.header.expandBox},content:{general:this.defaultStyle.content.general,expanded:this.defaultStyle.content.expanded,collapsed:this.defaultStyle.content.collapsed}}};d.\u0275fac=function(a){return new (a||d)(i0.\u0275\u0275directiveInject(i1.IntegralUICommonService),i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver),
i0.\u0275\u0275directiveInject(i2.IntegralUIBaseService))};d.\u0275cmp=i0.\u0275\u0275defineComponent({type:d,selectors:[["iui-groupbox"]],viewQuery:function(a,b){a&1&&(i0.\u0275\u0275viewQuery(_c0,!0,core_1.ElementRef),i0.\u0275\u0275viewQuery(_c1,!0,core_1.ViewContainerRef),i0.\u0275\u0275viewQuery(_c1,!0,core_1.ElementRef),i0.\u0275\u0275viewQuery(_c2,!0,core_1.ElementRef),i0.\u0275\u0275viewQuery(_c2,!0));if(a&2){var c;i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.controlElem=
c.first);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.contentRef=c.first);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.contentElem=c.first);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.headerElem=c.first);i0.\u0275\u0275queryRefresh(c=i0.\u0275\u0275loadQuery())&&(b.header=c.first)}},inputs:{controlStyle:"controlStyle",data:"data",enabled:"enabled",name:"name",size:"size",state:"state",text:"text",icon:"icon",expandBoxType:"expandBoxType",expanded:"expanded",
selected:"selected"},outputs:{afterCollapse:"afterCollapse",afterExpand:"afterExpand",afterSelect:"afterSelect",beforeCollapse:"beforeCollapse",beforeExpand:"beforeExpand",beforeSelect:"beforeSelect",selectedChanged:"selectedChanged"},features:[i0.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_c10,decls:11,vars:17,consts:[[3,"ngClass","ngStyle"],["control",""],[3,"ngClass"],[3,"controlStyle","enabled","icon","text","animationType","mouseDown"],["header",""],["class","iui-groupbox-header-animate-select-block",
3,"ngStyle",4,"ngIf"],["content",""],[1,"iui-groupbox-header-animate-select-block",3,"ngStyle"]],template:function(a,b){a&1&&(i0.\u0275\u0275projectionDef(_c8),i0.\u0275\u0275elementStart(0,"div",0,1),i0.\u0275\u0275elementStart(2,"div",2),i0.\u0275\u0275elementStart(3,"iui-header",3,4),i0.\u0275\u0275listener("mouseDown",function(a){return b.onHeaderClick(a)}),i0.\u0275\u0275projection(5),i0.\u0275\u0275template(6,IntegralUIGroupBox_span_6_Template,2,10,"span",5),i0.\u0275\u0275template(7,IntegralUIGroupBox_span_7_Template,
2,11,"span",5),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementStart(8,"div",0,6),i0.\u0275\u0275projection(10,1),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",b.getControlClass())("ngStyle",b.getControlStyle()),i0.\u0275\u0275advance(2),i0.\u0275\u0275property("ngClass",b.getHeaderBlockClass()),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("controlStyle",b.getCurrentHeaderStyle())("enabled",b.enabled)("icon",b.icon)("text",
b.text)("animationType",b.expandBoxType),i0.\u0275\u0275advance(3),i0.\u0275\u0275property("ngIf",b.allowAnimation&&b.isClicked),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngIf",b.allowAnimation&&b.isClicked),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngClass",b.getContentClass())("ngStyle",i0.\u0275\u0275pureFunction4(12,_c9,b.expanded?"1px":"0px",b.contentDisplay,b.contentHeight,b.contentOpacity)))},directives:[i3.NgClass,i3.NgStyle,i2.IntegralUIHeaderItem,i3.NgIf],encapsulation:2});
return d}(integralui_core_1.IntegralUIBaseComponent);exports.IntegralUIGroupBox=IntegralUIGroupBox;
(function(){i0.\u0275setClassMetadata(IntegralUIGroupBox,[{type:core_1.Component,args:[{selector:"iui-groupbox",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()" #control>\n\t\t\t<div [ngClass]="getHeaderBlockClass()" >\n\t\t\t\t<iui-header [controlStyle]="getCurrentHeaderStyle()" [enabled]="enabled" [icon]="icon" [text]="text" (mouseDown)="onHeaderClick($event)" [animationType]="expandBoxType" #header>\n\t\t\t\t\t<ng-content select="iui-group-header"></ng-content>\n\t                <span *ngIf="allowAnimation && isClicked" class="iui-groupbox-header-animate-select-block" [ngStyle]="{ height: headerSize.height + \'px\', width: clickPos.x + \'px\' }">\n\t                    <span [ngClass]="{ \'iui-groupbox-header-animate-select iui-groupbox-header-animate-select-left\': isClicked }" [ngStyle]="{ height: headerSize.height + \'px\' }"></span>\n\t               </span>\n\t                <span *ngIf="allowAnimation && isClicked" class="iui-groupbox-header-animate-select-block" [ngStyle]="{ left: clickPos.x + \'px\', height: headerSize.height + \'px\', width: headerSize.width - clickPos.x + \'px\' }">\n\t                    <span [ngClass]="{ \'iui-groupbox-header-animate-select iui-groupbox-header-animate-select-right\': isClicked }" [ngStyle]="{ height: headerSize.height + \'px\' }"></span>\n\t                </span>\n\t\t\t\t</iui-header>\n\t\t\t</div>\n\t\t\t<div [ngClass]="getContentClass()" [ngStyle]="{ \'border-width\': expanded ? \'1px\' : \'0\' + \'px\', display: contentDisplay, \'height\': contentHeight, \'opacity\': contentOpacity }" #content>\n\t\t\t\t<ng-content></ng-content>\n\t\t\t</div>\n\t\t</div>\n    ',inputs:"controlStyle data enabled name size state".split(" "),
encapsulation:core_1.ViewEncapsulation.None}]}],function(){return[{type:i1.IntegralUICommonService},{type:i0.ComponentFactoryResolver},{type:i2.IntegralUIBaseService}]},{controlElem:[{type:core_1.ViewChild,args:["control",{read:core_1.ElementRef,"static":!1}]}],contentRef:[{type:core_1.ViewChild,args:["content",{read:core_1.ViewContainerRef,"static":!1}]}],contentElem:[{type:core_1.ViewChild,args:["content",{read:core_1.ElementRef,"static":!1}]}],headerElem:[{type:core_1.ViewChild,args:["header",
{read:core_1.ElementRef,"static":!1}]}],header:[{type:core_1.ViewChild,args:["header",{"static":!1}]}],text:[{type:core_1.Input}],icon:[{type:core_1.Input}],expandBoxType:[{type:core_1.Input}],expanded:[{type:core_1.Input}],selected:[{type:core_1.Input}],afterCollapse:[{type:core_1.Output}],afterExpand:[{type:core_1.Output}],afterSelect:[{type:core_1.Output}],beforeCollapse:[{type:core_1.Output}],beforeExpand:[{type:core_1.Output}],beforeSelect:[{type:core_1.Output}],selectedChanged:[{type:core_1.Output}]})})();