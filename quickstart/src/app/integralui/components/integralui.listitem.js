/*
  filename: integralui.listitem.js
  version : 2.3.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var c=function(b,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return c(b,a)};return function(b,a){function d(){this.constructor=b}c(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),i0=require("@angular/core"),i1=require("../services/integralui.common.service"),i2=require("./integralui.core"),i3=require("@angular/common"),_c0=["content"],_c1=["dragElem"];
function IntegralUIListItem_span_5_Template(c,b){c&1&&i0.\u0275\u0275element(0,"span",8);if(c&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275styleProp("display",a.getIconStatus());i0.\u0275\u0275property("ngClass",a.icon)}}function IntegralUIListItem_span_6_Template(c,b){c&1&&(i0.\u0275\u0275elementStart(0,"span",9),i0.\u0275\u0275text(1),i0.\u0275\u0275elementEnd());if(c&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275advance(1);i0.\u0275\u0275textInterpolate(a.text)}}
var _c2=function(c,b){return{height:c,width:b}},_c3=function(c){return{"iui-listitem-animate-select iui-listitem-animate-select-left":c}},_c4=function(c){return{height:c}};
function IntegralUIListItem_span_8_Template(c,b){c&1&&(i0.\u0275\u0275elementStart(0,"span",10),i0.\u0275\u0275element(1,"span",11),i0.\u0275\u0275elementEnd());if(c&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction2(3,_c2,a.getSize().height+"px",a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(6,_c3,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(8,_c4,a.getSize().height+"px"))}}
var _c5=function(c,b,a){return{left:c,height:b,width:a}},_c6=function(c){return{"iui-listitem-animate-select iui-listitem-animate-select-right":c}};
function IntegralUIListItem_span_9_Template(c,b){c&1&&(i0.\u0275\u0275elementStart(0,"span",10),i0.\u0275\u0275element(1,"span",11),i0.\u0275\u0275elementEnd());if(c&2){var a=i0.\u0275\u0275nextContext();i0.\u0275\u0275property("ngStyle",i0.\u0275\u0275pureFunction3(3,_c5,a.clickPos.x+"px",a.getSize().height+"px",a.getSize().width-a.clickPos.x+"px"));i0.\u0275\u0275advance(1);i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction1(7,_c6,a.isClicked))("ngStyle",i0.\u0275\u0275pureFunction1(9,
_c4,a.getSize().height+"px"))}}
var _c7=function(c,b,a){return{"iui-listitem-general":c,"iui-listitem-animate":b,"iui-listitem-animate-enter-suspended":a}},_c8=["*"],IntegralUIListItem=function(c){function b(a,d,e){var b=c.call(this,a,d)||this;b.elemRef=a;b.commonService=d;b.baseService=e;b.clickPos={x:0,y:0};b.isClicked=!1;b.isHovered=!1;b.parentCtrl=null;b.spacing=0;b.itemClick=new core_1.EventEmitter;b.itemDblClick=new core_1.EventEmitter;b.itemRightClick=new core_1.EventEmitter;b.allowSelection=!0;return b}__extends(b,c);b.prototype.ngOnInit=
function(){this.parentCtrl=this.baseService.getComponent();this.generalClassName="iui-listitem";this.contentClassName=this.generalClassName+"-content";this.initStyle()};b.prototype.onClick=function(a){this.isEnabled&&1==a.which&&(a={event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemClick.emit(a):this.itemClick.emit(a))};b.prototype.onDblClick=function(a){this.isEnabled&&1==a.which&&(a={cancel:!1,event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemDblClick.emit(a):this.itemDblClick.emit(a))};
b.prototype.onRightClick=function(a){this.isEnabled&&(a={event:a,item:this.data},this.parentCtrl?this.parentCtrl.itemRightClick.emit(a):this.itemRightClick.emit(a))};b.prototype.itemDragStart=function(a){if(this.isEnabled&&this.parentCtrl){var d=this.parentCtrl.getItemFromComponent(this);this.parentCtrl.processDragStart(a,d)}};b.prototype.itemDragOver=function(a,d){if(this.isEnabled&&this.parentCtrl){var b=this.parentCtrl.getItemFromComponent(this),c=this.getPageRect(),f=this.getContentSize();c={x:c.left,
y:c.top,width:c.right-c.left,height:f.height};f="none";this.parentCtrl.isDropPosHorizontal&&(f=this.parentCtrl.isDropPosHorizontal()?"horizontal":"vertical");this.parentCtrl.processDragOver(a,b,c,d,f)}a.stopPropagation()};b.prototype.itemDragDrop=function(a){if(this.isEnabled&&this.parentCtrl){var d=this.parentCtrl.getItemFromComponent(this);this.parentCtrl.processDragDrop(a,d)}a.stopPropagation()};b.prototype.onMouseEnter=function(a){this.isEnabled&&(this.state|=integralui_core_1.IntegralUIObjectState.hovered,
this.mouseEnter.emit(a),this.data&&this.parentCtrl&&this.parentCtrl.invokeEvent("ITEM_HOVER",this.data),this.isHovered=!0);a.stopPropagation()};b.prototype.onMouseDown=function(a){var d=this;if(d.isEnabled){if(d.parentCtrl){var b=d.parentCtrl.getItemFromComponent(d);d.allowSelection=d.parentCtrl.invokeMethod("SELECT_ITEM",{event:a,item:b});d.isClicked=!0;d.clickPos=d.commonService.getClientPos(a,d.elemRef.nativeElement.firstElementChild);var c=setTimeout(function(){d.isClicked=!1;clearTimeout(c)},
500)}d.mouseDown.emit(a)}a.stopPropagation()};b.prototype.onMouseUp=function(a){this.isEnabled&&(this.parentCtrl&&this.allowSelection&&this.parentCtrl.invokeMethod("UPDATE_SELECTION",{event:a,item:this.parentCtrl.getItemFromComponent(this)}),this.mouseUp.emit(a));a.stopPropagation()};b.prototype.onMouseLeave=function(a){this.isEnabled&&(this.state&=~integralui_core_1.IntegralUIObjectState.hovered,this.mouseLeave.emit(a));this.isHovered=!1;a.stopPropagation()};b.prototype.selectItem=function(){this.state|=
integralui_core_1.IntegralUIObjectState.selected};b.prototype.onTouchStart=function(a){this.isEnabled&&this.parentCtrl&&(this.allowSelection=this.parentCtrl.invokeMethod("SELECT_ITEM",{event:a,item:this.parentCtrl.getItemFromComponent(this)}));a.stopPropagation()};b.prototype.getControlStyle=function(){var a={};this.data&&this.parentCtrl&&(a=this.parentCtrl.getDataFields(),a=this.data[a.style]||{});a.position=this.positionType;a.top=this.itemPos.top+"px";a.left=this.itemPos.left+"px";0<this.ctrlSize.width&&
(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};b.\u0275fac=function(a){return new (a||b)(i0.\u0275\u0275directiveInject(i0.ElementRef),i0.\u0275\u0275directiveInject(i1.IntegralUICommonService),i0.\u0275\u0275directiveInject(i2.IntegralUIBaseService))};b.\u0275cmp=i0.\u0275\u0275defineComponent({type:b,selectors:[["iui-listitem"]],viewQuery:function(a,d){a&1&&(i0.\u0275\u0275viewQuery(_c0,!0,core_1.ElementRef),i0.\u0275\u0275viewQuery(_c1,
!0,core_1.ElementRef));if(a&2){var b;i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(d.contentElem=b.first);i0.\u0275\u0275queryRefresh(b=i0.\u0275\u0275loadQuery())&&(d.dragElem=b.first)}},inputs:{controlStyle:"controlStyle",data:"data",enabled:"enabled",icon:"icon",name:"name",size:"size",state:"state",text:"text",spacing:"spacing"},outputs:{click:"click",mouseDown:"mouseDown",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseUp:"mouseUp",itemClick:"itemClick",
itemDblClick:"itemDblClick",itemRightClick:"itemRightClick"},features:[i0.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_c8,decls:10,vars:12,consts:[[3,"ngClass","ngStyle","mouseenter","mousemove","mouseleave"],["draggable","true",2,"position","relative",3,"ngClass","dragstart","dragover","drop"],["dragElem",""],[3,"ngClass","click","dblclick","contextmenu","mousedown","mouseup","touchstart"],["content",""],["class","iui-item-icon",3,"ngClass","display",4,"ngIf"],["class","iui-item-label",
4,"ngIf"],["class","iui-listitem-animate-select-block",3,"ngStyle",4,"ngIf"],[1,"iui-item-icon",3,"ngClass"],[1,"iui-item-label"],[1,"iui-listitem-animate-select-block",3,"ngStyle"],[3,"ngClass","ngStyle"]],template:function(a,b){a&1&&(i0.\u0275\u0275projectionDef(),i0.\u0275\u0275elementStart(0,"li",0),i0.\u0275\u0275listener("mouseenter",function(a){return b.onMouseEnter(a)})("mousemove",function(a){return b.onMouseMove(a)})("mouseleave",function(a){return b.onMouseLeave(a)}),i0.\u0275\u0275elementStart(1,
"div",1,2),i0.\u0275\u0275listener("dragstart",function(a){return b.itemDragStart(a)})("dragover",function(a){return b.itemDragOver(a,!0)})("drop",function(a){return b.itemDragDrop(a)}),i0.\u0275\u0275elementStart(3,"div",3,4),i0.\u0275\u0275listener("click",function(a){return b.onClick(a)})("dblclick",function(a){return b.onDblClick(a)})("contextmenu",function(a){return b.onRightClick(a)})("mousedown",function(a){return b.onMouseDown(a)})("mouseup",function(a){return b.onMouseUp(a)})("touchstart",
function(a){return b.onTouchStart(a)}),i0.\u0275\u0275template(5,IntegralUIListItem_span_5_Template,1,3,"span",5),i0.\u0275\u0275template(6,IntegralUIListItem_span_6_Template,2,1,"span",6),i0.\u0275\u0275projection(7),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275template(8,IntegralUIListItem_span_8_Template,2,10,"span",7),i0.\u0275\u0275template(9,IntegralUIListItem_span_9_Template,2,11,"span",7),i0.\u0275\u0275elementEnd(),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",i0.\u0275\u0275pureFunction3(8,
_c7,!b.allowAnimation,b.allowAnimation,b.allowAnimation&&b.isHovered))("ngStyle",b.getControlStyle()),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngClass",b.getControlClass()),i0.\u0275\u0275advance(2),i0.\u0275\u0275property("ngClass",b.getContentClass()),i0.\u0275\u0275advance(2),i0.\u0275\u0275property("ngIf",b.icon),i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngIf",b.text),i0.\u0275\u0275advance(2),i0.\u0275\u0275property("ngIf",b.allowAnimation&&b.isClicked),i0.\u0275\u0275advance(1),
i0.\u0275\u0275property("ngIf",b.allowAnimation&&b.isClicked))},directives:[i3.NgClass,i3.NgStyle,i3.NgIf],encapsulation:2});return b}(integralui_core_1.IntegralUIItem);exports.IntegralUIListItem=IntegralUIListItem;
(function(){i0.\u0275setClassMetadata(IntegralUIListItem,[{type:core_1.Component,args:[{selector:"iui-listitem",template:'\n        <li [ngClass]="{ \'iui-listitem-general\': !allowAnimation, \'iui-listitem-animate\': allowAnimation, \'iui-listitem-animate-enter-suspended\': allowAnimation && isHovered }" (mouseenter)="onMouseEnter($event)" (mousemove)="onMouseMove($event)" (mouseleave)="onMouseLeave($event)" [ngStyle]="getControlStyle()">\n            <div [ngClass]="getControlClass()" style="position:relative" draggable="true" (dragstart)="itemDragStart($event)" (dragover)="itemDragOver($event, true)" (drop)="itemDragDrop($event)" #dragElem>\n                <div [ngClass]="getContentClass()" (click)="onClick($event)" (dblclick)="onDblClick($event)" (contextmenu)="onRightClick($event)" (mousedown)="onMouseDown($event)" (mouseup)="onMouseUp($event)" (touchstart)="onTouchStart($event)" #content>\n                    <span *ngIf="icon" class="iui-item-icon" [ngClass]="icon" [style.display]="getIconStatus()"></span>\n                    <span *ngIf="text" class="iui-item-label">{{text}}</span>\n                    <ng-content></ng-content>\n                </div>\n                <span *ngIf="allowAnimation && isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ height: getSize().height + \'px\', width: clickPos.x + \'px\' }">\n                    <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-left\': isClicked }" [ngStyle]="{ height: getSize().height + \'px\' }"></span>\n               </span>\n                <span *ngIf="allowAnimation && isClicked" class="iui-listitem-animate-select-block" [ngStyle]="{ left: clickPos.x + \'px\', height: getSize().height + \'px\', width: getSize().width - clickPos.x + \'px\' }">\n                    <span [ngClass]="{ \'iui-listitem-animate-select iui-listitem-animate-select-right\': isClicked }" [ngStyle]="{ height: getSize().height + \'px\' }"></span>\n                </span>\n            </div>\n        </li>\n    ',inputs:"controlStyle data enabled icon name size state text".split(" "),
outputs:"click mouseDown mouseEnter mouseLeave mouseMove mouseUp".split(" "),encapsulation:core_1.ViewEncapsulation.None}]}],function(){return[{type:i0.ElementRef},{type:i1.IntegralUICommonService},{type:i2.IntegralUIBaseService}]},{contentElem:[{type:core_1.ViewChild,args:["content",{read:core_1.ElementRef,"static":!1}]}],dragElem:[{type:core_1.ViewChild,args:["dragElem",{read:core_1.ElementRef,"static":!1}]}],spacing:[{type:core_1.Input}],itemClick:[{type:core_1.Output}],itemDblClick:[{type:core_1.Output}],
itemRightClick:[{type:core_1.Output}]})})();