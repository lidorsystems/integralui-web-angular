/*
  filename: integralui.splitter.js
  version : 1.6.0
  Copyright Â© 2016-2020 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var e=function(c,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return e(c,a)};return function(c,a){function b(){this.constructor=c}e(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}();Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),i0=require("@angular/core"),i1=require("../services/integralui.common.service"),i2=require("@angular/common"),_c0=["handle"],IntegralUISplitter=function(e){function c(a,c,d){var b=e.call(this,d)||this;b.elemRef=a;b.elemRenderer=c;b.commonService=d;b.clientSize={width:0,height:0};b.currentSplitterDistance=0;b.maxPos={x:0,y:0};b.panel1Size={width:0,
height:0};b.panel2Size={width:0,height:0};b.splitterSize={width:0,height:0};b.splitterHandleSize={width:0,height:0};b.prevMaxPos={x:0,y:0};b.handleClass=[];b.orientation=integralui_core_1.IntegralUIOrientation.Vertical;b.orientationChanged=new core_1.EventEmitter;b.splitterMoved=new core_1.EventEmitter;b.splitterMoving=new core_1.EventEmitter;b.splitterStartPos={x:0,y:0};b.isSplitterActive=!1;return b}__extends(c,e);c.prototype.getMaxPos=function(){return this.maxPos};Object.defineProperty(c.prototype,
"splitterDistance",{get:function(){return this.currentSplitterDistance},set:function(a){this.currentSplitterDistance!=a&&(this.currentSplitterDistance=a,this.splitterMoved.emit({value:a}),this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"panel2",{get:function(){return this.currentPanel2},set:function(a){this.currentPanel2!=a&&(this.currentPanel2=a,this.updateLayout())},enumerable:!0,configurable:!0});c.prototype.ngOnInit=function(){this.generalClassName="iui-splitter";
this.handleClassName=this.generalClassName+"-handle";this.initStyle()};c.prototype.initStyle=function(){this.defaultStyle={general:{disabled:this.generalClassName+"-disabled",focused:this.generalClassName+"-focused",normal:this.generalClassName,hovered:this.generalClassName+"-hovered",selected:this.generalClassName+"-selected"},handle:{general:this.handleClassName,horizontal:this.handleClassName+"-horizontal",vertical:this.handleClassName+"-vertical"}};this.updateStyle(this.controlStyle);this.updateControlClass();
this.updateHandleClass()};c.prototype.ngAfterViewInit=function(){};c.prototype.ngAfterContentInit=function(){this.initLayout();this.updateSettings()};c.prototype.initLayout=function(){var a=this,b=setTimeout(function(){a.clientSize={width:a.elemRef.nativeElement.parentElement.clientWidth,height:a.elemRef.nativeElement.parentElement.clientHeight};if(a.panel1&&a.panel1.nativeElement){var d=a.commonService.getBorderWidth(a.panel1.nativeElement);a.panel1Size={width:a.panel1.nativeElement.offsetWidth+
d.left+d.right,height:a.panel1.nativeElement.offsetHeight+d.top+d.bottom}}a.panel2&&a.panel2.nativeElement&&(d=a.commonService.getBorderWidth(a.panel2.nativeElement),a.panel2Size={width:a.panel2.nativeElement.offsetWidth+d.left+d.right,height:a.panel2.nativeElement.offsetHeight+d.top+d.bottom});a.splitterHandleSize={width:a.handleElem.nativeElement.offsetWidth,height:a.handleElem.nativeElement.offsetHeight};a.splitterSize=a.orientation==integralui_core_1.IntegralUIOrientation.Vertical?{width:a.splitterHandleSize.width,
height:a.clientSize.height}:{width:a.clientSize.width,height:a.splitterHandleSize.height};a.maxPos={x:a.clientSize.width-a.splitterHandleSize.width,y:a.clientSize.height-a.splitterHandleSize.height};a.prevMaxPos.x=a.maxPos.x;a.prevMaxPos.y=a.maxPos.y;0==a.currentSplitterDistance&&(a.currentSplitterDistance=a.orientation==integralui_core_1.IntegralUIOrientation.Vertical?a.panel1Size.width:a.panel1Size.height);a.updateLayout();clearTimeout(b)},1)};c.prototype.ngAfterContentChecked=function(){this.clientRect=
{width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight};this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),this.prevClientRect.height=this.clientRect.height)};c.prototype.updateSettings=function(){this.clientSize={width:this.elemRef.nativeElement.parentElement.clientWidth,height:this.elemRef.nativeElement.parentElement.clientHeight};
this.splitterSize=this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?{width:this.splitterHandleSize.width,height:this.clientSize.height}:{width:this.clientSize.width,height:this.splitterHandleSize.height};this.maxPos={x:this.clientSize.width-this.splitterHandleSize.width,y:this.clientSize.height-this.splitterHandleSize.height};if(this.orientation==integralui_core_1.IntegralUIOrientation.Vertical&&this.maxPos.x!=this.prevMaxPos.x){var a=Math.floor((this.maxPos.x-this.prevMaxPos.x)/
2);0==this.splitterDistance?this.splitterDistance+=a:(this.panel2Size.width=this.maxPos.x-this.splitterDistance-this.splitterHandleSize.width,this.updatePanelSize());this.prevMaxPos.x=this.maxPos.x}else this.orientation==integralui_core_1.IntegralUIOrientation.Horizontal&&this.maxPos.y!=this.prevMaxPos.y&&(a=Math.floor((this.maxPos.y-this.prevMaxPos.y)/2),0==this.splitterDistance?this.splitterDistance+=a:(this.panel2Size.height=this.maxPos.y-this.splitterDistance-this.splitterHandleSize.height,this.updatePanelSize()),
this.prevMaxPos.y=this.maxPos.y)};c.prototype.calcSplitterDistance=function(a,b){var d=this.currentSplitterDistance;this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?(a&&b&&(d+=b.x-a.x),d=Math.min(Math.max(0,d),this.maxPos.x),this.panel1Size.width=d,this.panel2Size.width=this.maxPos.x-d-this.splitterHandleSize.width):(a&&b&&(d+=b.y-a.y),d=Math.min(Math.max(0,d),this.maxPos.y),this.panel1Size.height=d,this.panel2Size.height=this.maxPos.y-d-this.splitterHandleSize.height);if(this.currentSplitterDistance!=
d){var c={cancel:!1,value:d};this.splitterMoving.emit(c);1!=c.cancel&&(this.currentSplitterDistance=d)}};c.prototype.updateLayout=function(a,b){var d=this;if(d.panel1&&d.panel2)var c=setTimeout(function(){d.calcSplitterDistance(a,b);d.updatePanelSize();d.updateSettings();clearTimeout(c)},10)};c.prototype.updatePanelSize=function(){this.panel1&&this.panel2&&(this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?(this.elemRenderer.setStyle(this.panel1.nativeElement,"width",this.panel1Size.width+
"px"),this.elemRenderer.setStyle(this.panel2.nativeElement,"width",this.panel2Size.width+"px")):(this.elemRenderer.setStyle(this.panel1.nativeElement,"height",this.panel1Size.height+"px"),this.elemRenderer.setStyle(this.panel2.nativeElement,"height",this.panel2Size.height+"px")))};c.prototype.splitterMouseDown=function(a){if(this.isEnabled){var b=this.commonService.getShiftPos();this.splitterStartPos={x:a.pageX-b.x,y:a.pageY-b.y};this.isSplitterActive=!0}};c.prototype.onWindowMouseMove=function(a){if(this.isEnabled&&
1==a.buttons&&this.isSplitterActive){var b=this.commonService.getShiftPos();a={x:a.pageX-b.x,y:a.pageY-b.y};this.updateLayout(this.splitterStartPos,a);this.splitterStartPos=a}};c.prototype.onWindowMouseUp=function(a){this.isEnabled&&(this.isSplitterActive=!1,this.splitterMoved.emit({value:this.currentSplitterDistance}))};c.prototype.onResize=function(a){this.updateSettings()};c.prototype.getControlStyle=function(){var a={cursor:"ew-resize",display:"block",width:"auto",height:"auto"};this.orientation==
integralui_core_1.IntegralUIOrientation.Vertical?(a["border-top-width"]=0,a["border-bottom-width"]=0,a.display="inline-block",a.height="100%",0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px")):(a["border-left-width"]=0,a["border-right-width"]=0,a.cursor="ns-resize",a.width="100%",0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px"));return a};c.prototype.getSplitterHandleStyle=function(){var a={"margin-top":"0","margin-left":"0"};this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?
a["margin-top"]=(this.clientSize.height-this.splitterHandleSize.height)/2+"px":a["margin-left"]=(this.clientSize.width-this.splitterHandleSize.width)/2+"px";return a};c.prototype.updateHandleClass=function(){this.handleClass.length=0;this.handleClass.push(this.handleClassName);this.handleClass.push(this.options.currentStyle.handle.general);this.orientation==integralui_core_1.IntegralUIOrientation.Vertical?this.handleClass.push(this.options.currentStyle.handle.vertical):this.handleClass.push(this.options.currentStyle.handle.horizontal)};
c.prototype.getHandleClass=function(){return this.handleClass};c.prototype.getHandleStyle=function(a){return this.commonService.isString(a)?a:a?{general:this.commonService.isFieldAvailable(a.general,this.handleClassName),horizontal:this.commonService.isFieldAvailable(a.horizontal,this.handleClassName+"-horizontal"),vertical:this.commonService.isFieldAvailable(a.vertical,this.handleClassName+"-vertical")}:{general:this.defaultStyle.handle.general,horizontal:this.defaultStyle.handle.horizontal,vertical:this.defaultStyle.handle.vertical}};
c.prototype.updateStyle=function(a){this.options.currentStyle=a?{general:this.getGeneralStyle(a.general),handle:this.getHandleStyle(a.handle)}:{general:{disabled:this.defaultStyle.general.disabled,focused:this.defaultStyle.general.focused,hovered:this.defaultStyle.general.hovered,normal:this.defaultStyle.general.normal,selected:this.defaultStyle.general.selected},handle:{general:this.defaultStyle.handle.general,horizontal:this.defaultStyle.handle.horizontal,vertical:this.defaultStyle.handle.vertical}}};
c.\u0275fac=function(a){return new (a||c)(i0.\u0275\u0275directiveInject(i0.ElementRef),i0.\u0275\u0275directiveInject(i0.Renderer2),i0.\u0275\u0275directiveInject(i1.IntegralUICommonService))};c.\u0275cmp=i0.\u0275\u0275defineComponent({type:c,selectors:[["iui-splitter"]],viewQuery:function(a,b){a&1&&i0.\u0275\u0275viewQuery(_c0,!0);if(a&2){var d;i0.\u0275\u0275queryRefresh(d=i0.\u0275\u0275loadQuery())&&(b.handleElem=d.first)}},hostBindings:function(a,b){a&1&&i0.\u0275\u0275listener("mousemove",
function(a){return b.onWindowMouseMove(a)},!1,i0.\u0275\u0275resolveDocument)("mouseup",function(a){return b.onWindowMouseUp(a)},!1,i0.\u0275\u0275resolveDocument)("resize",function(a){return b.onResize(a)},!1,i0.\u0275\u0275resolveWindow)},inputs:{controlStyle:"controlStyle",data:"data",enabled:"enabled",name:"name",size:"size",state:"state",orientation:"orientation",panel1:"panel1",panel3:"panel3",splitterDistance:"splitterDistance",panel2:"panel2"},outputs:{orientationChanged:"orientationChanged",
splitterMoved:"splitterMoved",splitterMoving:"splitterMoving"},features:[i0.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"ngClass","ngStyle","mousedown"],[3,"ngClass","ngStyle"],["handle",""]],template:function(a,b){a&1&&(i0.\u0275\u0275elementStart(0,"div",0),i0.\u0275\u0275listener("mousedown",function(a){return b.splitterMouseDown(a)}),i0.\u0275\u0275element(1,"span",1,2),i0.\u0275\u0275elementEnd());a&2&&(i0.\u0275\u0275property("ngClass",b.getControlClass())("ngStyle",b.getControlStyle()),
i0.\u0275\u0275advance(1),i0.\u0275\u0275property("ngClass",b.getHandleClass())("ngStyle",b.getSplitterHandleStyle()))},directives:[i2.NgClass,i2.NgStyle],encapsulation:2});return c}(integralui_core_1.IntegralUIBaseComponent);exports.IntegralUISplitter=IntegralUISplitter;
(function(){i0.\u0275setClassMetadata(IntegralUISplitter,[{type:core_1.Component,args:[{selector:"iui-splitter",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()" (mousedown)="splitterMouseDown($event)">\n\t\t\t<span #handle [ngClass]="getHandleClass()" [ngStyle]="getSplitterHandleStyle()"></span>\n\t\t</div>\n\t',inputs:"controlStyle data enabled name size state".split(" "),encapsulation:core_1.ViewEncapsulation.None}]}],function(){return[{type:i0.ElementRef},{type:i0.Renderer2},
{type:i1.IntegralUICommonService}]},{handleElem:[{type:core_1.ViewChild,args:["handle",{"static":!1}]}],orientation:[{type:core_1.Input}],panel1:[{type:core_1.Input}],panel3:[{type:core_1.Input}],splitterDistance:[{type:core_1.Input}],panel2:[{type:core_1.Input}],orientationChanged:[{type:core_1.Output}],splitterMoved:[{type:core_1.Output}],splitterMoving:[{type:core_1.Output}],onWindowMouseMove:[{type:core_1.HostListener,args:["document:mousemove",["$event"]]}],onWindowMouseUp:[{type:core_1.HostListener,
args:["document:mouseup",["$event"]]}],onResize:[{type:core_1.HostListener,args:["window:resize",["$event"]]}]})})();