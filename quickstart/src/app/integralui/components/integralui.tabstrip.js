/*
  filename: integralui.tabstrip.js
  version : 1.9.0
  Copyright Â© 2016-2019 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(){var h=function(b,a){h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return h(b,a)};return function(b,a){function c(){this.constructor=b}h(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),__decorate=this&&this.__decorate||function(h,b,a,c){var d=arguments.length,e=3>d?b:null===c?c=Object.getOwnPropertyDescriptor(b,a):c,f;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(h,b,a,c);else for(var g=h.length-1;0<=g;g--)if(f=h[g])e=(3>d?f(e):3<d?f(b,a,e):f(b,a))||e;return 3<d&&e&&Object.defineProperty(b,a,e),e},__metadata=this&&this.__metadata||function(h,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(h,b)};Object.defineProperty(exports,"__esModule",{value:!0});
var core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),integralui_data_service_1=require("../services/integralui.data.service"),integralui_tab_1=require("./integralui.tab"),IntegralUITabStrip=function(h){function b(a,c,b,e,f,g,l){var d=h.call(this,f)||this;d.dataService=a;d.elemRef=c;d.elemRenderer=b;d.changeRef=e;d.commonService=f;d.cmpResolver=g;d.baseService=l;d.dataTabs=[];d.eventList=[];d.numTabs=
0;d.reorderTab=null;d.tabReorderActive=!1;d.reorderTabPos={top:0,left:0};d.reorderTabStartPos={top:0,left:0};d.reorderTabCurrentPos={top:0,left:0};d.startTabReorder=!1;d.reorderTabIndex=-1;d.reorderNewTabIndex=-1;d.orgHeaderList=[];d.orgReorderTabIndex=-1;d.ctrlCursor="default";d.autoSizeValue=!1;d.blockPos={top:"0",right:"auto",bottom:"auto",left:"0"};d.clientRect={width:0,height:0};d.currentTabPlacement=integralui_core_1.IntegralUITabStripPlacement.Top;d.scrollBlockSize={width:0,height:0};d.scrollButtonSize=
{width:0,height:0};d.tabSize={width:0,height:0};d.tabStripSize={width:0,height:0};d.updateTimer=null;d.currentScrollMode=integralui_core_1.IntegralUITabScrollMode.None;d.isScrollActive=!1;d.scrollCount=0;d.currentScrollPos=0;d.scrollTimer=null;d.stopScrolling=!0;d.maxScrollPos=0;d.currentSelection=null;d.currentSelectedIndex=-1;d.selectedComponent=null;d.prevComponent=null;d.removeIndex=-1;d.tRef=null;d.allowDrag=!1;d.allowDrop=!0;d.tabSpacing=0;d.afterSelect=new core_1.EventEmitter;d.beforeSelect=
new core_1.EventEmitter;d.change=new core_1.EventEmitter;d.tabAdding=new core_1.EventEmitter;d.tabAdded=new core_1.EventEmitter;d.tabOrderChanged=new core_1.EventEmitter;d.clear=new core_1.EventEmitter;d.tabRemoving=new core_1.EventEmitter;d.tabRemoved=new core_1.EventEmitter;d.scrollPosChanged=new core_1.EventEmitter;d.selectionChanged=new core_1.EventEmitter;d.tabList=[];return d}__extends(b,h);Object.defineProperty(b.prototype,"autoSize",{get:function(){return this.autoSizeValue},set:function(a){this.autoSizeValue!=
a&&(this.autoSizeValue=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scrollMode",{get:function(){return this.currentScrollMode},set:function(a){this.currentScrollMode!=a&&(this.currentScrollMode=a,this.scrollPos(0),this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectedIndex",{get:function(){return this.currentSelectedIndex},set:function(a){this.currentSelectedIndex!=a&&(this.currentSelectedIndex=a,this.selectComponentByIndex(a))},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectedTab",{get:function(){return this.currentSelection},set:function(a){this.currentSelection!=a&&(this.currentSelection=a,this.selectTab(a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tabs",{get:function(){return this.dataTabs},set:function(a){this.dataTabs=a;this.updateData();var c=this;setTimeout(function(){c.tabList=c.contentList.toArray();c.numTabs=c.tabList.length;0<c.numTabs&&(0<=c.selectedIndex?
c.selectComponentByIndex(c.selectedIndex):c.selectedTab&&c.tabs?c.selectComponentByIndex(c.tabs.indexOf(c.selectedTab)):c.selectComponentByIndex(0));c.updateLayout()},100)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tabStripPlacement",{get:function(){return this.currentTabPlacement},set:function(a){this.currentTabPlacement!=a&&(this.currentTabPlacement=a,this.scrollPos(0),this.updateLayout())},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.baseService.setComponent(this);
this.updateData();this.generalClassName="iui-tabstrip";this.tabHeaderClassName="iui-tab-header";this.initStyle()};b.prototype.updateData=function(){this.dataService.init([{data:this.tabs}])};b.prototype.ngAfterViewInit=function(){var a=this,c=setTimeout(function(){var d=a.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUITComponent);d&&a.tabBlockRef&&(a.tRef=a.tabBlockRef.createComponent(d));clearTimeout(c)},100)};b.prototype.ngAfterContentInit=function(){};b.prototype.ngOnDestroy=function(){this.scrollTimer&&
clearInterval(this.scrollTimer);this.tRef&&this.tRef.destroy()};b.prototype.ngAfterContentChecked=function(){this.clientRect={width:this.elemRef.nativeElement.firstElementChild.clientWidth,height:this.elemRef.nativeElement.firstElementChild.clientHeight};this.clientRect.width!=this.prevClientRect.width?(this.updateLayout(),this.prevClientRect.width=this.clientRect.width):this.clientRect.height!=this.prevClientRect.height&&(this.updateLayout(),this.prevClientRect.height=this.clientRect.height)};b.prototype.addTab=
function(a){this.callEventAdd("add",a)};b.prototype.clearTabs=function(){this.dataService.clear();this.clear.emit(null)};b.prototype.insertTabAt=function(a,c){this.callEventAdd("at",a,c)};b.prototype.insertTabBefore=function(a,c){this.callEventAdd("ref",a,-1,c)};b.prototype.insertTabAfter=function(a,c){this.callEventAdd("ref",a,-1,c,!0)};b.prototype.removeTab=function(a){return this.callEventRemove(a)};b.prototype.removeTabAt=function(a){return this.tabs&&0<=a&&a<this.tabs.length?this.callEventRemove(this.tabs[a]):
!1};b.prototype.callEventAdd=function(a,c,d,b,f){var e={cancel:!1,tab:c};this.tabAdding.emit(e);if(1!=e.cancel){switch(a){case "at":this.dataService.insert(c,d);break;case "ref":this.dataService.insertByRef(c,b,f);break;default:this.dataService.insert(c)}this.tabAdded.emit({tab:c});this.selectedComponent||this.selectComponentByIndex(0)}};b.prototype.callEventRemove=function(a){var c={cancel:!1,tab:a};this.tabRemoving.emit(c);return 1!=c.cancel?(this.removeIndex=this.tabs?this.tabs.indexOf(a):-1,this.dataService.removeAt(a),
this.tabRemoved.emit({tab:a}),!0):!1};b.prototype.attachTabEvents=function(){};b.prototype.getTabCurrentIndex=function(a){this.tabList=this.contentList.toArray();return a&&this.tabList?this.tabList.indexOf(a):-1};b.prototype.getTabDataIndex=function(a){return a&&(a=this.getTabCurrentIndex(a),this.tabs&&0<=a&&a<this.tabs.length)?a:-1};b.prototype.getTabData=function(a){return this.tabs&&0<=a&&a<this.tabs.length?this.tabs[a]:null};b.prototype.getTabIndex=function(a){return a&&this.tabs?this.tabs.indexOf(a):
-1};b.prototype.getComponentData=function(a){if(a){if(a.data)return a.data;a=this.getTabDataIndex(a);if(this.tabs&&0<=a&&a<this.tabs.length)return this.tabs[a]}return null};b.prototype.isIndexInRange=function(a){this.contentList&&(this.tabList=this.contentList.toArray());return this.tabList?0<=a&&a<this.tabList.length:!1};b.prototype.resetLayout=function(){this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=null};b.prototype.updateLayout=function(){this.updateTabLayout()};b.prototype.updateTabLayout=
function(){var a=this;a.resetLayout();a.updateTimer=setTimeout(function(){a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth,height:a.elemRef.nativeElement.firstElementChild.clientHeight};a.scrollBlockSize=a.scrollInBoundElem?{width:a.scrollInBoundElem.nativeElement.offsetWidth,height:a.scrollInBoundElem.nativeElement.offsetHeight}:{width:0,height:0};a.scrollButtonSize=a.scrollButtonElem?{width:a.scrollButtonElem.nativeElement.offsetWidth,height:a.scrollButtonElem.nativeElement.offsetHeight}:
{width:0,height:0};a.tabList=a.contentList.toArray();if(a.tabHeaders){var c=0,d=0,b=0,f=0,g={top:0,left:0},l={width:0,height:0};a.tabSize={width:0,height:0};var h=a.tabHeaders.toArray();if(h&&0<h.length){h.forEach(function(e,l){a.elemRenderer.setElementStyle(e.nativeElement,"width","auto");a.elemRenderer.setElementStyle(e.nativeElement,"height","auto");b=e.nativeElement.offsetWidth;f=e.nativeElement.offsetHeight;var g=a.commonService.getPadding(e.nativeElement);switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.blockPos=
{top:-a.currentScrollPos+"px",right:"0",bottom:"auto",left:"auto"};a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a.blockPos.top=a.scrollButtonSize.height+4-a.currentScrollPos+"px");a.elemRenderer.setElementStyle(e.nativeElement,"top",d+"px");a.elemRenderer.setElementStyle(e.nativeElement,"right","0");a.elemRenderer.setElementStyle(e.nativeElement,"bottom","auto");a.elemRenderer.setElementStyle(e.nativeElement,"left","auto");a.tabSize.width<b&&(a.tabSize.width=b-(g.left+
g.right)-1);break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.blockPos={top:"auto",right:"auto",bottom:"0",left:-a.currentScrollPos+"px"};a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a.blockPos.left=a.scrollButtonSize.width+2-a.currentScrollPos+"px");a.elemRenderer.setElementStyle(e.nativeElement,"top","auto");a.elemRenderer.setElementStyle(e.nativeElement,"right","auto");a.elemRenderer.setElementStyle(e.nativeElement,"bottom","0");a.elemRenderer.setElementStyle(e.nativeElement,
"left",c+"px");a.tabSize.height<f&&(a.tabSize.height=f-(g.top+g.bottom));break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.blockPos={top:-a.currentScrollPos+"px",right:"auto",bottom:"auto",left:"0"};a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a.blockPos.top=a.scrollButtonSize.height+4-a.currentScrollPos+"px");a.elemRenderer.setElementStyle(e.nativeElement,"top",d+"px");a.elemRenderer.setElementStyle(e.nativeElement,"right","auto");a.elemRenderer.setElementStyle(e.nativeElement,
"bottom","auto");a.elemRenderer.setElementStyle(e.nativeElement,"left","0");a.tabSize.width<b&&(a.tabSize.width=b-(g.left+g.right)-1);break;default:a.blockPos={top:"0",right:"auto",bottom:"auto",left:-a.currentScrollPos+"px"},a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a.blockPos.left=a.scrollButtonSize.width+2-a.currentScrollPos+"px"),a.elemRenderer.setElementStyle(e.nativeElement,"top","0"),a.elemRenderer.setElementStyle(e.nativeElement,"right","auto"),a.elemRenderer.setElementStyle(e.nativeElement,
"bottom","auto"),a.elemRenderer.setElementStyle(e.nativeElement,"left",c+"px"),a.tabSize.height<f&&(a.tabSize.height=f)}g=a.tabSpacing;c+=b+g-1;d+=f+g-1});var k=a.commonService.getBorderWidth(a.elemRef.nativeElement.children[0]);h.forEach(function(c,d){var b=a.commonService.getPadding(c.nativeElement);switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.elemRenderer.setElementStyle(c.nativeElement,"width",a.tabSize.width+"px");g={top:0,left:0};l={width:a.elemRef.nativeElement.children[0].clientWidth-
(k.left+k.right-1)-a.tabSize.width-(b.left+b.right)-2,height:a.elemRef.nativeElement.children[0].clientHeight-(k.top+k.bottom)};break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.elemRenderer.setElementStyle(c.nativeElement,"height",a.tabSize.height+"px");g={top:0,left:0};l={width:a.elemRef.nativeElement.children[0].clientWidth-(k.left+k.right),height:a.elemRef.nativeElement.children[0].clientHeight-a.tabSize.height-(b.top+b.bottom)-2-(k.top+k.bottom-1)};break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.elemRenderer.setElementStyle(c.nativeElement,
"width",a.tabSize.width+"px");g={top:0,left:a.tabSize.width+(b.left+b.right)+1};l={width:a.elemRef.nativeElement.children[0].clientWidth-(k.left+k.right-1)-a.tabSize.width-(b.left+b.right)-2,height:a.elemRef.nativeElement.children[0].clientHeight-(k.top+k.bottom)};break;default:g={top:a.tabSize.height-1,left:0},l={width:a.elemRef.nativeElement.children[0].clientWidth-(k.left+k.right),height:a.elemRef.nativeElement.children[0].clientHeight-a.tabSize.height-(k.top+k.bottom-1)},a.autoSizeValue&&(l.height=
"auto")}});a.tabStripSize={width:a.clientRect.width,height:a.clientRect.height};switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.tabStripSize.width=b;break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.tabStripSize.height=f;break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.tabStripSize.width=b;break;default:a.tabStripSize.height=f}}a.tabList&&0<a.tabList.length&&a.tabList.forEach(function(a){a.updateLayout(g,l)});a.maxScrollPos=0;
a.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Left||a.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right?(a.maxScrollPos+=d-a.tabSpacing+1-a.clientRect.height,a.maxScrollPos=a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound?a.maxScrollPos+2*(a.scrollButtonSize.height+4):a.maxScrollPos+a.scrollBlockSize.height):(a.maxScrollPos+=c-a.tabSpacing+1-a.clientRect.width,a.maxScrollPos=a.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound?
a.maxScrollPos+2*(a.scrollButtonSize.width+2):a.maxScrollPos+a.scrollBlockSize.width);a.maxScrollPos=Math.max(a.maxScrollPos,0)}clearTimeout(a.updateTimer)},1)};b.prototype.updateTabHeaders=function(){var a=this,c=0,d=0,b=0,f=0,g=a.tabHeaders.toArray();g&&0<g.length&&g.forEach(function(e,g){b=e.nativeElement.offsetWidth;f=e.nativeElement.offsetHeight;a.commonService.getPadding(e.nativeElement);switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.elemRenderer.setElementStyle(e.nativeElement,
"top",d+"px");a.elemRenderer.setElementStyle(e.nativeElement,"right","0");a.elemRenderer.setElementStyle(e.nativeElement,"bottom","auto");a.elemRenderer.setElementStyle(e.nativeElement,"left","auto");break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.elemRenderer.setElementStyle(e.nativeElement,"top","auto");a.elemRenderer.setElementStyle(e.nativeElement,"right","auto");a.elemRenderer.setElementStyle(e.nativeElement,"bottom","0");a.elemRenderer.setElementStyle(e.nativeElement,"left",
c+"px");break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.elemRenderer.setElementStyle(e.nativeElement,"top",d+"px");a.elemRenderer.setElementStyle(e.nativeElement,"right","auto");a.elemRenderer.setElementStyle(e.nativeElement,"bottom","auto");a.elemRenderer.setElementStyle(e.nativeElement,"left","0");break;default:a.elemRenderer.setElementStyle(e.nativeElement,"top","0"),a.elemRenderer.setElementStyle(e.nativeElement,"right","auto"),a.elemRenderer.setElementStyle(e.nativeElement,"bottom",
"auto"),a.elemRenderer.setElementStyle(e.nativeElement,"left",c+"px")}var k=a.tabSpacing;c+=b+k-1;d+=f+k-1})};b.prototype.tabMouseDown=function(a,c){this.isEnabled&&this.selectComponent(c);if(this.isEnabled)switch(a.which){case 1:this.selectComponent(c);this.allowDrag&&c.allowDrag&&(this.startTabReorder=!0,this.reorderTabStartPos={top:a.pageY+this.currentScrollPos,left:a.pageX+this.currentScrollPos},this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(this.currentTabPlacement==
integralui_core_1.IntegralUITabStripPlacement.Left||this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right?this.reorderTabStartPos.top-=this.scrollButtonSize.height+4:this.reorderTabStartPos.left-=this.scrollButtonSize.width+2));break;case 2:this.selectComponent(c)}};b.prototype.tabMouseMove=function(a,c){if(this.isEnabled&&this.startTabReorder){this.reorderTabCurrentPos={top:a.pageY,left:a.pageX};var b=Math.abs(this.reorderTabCurrentPos.left-this.reorderTabStartPos.left),e=
Math.abs(this.reorderTabCurrentPos.top-this.reorderTabStartPos.top);!this.tabReorderActive&&(3<b||3<e)&&(this.tabReorderActive=!0,this.reorderTab=c,this.ctrlCursor="move",this.orgHeaderList=this.tabHeaders.toArray(),this.orgReorderTabIndex=this.tabList.indexOf(this.reorderTab),this.updateReorderTabPos())}};b.prototype.tabEnter=function(a,c){this.isEnabled&&!c.selected&&(c.state|=integralui_core_1.IntegralUIObjectState.hovered)};b.prototype.tabLeave=function(a,c){c.state&=~integralui_core_1.IntegralUIObjectState.hovered};
b.prototype.ctrlMouseMove=function(a){this.isEnabled&&1==a.which&&this.tabReorderActive&&this.reorderTab&&(this.reorderTabCurrentPos.left=a.pageX,this.updateReorderTabPos(),this.processDragScroll(a),a.stopPropagation())};b.prototype.ctrlMouseUp=function(a){var c=this;if(1==a.which&&c.reorderTab&&0<=c.reorderNewTabIndex&&c.reorderNewTabIndex<c.tabList.length&&c.orgReorderTabIndex!=c.reorderNewTabIndex){var b={tab:c.getComponentData(c.reorderTab)};c.commonService.moveObject(c.orgReorderTabIndex,c.reorderNewTabIndex,
c.tabs);setTimeout(function(){c.tabList=c.contentList.toArray();c.updateLayout();c.tabOrderChanged.emit(b)},1)}this.resetReorderTabSettings()};b.prototype.updateReorderTabPos=function(){if(this.reorderTab){var a=0,c=0;this.reorderNewTabIndex=this.reorderTabIndex=this.tabList.indexOf(this.reorderTab);var b=this.orgHeaderList,e;for(e=0;e<b.length&&e<this.orgReorderTabIndex;e++){var f=b[e].nativeElement.offsetWidth;var g=b[e].nativeElement.offsetHeight;this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Left||
this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right?c+=g+this.tabSpacing-1:a+=f+this.tabSpacing-1}e<b.length&&e==this.orgReorderTabIndex&&(f=b[e].nativeElement.offsetWidth,g=b[e].nativeElement.offsetHeight,this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Left||this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right?(this.reorderTabPos.top=c+this.reorderTabCurrentPos.top-this.reorderTabStartPos.top,this.reorderTabPos.top=Math.max(0,
Math.min(this.reorderTabPos.top,this.clientRect.height-g))):(this.reorderTabPos.left=a+this.reorderTabCurrentPos.left-this.reorderTabStartPos.left,this.reorderTabPos.left=Math.max(0,Math.min(this.reorderTabPos.left,this.clientRect.width-f))));c=a=0;e=this.commonService.getPageRect(this.elemRef.nativeElement);for(var h=0;h<this.tabs.length;h++)if(h<b.length)if(f=b[h].nativeElement.offsetWidth,g=b[h].nativeElement.offsetHeight,this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Left||
this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right){if(c+=g,this.reorderTabCurrentPos.top-e.top<c-this.currentScrollPos){this.reorderNewTabIndex=h;break}}else if(a+=f,this.reorderTabCurrentPos.left-e.left<a-this.currentScrollPos){this.reorderNewTabIndex=h;break}this.reorderTabIndex!=this.reorderNewTabIndex&&(this.commonService.moveObject(this.reorderTabIndex,this.reorderNewTabIndex,this.tabList),this.changeRef.detectChanges(),this.updateTabHeaders())}};b.prototype.resetReorderTabSettings=
function(){this.reorderTab=null;this.startTabReorder=this.tabReorderActive=!1;this.ctrlCursor="default";this.reorderTabStartPos={top:0,left:0};this.reorderTabCurrentPos={top:0,left:0};this.reorderTabPos={top:0,left:0}};b.prototype.getTabOpacity=function(a){return this.tabReorderActive&&a==this.reorderTab?0:1};b.prototype.onWindowMouseUp=function(a){this.resetReorderTabSettings()};b.prototype.getLastTabIndex=function(){var a=this.dataService.getList();return a?a.length-1:-1};b.prototype.getPrevTab=
function(a){var c=null;if(a){var b=this.dataService.getList();a=b.indexOf(a);a=0<a?a-1:-1;0<=a&&(c=b[a])}return c};b.prototype.getNextTab=function(a){var c=null;if(a){var b=this.dataService.getList();a=b.indexOf(a);a=a<b.length-1?a+1:-1;0<=a&&(c=b[a])}return c};b.prototype.moveTab=function(a,c,b,e){if(a){var d=-1;switch(c){case integralui_core_1.IntegralUIMoveDirection.At:d=e;break;case integralui_core_1.IntegralUIMoveDirection.Down:b=this.getNextTab(a);break;case integralui_core_1.IntegralUIMoveDirection.First:d=
0;break;case integralui_core_1.IntegralUIMoveDirection.Last:d=this.getLastTabIndex();break;case integralui_core_1.IntegralUIMoveDirection.Left:b=this.getPrevTab(a);break;case integralui_core_1.IntegralUIMoveDirection.Right:b=this.getNextTab(a);break;case integralui_core_1.IntegralUIMoveDirection.Up:b=this.getPrevTab(a)}this.moveTabAt(a,b,c,d);this.tabs=this.dataService.getList();this.selectTab(a);this.updateLayout();this.change.emit({type:"move-tab"});this.scrollTo(a)}};b.prototype.moveTabAt=function(a,
b,d,e){this.removeTab(a)&&(d==integralui_core_1.IntegralUIMoveDirection.First||d==integralui_core_1.IntegralUIMoveDirection.Right||d==integralui_core_1.IntegralUIMoveDirection.Last||d==integralui_core_1.IntegralUIMoveDirection.At?this.insertTabAt(a,e):d==integralui_core_1.IntegralUIMoveDirection.Before||d==integralui_core_1.IntegralUIMoveDirection.Up?this.insertTabBefore(a,b):(d==integralui_core_1.IntegralUIMoveDirection.After||d==integralui_core_1.IntegralUIMoveDirection.Left||d==integralui_core_1.IntegralUIMoveDirection.Down)&&
this.insertTabAfter(a,b))};b.prototype.scrollPos=function(a){void 0!=a&&(this.currentScrollPos=Math.max(0,Math.min(a,this.maxScrollPos)),this.updateLayout(),this.scrollPosChanged.emit({value:this.currentScrollPos}));return Math.floor(this.currentScrollPos)};b.prototype.startScroll=function(a){var b=this;b.scrollTimer&&clearInterval(b.scrollTimer);b.scrollCount=0;b.isScrollActive=!0;b.scrollTimer=setInterval(function(){b.scrollTimerElapsed(a)},100)};b.prototype.stopScroll=function(){this.scrollTimer&&
clearInterval(this.scrollTimer);this.isScrollActive=!1};b.prototype.processScroll=function(a){a?this.currentScrollPos+this.scrollCount<this.maxScrollPos?this.currentScrollPos+=this.scrollCount:(this.stopScrolling=!0,this.currentScrollPos=this.maxScrollPos):0<this.currentScrollPos-this.scrollCount?this.currentScrollPos-=this.scrollCount:(this.stopScrolling=!0,this.currentScrollPos=0);this.scrollTabs();this.scrollPosChanged.emit({value:this.currentScrollPos})};b.prototype.processDragScroll=function(a){if(this.isEnabled){var b=
this.commonService.getShiftPos();a=this.commonService.getMousePos(a);a.x-=b.x;a.y-=b.y;var d=this.commonService.getPageRect(this.elemRef.nativeElement.firstElementChild);b=d.top+25;var e=d.right-25,f=d.bottom-25;d=d.left+25;this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound?(b+=this.scrollButtonSize.height+4,e-=this.scrollButtonSize.width+2,f-=this.scrollButtonSize.height+4,d+=this.scrollButtonSize.width+2):(e-=this.scrollBlockSize.width,f-=this.scrollBlockSize.height);this.currentTabPlacement==
integralui_core_1.IntegralUITabStripPlacement.Left||this.currentTabPlacement==integralui_core_1.IntegralUITabStripPlacement.Right?a.y<b?this.startScroll():a.y>f?this.startScroll(!0):this.stopScroll():a.x<d?this.startScroll():a.x>e?this.startScroll(!0):this.stopScroll()}};b.prototype.scrollTimerElapsed=function(a){0==this.scrollCount&&(this.scrollCount=1);this.scrollCount+=5;this.stopScrolling=!1;this.processScroll(a);this.stopScrolling&&(clearInterval(this.scrollTimer),this.isScrollActive=!1)};b.prototype.scrollTabs=
function(){switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:var a=-this.currentScrollPos;this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a+=this.scrollButtonSize.height+4);this.blockPos={top:a+"px",right:"0",bottom:"auto",left:"auto"};break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a=-this.currentScrollPos;this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a+=this.scrollButtonSize.width+
2);this.blockPos={top:"auto",right:"auto",bottom:"0",left:a+"px"};break;case integralui_core_1.IntegralUITabStripPlacement.Left:a=-this.currentScrollPos;this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a+=this.scrollButtonSize.height+4);this.blockPos={top:a+"px",right:"auto",bottom:"auto",left:"0"};break;default:a=-this.currentScrollPos,this.currentScrollMode==integralui_core_1.IntegralUITabScrollMode.OutBound&&(a+=this.scrollButtonSize.width+2),this.blockPos={top:"0",
right:"auto",bottom:"auto",left:a+"px"}}};b.prototype.scrollButtonMouseDown=function(a,b){this.startScroll(b);a.stopPropagation()};b.prototype.scrollButtonMouseUp=function(a){this.stopScroll();a.stopPropagation()};b.prototype.scrollTo=function(a){if(a){a=this.getTabIndex(a);var b=this.tabHeaders.toArray();if(b&&0<b.length){for(var d=0,e=0;e<a&&e<b.length;e++)switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Left:d+=b[e].nativeElement.offsetHeight+this.tabSpacing;
break;case integralui_core_1.IntegralUITabStripPlacement.Right:d+=b[e].nativeElement.offsetHeight+this.tabSpacing;break;default:d+=b[e].nativeElement.offsetWidth+this.tabSpacing}this.scrollPos(Math.min(d,this.maxScrollPos));this.updateLayout()}}};b.prototype.clearSelection=function(a){this.tabList.forEach(function(b,d){b!=a&&(b.selected=!1)})};b.prototype.selectComponent=function(a,b){if(a&&a!=this.selectedComponent){var c=this.getTabCurrentIndex(a),e=this.getComponentData(a),f={cancel:!1,index:c,
tab:e};this.beforeSelect.emit(f);if(1!=f.cancel)return this.currentSelectedIndex=c,this.tabs&&0<=c&&c<this.tabs.length&&(this.currentSelection=this.tabs[c]),this.prevComponent=this.selectedComponent,this.selectedComponent=a,this.clearSelection(a),a.selected=!0,b||(this.afterSelect.emit({index:c,tab:e}),this.selectionChanged.emit({index:c,tab:e})),!0}return!1};b.prototype.selectComponentByIndex=function(a,b){this.isIndexInRange(a)&&this.selectComponent(this.tabList[a],b)};b.prototype.selectTab=function(a,
b){this.tabs&&(this.currentSelectedIndex=this.tabs.indexOf(a),this.selectComponentByIndex(this.currentSelectedIndex,b))};b.prototype.getScrollInBoundStyle=function(){var a={top:"auto",right:"auto",bottom:"auto",left:"auto",opacity:"1",padding:"0",width:"auto",height:"auto"};switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.bottom="0px";a.right="0";a.padding="2px 0 0 0";a.width=this.tabStripSize.width+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.right=
"0px";a.bottom="0";a.padding="0 0 0 2px";a.height=this.tabStripSize.height+1+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.bottom="0px";a.left="0";a.padding="2px 0 0 0";a.width=this.tabStripSize.width+"px";break;default:a.right="0px",a.top="0",a.padding="0 0 0 2px",a.height=this.tabStripSize.height-1+"px"}0==this.maxScrollPos&&(a.opacity="0.4");return a};b.prototype.getScrollInBoundButtonStyle=function(a){a={"margin-left":"auto","margin-top":"auto"};switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a["margin-left"]=
"2px";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a["margin-top"]="2px";break;case integralui_core_1.IntegralUITabStripPlacement.Left:a["margin-left"]=this.tabStripSize.width-this.scrollButtonSize.width-2+"px";break;default:a["margin-top"]=this.tabStripSize.height-this.scrollButtonSize.height-2+"px"}return a};b.prototype.getScrollOutBoundStyle=function(a){var b={top:"auto",right:"auto",bottom:"auto",left:"auto",opacity:"1",padding:"0",width:"auto",height:"auto"};switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:1==
a?(b.top="0",b.padding="0  0 2px 0"):(b.bottom="0",b.padding="2px 0 0 0");b.right="0";b.width=this.tabStripSize.width+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:1==a?(b.left="0",b.padding="0 2px 0 0"):(b.right="0",b.padding="0 0 0 2px");b.bottom="0";b.height=this.tabStripSize.height+1+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Left:1==a?(b.top="0",b.padding="0  0 2px 0"):(b.bottom="0",b.padding="2px 0 0 0");b.left="0";b.width=this.tabStripSize.width+"px";
break;default:1==a?(b.left="0",b.padding="0 2px 0 0"):(b.right="0",b.padding="0 0 0 2px"),b.top="0",b.height=this.tabStripSize.height-1+"px"}0==this.maxScrollPos&&(b.opacity="0.4");return b};b.prototype.getControlStyle=function(){var a={cursor:this.ctrlCursor};0<this.ctrlSize.width&&(a.width=this.ctrlSize.width+"px");0<this.ctrlSize.height&&(a.height=this.ctrlSize.height+"px");return a};b.prototype.getTabHeaderClass=function(a,b){var c=a.getCurrentTabStyle(),e=c.header.normal;if(a.state&integralui_core_1.IntegralUIObjectState.disabled)e+=
" "+c.header.disabled;else if(a.state&integralui_core_1.IntegralUIObjectState.focused)e+=" "+c.header.focused;else if(a.state&integralui_core_1.IntegralUIObjectState.selected)switch(e+=" "+c.header.selected,this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:e+=" iui-tab-selected-right";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:e+=" iui-tab-selected-bottom";break;case integralui_core_1.IntegralUITabStripPlacement.Left:e+=" iui-tab-selected-left";
break;default:e+=" iui-tab-selected-top"}else a.state&integralui_core_1.IntegralUIObjectState.hovered&&(e+=" "+c.header.hovered);return e};b.prototype.getReorderTabStyle=function(){var a={position:"absolute","pointer-events":"none","z-index":999};switch(this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.top=this.reorderTabPos.top+"px";a.right=0;a.bottom="auto";a.left="auto";a.width=this.tabSize.width-1+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.top=
"auto";a.right="auto";a.bottom=0;a.left=this.reorderTabPos.left+"px";a.height=this.tabSize.height-1+"px";break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.top=this.reorderTabPos.top+"px";a.right="auto";a.bottom="auto";a.left=0;a.width=this.tabSize.width-1+"px";break;default:a.top=0,a.right="auto",a.bottom="auto",a.left=this.reorderTabPos.left+"px",a.height="auto"}return a};b.prototype.tabTouchStart=function(a,b){this.isEnabled&&this.selectComponent(b)};__decorate([core_1.ContentChildren(integralui_tab_1.IntegralUITab),
__metadata("design:type",core_1.QueryList)],b.prototype,"contentList",void 0);__decorate([core_1.ViewChild("scrollInBound",{"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"scrollInBoundElem",void 0);__decorate([core_1.ViewChild("scrollButton",{"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"scrollButtonElem",void 0);__decorate([core_1.ViewChild("tabBlock",{"static":!1}),__metadata("design:type",core_1.ElementRef)],b.prototype,"tabBlock",void 0);__decorate([core_1.ViewChild("tabBlock",
{read:core_1.ViewContainerRef,"static":!1}),__metadata("design:type",core_1.ViewContainerRef)],b.prototype,"tabBlockRef",void 0);__decorate([core_1.ViewChildren("tabHeader"),__metadata("design:type",core_1.QueryList)],b.prototype,"tabHeaders",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean)],b.prototype,"allowDrag",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean)],b.prototype,"allowDrop",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",
[Boolean])],b.prototype,"autoSize",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"scrollMode",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"selectedIndex",null);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],b.prototype,"selectedTab",null);__decorate([core_1.Input(),__metadata("design:type",Array),
__metadata("design:paramtypes",[Array])],b.prototype,"tabs",null);__decorate([core_1.Input(),__metadata("design:type",Number)],b.prototype,"tabSpacing",void 0);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],b.prototype,"tabStripPlacement",null);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"afterSelect",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"beforeSelect",
void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"change",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"tabAdding",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"tabAdded",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"tabOrderChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],
b.prototype,"clear",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"tabRemoving",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"tabRemoved",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"scrollPosChanged",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],b.prototype,"selectionChanged",void 0);__decorate([core_1.HostListener("document:mouseup",
["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],b.prototype,"onWindowMouseUp",null);return b=__decorate([core_1.Component({selector:"iui-tabstrip",template:'\n\t\t<div [ngClass]="getControlClass()" [ngStyle]="getControlStyle()">\n\t\t\t<div *ngIf="scrollMode==2" class="iui-tabstrip-scroll-outbound" [ngStyle]="getScrollOutBoundStyle(1)" #scrollOutBound>\n\t\t\t\t<div class="iui-tabstrip-scroll-button" [ngClass]="{ \'iui-tabstrip-scroll-button-up\': tabStripPlacement == 1 || tabStripPlacement == 4, \'iui-tabstrip-scroll-button-left\': tabStripPlacement == 0 || tabStripPlacement == 3  }" [ngStyle]="getScrollInBoundButtonStyle()" (mousedown)="scrollButtonMouseDown($event)" (mouseup)="scrollButtonMouseUp($event)" #scrollButton><span></span></div>\n\t\t\t</div>\n\t\t\t<ul [ngStyle]="{ \'top\': blockPos.top , \'right\': blockPos.right, \'bottom\': blockPos.bottom, \'left\': blockPos.left }" (mousemove)="ctrlMouseMove($event)" (mouseup)="ctrlMouseUp($event)" #tabBlock>\n\t\t\t\t<li *ngFor="let tab of tabList" (mouseenter)="tabEnter($event, tab)" (mouseleave)="tabLeave($event, tab)" (mousedown)="tabMouseDown($event, tab)" (mousemove)="tabMouseMove($event, tab)" (touchstart)="tabTouchStart($event, tab)"  [ngClass]="getTabHeaderClass(tab)" [ngStyle]="{ opacity: getTabOpacity(tab), \'z-index\': tab.elemOrder }" #tabHeader>\n\t\t\t\t\t<span *ngIf="tab.icon" [ngClass]="tab.icon"></span>\n\t\t\t\t    <span *ngIf="tab.text" class="iui-tab-label">{{tab.text}}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<li *ngIf="reorderTab" [ngClass]="getTabHeaderClass(reorderTab, true)" [ngStyle]="getReorderTabStyle()">\n\t\t\t\t<div [ngStyle]="{ opacity: \'0.5\' }">\n\t\t\t\t\t<span *ngIf="reorderTab.icon" [ngClass]="reorderTab.icon"></span>\n\t\t\t\t    <span *ngIf="reorderTab.text" class="iui-tab-label">{{reorderTab.text}}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<div *ngIf="scrollMode==1" class="iui-tabstrip-scroll-inbound" [ngStyle]="getScrollInBoundStyle()" #scrollInBound>\n\t\t\t\t<div class="iui-tabstrip-scroll-button" [ngClass]="{ \'iui-tabstrip-scroll-button-up\': tabStripPlacement == 1 || tabStripPlacement == 4, \'iui-tabstrip-scroll-button-left\': tabStripPlacement == 0 || tabStripPlacement == 3  }" [ngStyle]="getScrollInBoundButtonStyle()" (mousedown)="scrollButtonMouseDown($event)" (mouseup)="scrollButtonMouseUp($event)" #scrollButton><span></span></div>\n\t\t\t\t<div class="iui-tabstrip-scroll-button"  [ngClass]="{ \'iui-tabstrip-scroll-button-down\': tabStripPlacement == 1 || tabStripPlacement == 4, \'iui-tabstrip-scroll-button-right\': tabStripPlacement == 0 || tabStripPlacement == 3  }" [ngStyle]="getScrollInBoundButtonStyle()" (mousedown)="scrollButtonMouseDown($event, true)" (mouseup)="scrollButtonMouseUp($event)"><span></span></div>\n\t\t\t</div>\n\t\t\t<div *ngIf="scrollMode==2" class="iui-tabstrip-scroll-outbound" [ngStyle]="getScrollOutBoundStyle()" #scrollInBound>\n\t\t\t\t<div class="iui-tabstrip-scroll-button"  [ngClass]="{ \'iui-tabstrip-scroll-button-down\': tabStripPlacement == 1 || tabStripPlacement == 4, \'iui-tabstrip-scroll-button-right\': tabStripPlacement == 0 || tabStripPlacement == 3  }" [ngStyle]="getScrollInBoundButtonStyle()" (mousedown)="scrollButtonMouseDown($event, true)" (mouseup)="scrollButtonMouseUp($event)"><span></span></div>\n\t\t\t</div>\n\t\t\t<ng-content></ng-content>\n\t\t</div>\n\t',
inputs:"controlStyle data enabled name size state".split(" "),providers:[integralui_core_1.IntegralUIBaseService,integralui_data_service_1.IntegralUIDataService],encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[integralui_data_service_1.IntegralUIDataService,core_1.ElementRef,core_1.Renderer,core_1.ChangeDetectorRef,integralui_common_service_1.IntegralUICommonService,core_1.ComponentFactoryResolver,integralui_core_1.IntegralUIBaseService])],b)}(integralui_core_1.IntegralUIBaseComponent);
exports.IntegralUITabStrip=IntegralUITabStrip;